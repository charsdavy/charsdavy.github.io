<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.2">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-08-03T13:53:48+08:00</updated><id>http://localhost:4000/</id><title type="html">Charsâ€™s Blog</title><subtitle>&lt;p&gt;å“ˆå–½ï¼Œæˆ‘æ˜¯ &lt;a href=&quot;https://twitter.com/charsdavy&quot;&gt;@Chars&lt;/a&gt;ï¼Œæ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS å¼€å‘è€…ã€‚&lt;/p&gt; &lt;p&gt;ä¸šä½™æ—¶é—´å‚åŠ  &lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt;ï¼Œæ’°å†™çŸ¥ä¹ä¸“æ &lt;a href=&quot;https://zhuanlan.zhihu.com/easy-to-understand-algorithm&quot;&gt;ã€Šé€šä¿—æ˜“æ‡‚çš„ç®—æ³•ã€‹&lt;/a&gt;ã€&lt;a href=&quot;https://zhuanlan.zhihu.com/health-go&quot;&gt;ã€Šå¦‚ä½•ç‹¬ç«‹å¼€å‘ä¸€ä¸ªå®Œæ•´åº”ç”¨ã€‹&lt;/a&gt;</subtitle><author><name>Chars</name></author><entry><title type="html">å®ç°ä¸€ä¸ª RESTful API æœåŠ¡å™¨</title><link href="http://localhost:4000/blog/restful-api-go/" rel="alternate" type="text/html" title="å®ç°ä¸€ä¸ª RESTful API æœåŠ¡å™¨" /><published>2018-07-31T00:00:00+08:00</published><updated>2018-07-31T00:00:00+08:00</updated><id>http://localhost:4000/blog/restful-api-go</id><content type="html" xml:base="http://localhost:4000/blog/restful-api-go/">&lt;p&gt;RESTful æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶ç»“æ„ã€‚å› ä¸ºå®ƒç»“æ„æ¸…æ™°ã€ç¬¦åˆæ ‡å‡†ã€æ˜“äºç†è§£ã€æ‰©å±•æ–¹ä¾¿ï¼Œæ‰€ä»¥æ­£å¾—åˆ°è¶Šæ¥è¶Šå¤šç½‘ç«™çš„é‡‡ç”¨ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-rest&quot;&gt;ä»€ä¹ˆæ˜¯ REST&lt;/h2&gt;

&lt;p&gt;RESTï¼ˆREpresentational State Transferï¼‰ï¼Œé¦–æ¬¡å‡ºç°åœ¨ 2000 å¹´ Roy Thomas Fielding çš„åšå£«è®ºæ–‡ä¸­ï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ã€‚æ»¡è¶³è¿™äº›çº¦æŸæ¡ä»¶å’ŒåŸåˆ™çš„åº”ç”¨ç¨‹åºæˆ–è®¾è®¡å°±æ˜¯ RESTful çš„ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;èµ„æºï¼ˆResourcesï¼‰ï¼ŒREST æ˜¯â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ï¼Œå…¶å®å®ƒçœç•¥äº†ä¸»è¯­ã€‚â€œè¡¨ç°å±‚â€å…¶å®æŒ‡çš„æ˜¯â€œèµ„æºâ€çš„â€œè¡¨ç°å±‚â€ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯èµ„æºå‘¢ï¼Ÿæˆ‘ä»¬å¹³æ—¶ç½‘ä¸Šè®¿é—®åˆ°å›¾ç‰‡ã€æ–‡å­—ã€æ–‡æ¡£ã€å¤šåª’ä½“ç­‰å°±æ˜¯èµ„æºï¼Œä¸€èˆ¬é€šè¿‡ URI æ¥å®šä½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª URI å°±è¡¨ç¤ºä¸€ä¸ªèµ„æºã€‚&lt;/li&gt;
  &lt;li&gt;è¡¨ç°å±‚ï¼ˆRepresentationï¼‰ï¼Œèµ„æºæ˜¯ä½œä¸ºä¸€ä¸ªå…·ä½“çš„å®ä½“ä¿¡æ¯ï¼Œå®ƒå¯ä»¥æœ‰å¤šç§çš„å±•ç°æ–¹å¼ã€‚è€ŒæŠŠå®ä½“å±•ç°å‡ºæ¥å°±æ˜¯è¡¨ç°å±‚ã€‚ä¾‹å¦‚ä¸€ä¸ª txt æ–‡æœ¬ä¿¡æ¯ï¼Œå®ƒå¯ä»¥è¾“å‡ºæˆ htmlã€json ç­‰ã€‚&lt;/li&gt;
  &lt;li&gt;çŠ¶æ€è½¬åŒ–ï¼ˆState Transferï¼‰ï¼Œè®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œå°±ä»£è¡¨äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„ä¸€ä¸ªäº’åŠ¨è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°±æ¶‰åŠåˆ°æ•°æ®å’ŒçŠ¶æ€çš„å˜åŒ–ã€‚è€Œ HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œé‚£ä¹ˆè¿™äº›çŠ¶æ€è‚¯å®šä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ‰€ä»¥å¦‚æœå®¢æˆ·ç«¯æƒ³è¦é€šçŸ¥æœåŠ¡å™¨ç«¯æ”¹å˜æ•°æ®å’ŒçŠ¶æ€çš„å˜åŒ–ï¼Œå°±è¦é€šè¿‡æŸç§æ–¹å¼æ¥é€šçŸ¥å®ƒã€‚å®¢æˆ·ç«¯èƒ½é€šçŸ¥æœåŠ¡å™¨ç«¯çš„æ‰‹æ®µï¼Œåªèƒ½æ˜¯ HTTP åè®®ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚å®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ˆä¹Ÿå¯ä»¥ç”¨äºæ›´æ–°èµ„æºï¼‰ï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETE ç”¨æ¥åˆ é™¤èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä»€ä¹ˆæ˜¯ RESTful æ¶æ„ï¼š&lt;/p&gt;

&lt;p&gt;1ã€æ¯ä¸€ä¸ª URI ä»£è¡¨ä¸€ç§èµ„æº&lt;/p&gt;

&lt;p&gt;2ã€å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ï¼Œä¼ é€’è¿™ç§èµ„æºçš„æŸç§è¡¨ç°å±‚&lt;/p&gt;

&lt;p&gt;3ã€å®¢æˆ·ç«¯é€šè¿‡å››ä¸ª HTTP åŠ¨è¯ï¼Œå¯¹æœåŠ¡ç«¯èµ„æºè¿›è¡Œæ“ä½œï¼Œå®ç°â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€&lt;/p&gt;

&lt;p&gt;å°†å®ƒä»¬æ¦‚è¿°ä¸ºå›¾ç‰‡å½¢å¼ï¼Œåˆ™ REST æ¶æ„å›¾ä¸ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/REST%E6%9E%B6%E6%9E%84%E5%9B%BE.png&quot; alt=&quot;RESTæ¶æ„å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;REST çš„æ‰©å±•æ€§ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/REST%E7%9A%84%E6%89%A9%E5%B1%95%E6%80%A7.png&quot; alt=&quot;REST çš„æ‰©å±•æ€§&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-rpc&quot;&gt;ä»€ä¹ˆæ˜¯ RPC&lt;/h2&gt;

&lt;p&gt;RPCï¼ˆRemote Procedure Call Protocolï¼‰è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼Œæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ã€‚å®ƒå‡å®šæŸäº›ä¼ è¾“åè®®çš„å­˜åœ¨ï¼Œå¦‚ TCP æˆ– UDPï¼Œä»¥ä¾¿ä¸ºé€šä¿¡ç¨‹åºä¹‹é—´æºå¸¦ä¿¡æ¯æ•°æ®ã€‚é€šè¿‡å®ƒå¯ä»¥ä½¿å‡½æ•°è°ƒç”¨æ¨¡å¼ç½‘ç»œåŒ–ã€‚åœ¨ OSI ç½‘ç»œé€šä¿¡æ¨¡å‹ä¸­ï¼ŒRPC è·¨è¶Šäº†ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚RPC ä½¿å¾—å¼€å‘åŒ…æ‹¬ç½‘ç»œåˆ†å¸ƒå¼å¤šç¨‹åºåœ¨å†…çš„åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å·¥ä½œåŸç†&quot;&gt;å·¥ä½œåŸç†&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/RPC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE.png&quot; alt=&quot;RPCå·¥ä½œæµç¨‹å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿è¡Œæ—¶ï¼Œä¸€æ¬¡å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨çš„ RPC è°ƒç”¨ï¼Œå…¶å†…éƒ¨æ“ä½œå¤§è‡´æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;

&lt;p&gt;1ã€è°ƒç”¨å®¢æˆ·ç«¯å¥æŸ„ï¼›æ‰§è¡Œä¼ é€å‚æ•°&lt;/p&gt;

&lt;p&gt;2ã€è°ƒç”¨æœ¬åœ°ç³»ç»Ÿå†…æ ¸å‘é€ç½‘ç»œæ¶ˆæ¯&lt;/p&gt;

&lt;p&gt;3ã€æ¶ˆæ¯ä¼ é€åˆ°æœåŠ¡ç«¯&lt;/p&gt;

&lt;p&gt;4ã€æœåŠ¡å™¨å¥æŸ„å¾—åˆ°æ¶ˆæ¯å¹¶å–å¾—å‚æ•°&lt;/p&gt;

&lt;p&gt;5ã€æ‰§è¡Œè¿œç¨‹è¿‡ç¨‹&lt;/p&gt;

&lt;p&gt;6ã€æ‰§è¡Œçš„è¿‡ç¨‹å°†ç»“æœè¿”å›æœåŠ¡å™¨å¥æŸ„&lt;/p&gt;

&lt;p&gt;7ã€æœåŠ¡å™¨å¥æŸ„è¿”å›ç»“æœï¼Œè°ƒç”¨è¿œç¨‹ç³»ç»Ÿå†…æ ¸&lt;/p&gt;

&lt;p&gt;8ã€æ¶ˆæ¯ä¼ å›æœ¬åœ°ä¸»æœº&lt;/p&gt;

&lt;p&gt;9ã€å®¢æˆ·ç«¯å¥æŸ„ç”±å†…æ ¸æ¥æ”¶æ¶ˆæ¯&lt;/p&gt;

&lt;p&gt;10ã€å®¢æˆ·ç«¯æ¥æ”¶å¥æŸ„è¿”å›çš„æ•°æ®&lt;/p&gt;

&lt;h2 id=&quot;rest-vs-rpc&quot;&gt;REST vs RPC&lt;/h2&gt;

&lt;p&gt;åœ¨åš API æœåŠ¡å™¨å¼€å‘æ—¶ï¼Œå¾ˆå¤šäººéƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ â€”â€” é€‰æ‹© REST è¿˜æ˜¯ RPCã€‚RPC ç›¸æ¯” REST çš„ä¼˜ç‚¹ä¸»è¦æœ‰ 3 ç‚¹ï¼š&lt;/p&gt;

&lt;p&gt;1ã€RPC+Protobuf é‡‡ç”¨çš„æ˜¯ TCP åšä¼ è¾“åè®®ï¼ŒREST ç›´æ¥ä½¿ç”¨ HTTP åšåº”ç”¨å±‚åè®®ï¼Œè¿™ç§åŒºåˆ«å¯¼è‡´ REST åœ¨è°ƒç”¨æ€§èƒ½ä¸Šä¼šæ¯” RPC+Protobuf ä½&lt;/p&gt;

&lt;p&gt;2ã€RPC ä¸åƒ REST é‚£æ ·ï¼Œæ¯ä¸€ä¸ªæ“ä½œéƒ½è¦æŠ½è±¡æˆå¯¹èµ„æºçš„å¢åˆ æ”¹æŸ¥ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæœ‰å¾ˆå¤šæ“ä½œå¾ˆéš¾æŠ½è±¡æˆèµ„æºï¼Œæ¯”å¦‚ç™»å½•æ“ä½œã€‚æ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­å¹¶ä¸èƒ½ä¸¥æ ¼æŒ‰ç…§ REST è§„èŒƒæ¥å†™ APIï¼ŒRPC å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜&lt;/p&gt;

&lt;p&gt;3ã€RPC å±è”½ç½‘ç»œç»†èŠ‚ã€æ˜“ç”¨ï¼Œå’Œæœ¬åœ°è°ƒç”¨ç±»ä¼¼&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ REST ç›¸è¾ƒ RPC ä¹Ÿæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼š&lt;/p&gt;

&lt;p&gt;1ã€è½»é‡çº§ï¼Œç®€å•æ˜“ç”¨ï¼Œç»´æŠ¤æ€§å’Œæ‰©å±•æ€§éƒ½æ¯”è¾ƒå¥½&lt;/p&gt;

&lt;p&gt;2ã€REST ç›¸å¯¹æ›´è§„èŒƒï¼Œæ›´æ ‡å‡†ï¼Œæ›´é€šç”¨ï¼Œæ— è®ºå“ªç§è¯­è¨€éƒ½æ”¯æŒ HTTP åè®®ï¼Œå¯ä»¥å¯¹æ¥å¤–éƒ¨å¾ˆå¤šç³»ç»Ÿï¼Œåªè¦æ»¡è¶³ HTTP è°ƒç”¨å³å¯ï¼Œæ›´é€‚åˆå¯¹å¤–ï¼ŒRPC ä¼šæœ‰è¯­è¨€é™åˆ¶ï¼Œä¸åŒè¯­è¨€çš„ RPC è°ƒç”¨èµ·æ¥å¾ˆéº»çƒ¦&lt;/p&gt;

&lt;p&gt;3ã€JSON æ ¼å¼å¯è¯»æ€§æ›´å¼ºï¼Œå¼€å‘è°ƒè¯•éƒ½å¾ˆæ–¹ä¾¿&lt;/p&gt;

&lt;p&gt;4ã€åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸¥æ ¼æŒ‰ç…§ REST è§„èŒƒæ¥å†™ APIï¼ŒAPI çœ‹èµ·æ¥æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“è¢«å¤§å®¶ç†è§£&lt;/p&gt;

&lt;p&gt;å…¶å®ä¸šç•Œæ™®éé‡‡ç”¨çš„åšæ³•æ˜¯ï¼Œå†…éƒ¨ç³»ç»Ÿä¹‹é—´è°ƒç”¨ç”¨ RPCï¼Œå¯¹å¤–ç”¨ RESTï¼Œå› ä¸ºå†…éƒ¨ç³»ç»Ÿä¹‹é—´å¯èƒ½è°ƒç”¨å¾ˆé¢‘ç¹ï¼Œéœ€è¦ RPC çš„é«˜æ€§èƒ½æ”¯æ’‘ã€‚å¯¹å¤–ç”¨ REST æ›´æ˜“ç†è§£ï¼Œæ›´é€šç”¨äº›ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸€ä¸ªåŸºæœ¬çš„-web-server&quot;&gt;ä¸€ä¸ªåŸºæœ¬çš„ Web Server&lt;/h2&gt;

&lt;p&gt;ä¸€ä¸ª RESTful æœåŠ¡æœ¬è´¨ä¸Šé¦–å…ˆæ˜¯ä¸€ä¸ª Web serviceã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ Web serverï¼Œå¯¹äºä»»ä½•è¯·æ±‚éƒ½ç®€å•çš„ç›´æ¥è¿”å›è¯·æ±‚é“¾æ¥ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;package&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;html&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;log&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;net/http&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello, %q&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EscapeString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;:8080&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¼–è¯‘è¿è¡Œä¹‹åï¼Œä½¿ç”¨ curl æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -v -XGET -H &lt;span class=&quot;s2&quot;&gt;&quot;Content-Type: application/json&quot;&lt;/span&gt; http://127.0.0.1:8080/user

Hello, &lt;span class=&quot;s2&quot;&gt;&quot;/user&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;è·¯ç”±åŠŸèƒ½&quot;&gt;è·¯ç”±åŠŸèƒ½&lt;/h2&gt;

&lt;p&gt;å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬çš„çº¿ä¸Šé¡¹ç›®ä¸å¯èƒ½ä½¿ç”¨è¿™ä¹ˆç®€å•çš„ API æœåŠ¡å™¨ã€‚å½“ç”¨æˆ·å¢åŠ ï¼Œè¯·æ±‚ä¹Ÿä¼šä¸æ–­ä¸Šæ¶¨ï¼Œè¯¥å¦‚ä½•å¤„ç†å¥½è¿™äº›è¯·æ±‚ï¼Ÿä½œè€…ä½¿ç”¨äº†ä¸€ä¸ªå¼€æºè·¯ç”±æ¡†æ¶ &lt;a href=&quot;https://github.com/gorilla/mux&quot;&gt;mux&lt;/a&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªå°å·§é«˜æ•ˆï¼Œä¸”ä½¿ç”¨è¾ƒå¹¿çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ã€‚æ¥ä¸‹æ¥çš„ç¯‡å¹…é‡Œï¼Œä½œè€…ä¼šä½¿ç”¨ mux æ­å»ºä¸€ä¸ª API æœåŠ¡å™¨æ¡†æ¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®‰è£…-mux&quot;&gt;å®‰è£… mux&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$go&lt;/span&gt; get github.com/gorilla/mux
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;router&quot;&gt;Router&lt;/h3&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;//Router.go&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;net/http&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;github.com/gorilla/mux&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pattern&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewRouter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewRouter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StrictSlash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Handler&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DeleteItem&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DELETE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/v1/delete&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v1_deleteItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;handler&quot;&gt;Handler&lt;/h3&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;//Handler.go&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v1_deleteItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;application/json; charset=UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteHeader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusOK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewEncoder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jsonErr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusOK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ•´ä½“ mux åŠŸèƒ½å®ç°ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;//main.go&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewRouter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;service running(PID:%d)...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Getpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;:8080&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;API åŸºæœ¬æ¡†æ¶å·²ç»å®ç°ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å°†ç›¸åº”åŠŸèƒ½å®ç°æ¨¡å—ä¸ç›¸åº”æ¥å£å¯¹æ¥å³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h2&gt;

&lt;p&gt;å¯¹äºæƒ³è¦å­¦ä¹ ä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯å¼€å‘è€…å¦‚ä½•ç‹¬ç«‹å®Œæˆä¸€ä¸ªå…·æœ‰ API æœåŠ¡å™¨åŠŸèƒ½çš„çº¿ä¸Š APPï¼Œå¯ä»¥å‚è€ƒä¸“æ &lt;a href=&quot;https://zhuanlan.zhihu.com/health-go&quot;&gt;ã€Šå¦‚ä½•ç‹¬ç«‹å¼€å‘ä¸€ä¸ªå®Œæ•´åº”ç”¨ã€‹&lt;/a&gt;ï¼Œä¸“æ ä¸­ä½¿ç”¨çº¿ä¸Š APP &lt;a href=&quot;https://itunes.apple.com/cn/app/id1177823334&quot;&gt;é“æ‰‹è‰º&lt;/a&gt; ä½œä¸ºæ¡ˆä¾‹ï¼Œè¯¦ç»†åˆ†äº«äº†ç¬”è€…å¦‚ä½•å®ç° APP å…¨éƒ¨åŠŸèƒ½ã€‚&lt;/p&gt;</content><author><name>Chars</name></author><category term="web" /><category term="go" /><summary type="html">RESTful æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶ç»“æ„ã€‚å› ä¸ºå®ƒç»“æ„æ¸…æ™°ã€ç¬¦åˆæ ‡å‡†ã€æ˜“äºç†è§£ã€æ‰©å±•æ–¹ä¾¿ï¼Œæ‰€ä»¥æ­£å¾—åˆ°è¶Šæ¥è¶Šå¤šç½‘ç«™çš„é‡‡ç”¨ã€‚</summary></entry><entry><title type="html">CocoaPods æäº¤ä»£ç è¸©å‘</title><link href="http://localhost:4000/blog/cocoapods-source-commit/" rel="alternate" type="text/html" title="CocoaPods æäº¤ä»£ç è¸©å‘" /><published>2018-07-16T00:00:00+08:00</published><updated>2018-07-16T00:00:00+08:00</updated><id>http://localhost:4000/blog/cocoapods-source-commit</id><content type="html" xml:base="http://localhost:4000/blog/cocoapods-source-commit/">&lt;p&gt;å¦‚ä½•æäº¤ä»£ç è‡³ CocoaPodsï¼Ÿè¿™ä¸ªé—®é¢˜åœ¨ Google ä¸€æœç´¢å¯ä»¥æœ‰å¾ˆå¤šæ–‡ç« å‡ºæ¥ï¼Œä¸è¿‡ï¼Œå…¶ä¸­é‡åˆ°çš„å‘å´æ— äººæåŠã€‚ç¬”è€…ç°åœ¨å°†å®é™…æ“ä½œå·¥ç¨‹è®°å½•å¦‚ä¸‹ï¼Œå¹¶æ€»ç»“è¸©å‘æ³¨æ„äº‹é¡¹ï¼šæ“ä½œé¡ºåºã€æ–‡ä»¶é…ç½®ã€å‘½ä»¤ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;

&lt;h3 id=&quot;æäº¤ä»£ç &quot;&gt;æäº¤ä»£ç &lt;/h3&gt;

&lt;p&gt;å°†éœ€è¦æäº¤è‡³ CocoaPods çš„ä»£ç æäº¤è‡³ä»£ç æ‰˜ç®¡æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼šGitHubã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæäº¤çš„ä»£ç éœ€è¦åŒ…å« &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; æ ‡ç­¾ã€‚å…¶å®å°±æ˜¯ git é‡Œé¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;git tag&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®‰è£…æˆ–æ›´æ–°-cocoapods&quot;&gt;å®‰è£…æˆ–æ›´æ–° CocoaPods&lt;/h3&gt;

&lt;h4 id=&quot;å®‰è£…&quot;&gt;å®‰è£…&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;gem install cocoapods
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;æ›´æ–°&quot;&gt;æ›´æ–°&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod update
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;æ³¨å†Œ-trunk&quot;&gt;æ³¨å†Œ Trunk&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod trunk register e_mail_address &lt;span class=&quot;s1&quot;&gt;'your_name'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;è®°å¾—å»æ³¨å†Œé‚®ç®±æ¿€æ´»&lt;/p&gt;

&lt;h4 id=&quot;æŸ¥çœ‹æ³¨å†Œä¿¡æ¯&quot;&gt;æŸ¥çœ‹æ³¨å†Œä¿¡æ¯&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod trunk me

  - Name:     charsdavy
  - Email:    chars.davy@gmail.com
  - Since:    July 15th, 21:38
  - Pods:
    - JCCNavigationController
  - Sessions:
    - July 15th, 21:38 - November 21st, 01:45. IP: xx.xx.xx.xx
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;åˆ›å»º-podspec-æ–‡ä»¶&quot;&gt;åˆ›å»º .podspec æ–‡ä»¶&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶çš„ä½œç”¨æ˜¯ä¸ºäº†è®© CocoaPods æœç´¢å¼•æ“çŸ¥é“è¯¥ä»£ç çš„ä½œè€…ã€ç‰ˆæœ¬å·ã€æ¦‚è¦ã€æè¿°ã€æºä»£ç åœ°å€ã€éƒ¨ç½²ç‰ˆæœ¬ã€ä¾èµ–çš„æ¡†æ¶ç­‰æè¿°ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.podspec&lt;/code&gt;æ–‡ä»¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod spec create JCCNavigationController // ç”Ÿæˆ JCCNavigationController.podspec æ–‡ä»¶
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JCCNavigationController.podspec&lt;/code&gt; æ–‡ä»¶å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#
#  Be sure to run `pod spec lint JCCNavigationController.podspec' to ensure this is a
#  valid spec and to remove all comments including this before submitting the spec.
#
#  To learn more about Podspec attributes see http://docs.cocoapods.org/specification.html
#  To see working Podspecs in the CocoaPods repo see https://github.com/CocoaPods/Specs/
#

Pod::Spec.new do |s|

  # â€•â€•â€•  Spec Metadata  â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  These will help people to find your library, and whilst it
  #  can feel like a chore to fill in it's definitely to your advantage. The
  #  summary should be tweet-length, and the description more in depth.
  #

  s.name         = &quot;JCCNavigationController&quot;
  s.version      = &quot;1.0&quot;
  s.summary      = &quot;A navigation bar integrated transition animation effect.&quot;

  # This description is used to generate tags and improve search results.
  #   * Think: What does it do? Why did you write it? What is the focus?
  #   * Try to keep it short, snappy and to the point.
  #   * Write the description between the DESC delimiters below.
  #   * Finally, don't worry about the indent, CocoaPods strips it!
  s.description  = &amp;lt;&amp;lt;-DESC
                  With zoom interactive animation, A navigation bar integrated transition animation effect.
                  DESC

  s.homepage     = &quot;https://github.com/charsdavy/JCCNavigationController&quot;
  s.screenshots  = &quot;https://raw.githubusercontent.com/charsdavy/JCCNavigationController/master/Screenshot.gif&quot;
  # s.screenshots  = &quot;www.example.com/screenshots_1.gif&quot;, &quot;www.example.com/screenshots_2.gif&quot;


  # â€•â€•â€•  Spec License  â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  Licensing your code is important. See http://choosealicense.com for more info.
  #  CocoaPods will detect a license file if there is a named LICENSE*
  #  Popular ones are 'MIT', 'BSD' and 'Apache License, Version 2.0'.
  #

  s.license      = { :type =&amp;gt; &quot;MIT&quot;, :file =&amp;gt; &quot;LICENSE&quot; }
  # s.license      = { :type =&amp;gt; &quot;MIT&quot;, :file =&amp;gt; &quot;FILE_LICENSE&quot; }


  # â€•â€•â€• Author Metadata  â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  Specify the authors of the library, with email addresses. Email addresses
  #  of the authors are extracted from the SCM log. E.g. $ git log. CocoaPods also
  #  accepts just a name if you'd rather not provide an email address.
  #
  #  Specify a social_media_url where others can refer to, for example a twitter
  #  profile URL.
  #

  s.author             = { &quot;charsdavy&quot; =&amp;gt; &quot;charsdavy@gamil.com&quot; }
  s.social_media_url   = &quot;https://twitter.com/charsdavy&quot;

  s.swift_version = &quot;4.0&quot;
  # â€•â€•â€• Platform Specifics â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  If this Pod runs only on iOS or OS X, then specify the platform and
  #  the deployment target. You can optionally include the target after the platform.
  #

  s.platform     = :ios
  s.platform     = :ios, &quot;8.0&quot;

  #  When using multiple platforms
  s.ios.deployment_target = &quot;8.0&quot;
  # s.osx.deployment_target = &quot;10.7&quot;
  # s.watchos.deployment_target = &quot;2.0&quot;
  # s.tvos.deployment_target = &quot;9.0&quot;


  # â€•â€•â€• Source Location â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  Specify the location from where the source should be retrieved.
  #  Supports git, hg, bzr, svn and HTTP.
  #

  s.source       = { :git =&amp;gt; &quot;https://github.com/charsdavy/JCCNavigationController.git&quot;, :tag =&amp;gt; &quot;#{s.version}&quot; }


  # â€•â€•â€• Source Code â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  CocoaPods is smart about how it includes source code. For source files
  #  giving a folder will include any swift, h, m, mm, c &amp;amp; cpp files.
  #  For header files it will include any header in the folder.
  #  Not including the public_header_files will make all headers public.
  #

  s.source_files  = &quot;JCCNavigationController/*.swift&quot;
  # s.exclude_files = &quot;Classes/Exclude&quot;

  # s.public_header_files = &quot;Classes/**/*.h&quot;


  # â€•â€•â€• Resources â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  A list of resources included with the Pod. These are copied into the
  #  target bundle with a build phase script. Anything else will be cleaned.
  #  You can preserve files from being cleaned, please don't preserve
  #  non-essential files like tests, examples and documentation.
  #

  # s.resource  = &quot;icon.png&quot;
  # s.resources = &quot;Resources/*.png&quot;

  # s.preserve_paths = &quot;FilesToSave&quot;, &quot;MoreFilesToSave&quot;


  # â€•â€•â€• Project Linking â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  Link your library with frameworks, or libraries. Libraries do not include
  #  the lib prefix of their name.
  #

  # s.framework  = &quot;SomeFramework&quot;
  # s.frameworks = &quot;SomeFramework&quot;, &quot;AnotherFramework&quot;

  # s.library   = &quot;iconv&quot;
  # s.libraries = &quot;iconv&quot;, &quot;xml2&quot;


  # â€•â€•â€• Project Settings â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• #
  #
  #  If your library depends on compiler flags you can set them in the xcconfig hash
  #  where they will only apply to your library. If you depend on other Podspecs
  #  you can include multiple dependencies to ensure it works.

  # s.requires_arc = true

  # s.xcconfig = { &quot;HEADER_SEARCH_PATHS&quot; =&amp;gt; &quot;$(SDKROOT)/usr/include/libxml2&quot; }
  # s.dependency &quot;JSONKit&quot;, &quot;~&amp;gt; 1.4&quot;

end
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä»¥ä¸Šæ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„ &lt;code class=&quot;highlighter-rouge&quot;&gt;s.platform&lt;/code&gt; è¿™ä¸ªå­—æ®µï¼Œæ–‡æœ¬ä¸­çš„æ³¨é‡Šè¯´çš„å¾ˆæ˜ç™½ï¼Œé»˜è®¤æ˜¯å…¨å¹³å°éƒ½æ”¯æŒçš„ï¼Œå¦‚æœåªæ”¯æŒæŸä¸€ä¸ªå¹³å°ï¼Œåˆ™éœ€è¦ç»†å¿ƒé…ç½®å®Œå–„ã€‚&lt;/p&gt;

&lt;h2 id=&quot;éªŒè¯-podspec-æ–‡ä»¶æ˜¯å¦åˆæ³•&quot;&gt;éªŒè¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶æ˜¯å¦åˆæ³•&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod spec lint JCCNavigationController.podspec
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœé…ç½®æ–‡ä»¶ä»å­˜åœ¨é”™è¯¯ï¼Œåˆ™æ ¹æ®é”™è¯¯æç¤ºä¿®å¤é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœåªæœ‰ä»¥ä¸‹ä¸€ä¸ªé”™è¯¯ï¼Œåˆ™åªéœ€æäº¤ä»£ç å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ERROR | unknown: Encountered an unknown error &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;uninitialized constant REST::DisconnectedError&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; during validation.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;æäº¤-podspec-æ–‡ä»¶&quot;&gt;æäº¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶&lt;/h2&gt;

&lt;p&gt;å°† &lt;code class=&quot;highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶æäº¤è‡³ä»£ç æ‰˜ç®¡æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼Œå°† &lt;code class=&quot;highlighter-rouge&quot;&gt;JCCNavigationController.podspec&lt;/code&gt; æ–‡ä»¶æäº¤è‡³ &lt;code class=&quot;highlighter-rouge&quot;&gt;JCCNavigationController&lt;/code&gt; é¡¹ç›®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æäº¤ä»£ç è‡³-cocoapods&quot;&gt;æäº¤ä»£ç è‡³ CocoaPods&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pod trunk push JCCNavigationController.podspec --allow-warnings
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿”å›ä»¥ä¸‹ä¿¡æ¯åˆ™ä¸ºæˆåŠŸï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;--------------------------------------------------------------------------------
 ğŸ‰  Congrats

 ğŸš€  JCCNavigationController &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; successfully published
 ğŸ“…  July 16th, 00:58
 ğŸŒ  https://cocoapods.org/pods/JCCNavigationController
 ğŸ‘  Tell your friends!
--------------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;é™„å½•&quot;&gt;é™„å½•&lt;/h2&gt;

&lt;h3 id=&quot;jccnavigationcontroller&quot;&gt;&lt;a href=&quot;https://github.com/charsdavy/JCCNavigationController&quot;&gt;JCCNavigationController&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/charsdavy/JCCNavigationController&quot;&gt;JCCNavigationController&lt;/a&gt;ï¼Œä¸€ç§å¯¼èˆªæ ä¸€ä½“åŒ–è½¬åœºåŠ¨ç”»æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/charsdavy/JCCNavigationController/master/Screenshot.gif&quot; alt=&quot;JCCNavigationController&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ddcornerradius&quot;&gt;&lt;a href=&quot;https://github.com/charsdavy/JCCNavigationController&quot;&gt;DDCornerRadius&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/charsdavy/DDCornerRadius&quot;&gt;DDCornerRadius&lt;/a&gt;ï¼Œä¼˜åŒ–åœ†è§’å®ç°æ–¹æ¡ˆï¼Œé¿å…ç¦»å±æ¸²æŸ“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/charsdavy/DDCornerRadius/master/Screenshot.gif&quot; alt=&quot;DDCornerRadius&quot; /&gt;&lt;/p&gt;</content><author><name>Chars</name></author><category term="pieces" /><category term="cocoapods" /><category term="å¼€æº" /><summary type="html">å¦‚ä½•æäº¤ä»£ç è‡³ CocoaPodsï¼Ÿè¿™ä¸ªé—®é¢˜åœ¨ Google ä¸€æœç´¢å¯ä»¥æœ‰å¾ˆå¤šæ–‡ç« å‡ºæ¥ï¼Œä¸è¿‡ï¼Œå…¶ä¸­é‡åˆ°çš„å‘å´æ— äººæåŠã€‚ç¬”è€…ç°åœ¨å°†å®é™…æ“ä½œå·¥ç¨‹è®°å½•å¦‚ä¸‹ï¼Œå¹¶æ€»ç»“è¸©å‘æ³¨æ„äº‹é¡¹ï¼šæ“ä½œé¡ºåºã€æ–‡ä»¶é…ç½®ã€å‘½ä»¤ä½¿ç”¨ã€‚</summary></entry><entry><title type="html">Tensorflow â€“ åŸºå‡†</title><link href="http://localhost:4000/blog/tensorflow-performance-benchmarks/" rel="alternate" type="text/html" title="Tensorflow -- åŸºå‡†" /><published>2018-02-05T00:00:00+08:00</published><updated>2018-02-05T00:00:00+08:00</updated><id>http://localhost:4000/blog/tensorflow-performance-benchmarks</id><content type="html" xml:base="http://localhost:4000/blog/tensorflow-performance-benchmarks/">&lt;p&gt;TensorFlow ç¤¾åŒºåˆ›å»ºäº†ä¸€ç³»åˆ—ç”¨äºå¤šå¹³å°æµ‹è¯•çš„å›¾åƒåˆ†ç±»æ¨¡å‹å‚è€ƒç‚¹ã€‚åœ¨ &lt;a href=&quot;#methodology&quot;&gt;æ–¹æ³•&lt;/a&gt; ç« èŠ‚ä¸­ä¼šè¯¦ç»†è¯´æ˜å¦‚ä½•æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶ç»™å‡ºä½¿ç”¨çš„è„šæœ¬é“¾æ¥ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;å›¾åƒåˆ†ç±»æ¨¡å‹çš„ç»“æœ&quot;&gt;å›¾åƒåˆ†ç±»æ¨¡å‹çš„ç»“æœ&lt;/h2&gt;

&lt;p&gt;InceptionV3 (&lt;a href=&quot;https://arxiv.org/abs/1512.00567&quot;&gt;arXiv:1512.00567&lt;/a&gt;), ResNet-50
(&lt;a href=&quot;https://arxiv.org/abs/1512.03385&quot;&gt;arXiv:1512.03385&lt;/a&gt;), ResNet-152
(&lt;a href=&quot;https://arxiv.org/abs/1512.03385&quot;&gt;arXiv:1512.03385&lt;/a&gt;), VGG16
(&lt;a href=&quot;https://arxiv.org/abs/1409.1556&quot;&gt;arXiv:1409.1556&lt;/a&gt;), å’Œ
&lt;a href=&quot;http://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf&quot;&gt;AlexNet&lt;/a&gt; ä½¿ç”¨ &lt;a href=&quot;http://www.image-net.org/&quot;&gt;ImageNet&lt;/a&gt; æ•°æ®é›†æµ‹è¯•ã€‚è¿™äº›æµ‹è¯•è¿è¡Œåœ¨ Google è®¡ç®—äº‘å¼•æ“ï¼Œäºšé©¬é€Šè®¡ç®—äº‘ (Amazon EC2) å’Œ NVIDIAÂ® DGX-1â„¢ ã€‚å¤§éƒ¨åˆ†æµ‹è¯•ä½¿ç”¨åˆæˆå’ŒçœŸå®çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åˆæˆæ•°æ®çš„æµ‹è¯•æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;tf.Variable&lt;/code&gt; è®¾ç½®ç›¸åŒçš„ shapeï¼Œé™¤äº†æ¯ä¸ª ImageNet æ¨¡å‹ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œå½“è¯„ä¼°ä¸€ä¸ªå¹³å°çš„åŸºå‡†æ—¶åŒ…å«çœŸå®æ•°æ®æ˜¯å¾ˆé‡è¦çš„ã€‚åº•å±‚ç¡¬ä»¶å’Œæ¡†æ¶çš„åŠ è½½æµ‹è¯•æ˜¯ä¸ºäº†è®­ç»ƒå®é™…æ•°æ®ã€‚æˆ‘ä»¬å¼€å§‹åˆæˆæ•°æ®ç”¨æ¥ç§»é™¤ç£ç›˜ I/O ä½œä¸ºä¸€ä¸ªå˜é‡ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªåŸºå‡†ã€‚ç„¶åä½¿ç”¨çœŸå®çš„æ•°æ®æ¥éªŒè¯ TensorFlow çš„è¾“å…¥å’Œåº•å±‚ç£ç›˜ I/O çš„è®¡ç®—å•å…ƒã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨-nvidia-dgx-1-nvidia-tesla-p100-è®­ç»ƒ&quot;&gt;ä½¿ç”¨ NVIDIAÂ® DGX-1â„¢ (NVIDIAÂ® TeslaÂ® P100) è®­ç»ƒ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:80%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_p100_single_server.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;ç»†èŠ‚å’Œé™„åŠ ç»“æœåœ¨ &lt;a href=&quot;#details_for_nvidia_dgx-1tm_nvidia_tesla_p100&quot;&gt;NVIDIAÂ® DGX-1â„¢ (NVIDIAÂ®
TeslaÂ® P100) çš„ç»†èŠ‚&lt;/a&gt; ç« èŠ‚ä¸­ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨-nvidia-tesla-k80-è®­ç»ƒ&quot;&gt;ä½¿ç”¨ NVIDIAÂ® TeslaÂ® K80 è®­ç»ƒ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:80%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_k80_single_server.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;ç»†èŠ‚å’Œé™„åŠ ç»“æœåœ¨ &lt;a href=&quot;#details_for_google_compute_engine_nvidia_tesla_k80&quot;&gt;Google è®¡ç®—å¼•æ“
(NVIDIAÂ® TeslaÂ® K80) çš„ç»†èŠ‚&lt;/a&gt; å’Œ
&lt;a href=&quot;#details_for_amazon_ec2_nvidia_tesla_k80&quot;&gt;Amazon EC2 (NVIDIAÂ® TeslaÂ®
K80) çš„ç»†èŠ‚&lt;/a&gt; ç« èŠ‚ä¸­ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨-nvidia-tesla-k80-åˆ†å¸ƒå¼è®­ç»ƒ&quot;&gt;ä½¿ç”¨ NVIDIAÂ® TeslaÂ® K80 åˆ†å¸ƒå¼è®­ç»ƒ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:80%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_k80_aws_distributed.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;ç»†èŠ‚å’Œé™„åŠ ç»“æœåœ¨ &lt;a href=&quot;#details_for_amazon_ec2_distributed_nvidia_tesla_k80&quot;&gt;åˆ†å¸ƒå¼ Amazon EC2
(NVIDIAÂ® TeslaÂ® K80) çš„ç»†èŠ‚&lt;/a&gt;
ç« èŠ‚ä¸­ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ¯”è¾ƒåˆæˆå’ŒçœŸå®è®­ç»ƒæ•°æ®&quot;&gt;æ¯”è¾ƒåˆæˆå’ŒçœŸå®è®­ç»ƒæ•°æ®&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NVIDIAÂ® TeslaÂ® P100&lt;/strong&gt;&lt;/p&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_p100_data_compare_inceptionv3.png&quot; /&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_p100_data_compare_resnet50.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NVIDIAÂ® TeslaÂ® K80&lt;/strong&gt;&lt;/p&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_k80_data_compare_inceptionv3.png&quot; /&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_k80_data_compare_resnet50.png&quot; /&gt;
&lt;/div&gt;

&lt;h2 id=&quot;nvidia-dgx-1-nvidia-tesla-p100-çš„ç»†èŠ‚&quot;&gt;NVIDIAÂ® DGX-1â„¢ (NVIDIAÂ® TeslaÂ® P100) çš„ç»†èŠ‚&lt;/h2&gt;

&lt;h3 id=&quot;ç¯å¢ƒé…ç½®&quot;&gt;ç¯å¢ƒé…ç½®&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Instance type&lt;/strong&gt;: NVIDIAÂ® DGX-1â„¢&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GPU:&lt;/strong&gt; 8x NVIDIAÂ® TeslaÂ® P100&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OS:&lt;/strong&gt; Ubuntu 16.04 LTS with tests run via Docker&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;CUDA / cuDNN:&lt;/strong&gt; 8.0 / 5.1&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;TensorFlow GitHub hash:&lt;/strong&gt; b1e174e&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Benchmark GitHub hash:&lt;/strong&gt; 9165a70&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Build Command:&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;bazel build -c opt --copt=-march=&quot;haswell&quot; --config=cuda
//tensorflow/tools/pip_package:build_pip_package&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Disk:&lt;/strong&gt; Local SSD&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DataSet:&lt;/strong&gt; ImageNet&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Test Date:&lt;/strong&gt; May 2017&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å‹çš„æ‰¹å¤„ç†å¤§å°å’Œä¼˜åŒ–å™¨å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚é™¤äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ‰¹å¤„ç†å¤§å°ï¼ŒInceptionV3ã€ResNet-50ã€ResNet-152 å’Œ VGG16 ä¹Ÿç”¨æ‰¹å¤„ç†å¤§å°ä¸º 32 è¿›è¡Œæµ‹è¯•ã€‚è¿™äº›ç»“æœåœ¨ &lt;em&gt;å…¶ä»–ç»“æœ&lt;/em&gt; ç« èŠ‚ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Options&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Batch size per GPU&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;512&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Optimizer&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç”¨äºæ¯ä¸ªæ¨¡å‹çš„é…ç½®ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Model&lt;/th&gt;
      &lt;th&gt;variable_update&lt;/th&gt;
      &lt;th&gt;local_parameter_device&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;InceptionV3&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;cpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet50&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;cpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet152&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;cpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;AlexNet&lt;/td&gt;
      &lt;td&gt;replicated (with NCCL)&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;VGG16&lt;/td&gt;
      &lt;td&gt;replicated (with NCCL)&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ç»“æœ&quot;&gt;ç»“æœ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:80%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_p100_single_server.png&quot; /&gt;
&lt;/div&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_dgx1_synth_p100_single_server_scaling.png&quot; /&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_dgx1_real_p100_single_server_scaling.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;142&lt;/td&gt;
      &lt;td&gt;219&lt;/td&gt;
      &lt;td&gt;91.8&lt;/td&gt;
      &lt;td&gt;2987&lt;/td&gt;
      &lt;td&gt;154&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;284&lt;/td&gt;
      &lt;td&gt;422&lt;/td&gt;
      &lt;td&gt;181&lt;/td&gt;
      &lt;td&gt;5658&lt;/td&gt;
      &lt;td&gt;295&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;569&lt;/td&gt;
      &lt;td&gt;852&lt;/td&gt;
      &lt;td&gt;356&lt;/td&gt;
      &lt;td&gt;10509&lt;/td&gt;
      &lt;td&gt;584&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;1131&lt;/td&gt;
      &lt;td&gt;1734&lt;/td&gt;
      &lt;td&gt;716&lt;/td&gt;
      &lt;td&gt;17822&lt;/td&gt;
      &lt;td&gt;1081&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;142&lt;/td&gt;
      &lt;td&gt;218&lt;/td&gt;
      &lt;td&gt;91.4&lt;/td&gt;
      &lt;td&gt;2890&lt;/td&gt;
      &lt;td&gt;154&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;278&lt;/td&gt;
      &lt;td&gt;425&lt;/td&gt;
      &lt;td&gt;179&lt;/td&gt;
      &lt;td&gt;4448&lt;/td&gt;
      &lt;td&gt;284&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;551&lt;/td&gt;
      &lt;td&gt;853&lt;/td&gt;
      &lt;td&gt;359&lt;/td&gt;
      &lt;td&gt;7105&lt;/td&gt;
      &lt;td&gt;534&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;1079&lt;/td&gt;
      &lt;td&gt;1630&lt;/td&gt;
      &lt;td&gt;708&lt;/td&gt;
      &lt;td&gt;N/A&lt;/td&gt;
      &lt;td&gt;898&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä»ä¸Šå›¾è¡¨å¯ä»¥çœ‹å‡ºï¼Œç”±äºæœ€å¤§è¾“å…¥çš„é™åˆ¶ï¼ŒAlexNet æ¨¡å‹æ²¡æœ‰ä½¿ç”¨ 8 ä¸ª GPU æ¥è®­ç»ƒæ•°æ®ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–ç»“æœ&quot;&gt;å…¶ä»–ç»“æœ&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯æ‰¹å¤„ç†å¤§å°ä¸º 32 çš„ç»“æœã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;128&lt;/td&gt;
      &lt;td&gt;195&lt;/td&gt;
      &lt;td&gt;82.7&lt;/td&gt;
      &lt;td&gt;144&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;259&lt;/td&gt;
      &lt;td&gt;368&lt;/td&gt;
      &lt;td&gt;160&lt;/td&gt;
      &lt;td&gt;281&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;520&lt;/td&gt;
      &lt;td&gt;768&lt;/td&gt;
      &lt;td&gt;317&lt;/td&gt;
      &lt;td&gt;549&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;995&lt;/td&gt;
      &lt;td&gt;1485&lt;/td&gt;
      &lt;td&gt;632&lt;/td&gt;
      &lt;td&gt;820&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;130&lt;/td&gt;
      &lt;td&gt;193&lt;/td&gt;
      &lt;td&gt;82.4&lt;/td&gt;
      &lt;td&gt;144&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;257&lt;/td&gt;
      &lt;td&gt;369&lt;/td&gt;
      &lt;td&gt;159&lt;/td&gt;
      &lt;td&gt;253&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;507&lt;/td&gt;
      &lt;td&gt;760&lt;/td&gt;
      &lt;td&gt;317&lt;/td&gt;
      &lt;td&gt;457&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;966&lt;/td&gt;
      &lt;td&gt;1410&lt;/td&gt;
      &lt;td&gt;609&lt;/td&gt;
      &lt;td&gt;690&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;google-compute-engine-nvidia-tesla-k80-çš„ç»†èŠ‚&quot;&gt;Google Compute Engine (NVIDIAÂ® TeslaÂ® K80) çš„ç»†èŠ‚&lt;/h2&gt;

&lt;h3 id=&quot;ç¯å¢ƒé…ç½®-1&quot;&gt;ç¯å¢ƒé…ç½®&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Instance type&lt;/strong&gt;: n1-standard-32-k80x8&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GPU:&lt;/strong&gt; 8x NVIDIAÂ® TeslaÂ® K80&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OS:&lt;/strong&gt; Ubuntu 16.04 LTS&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;CUDA / cuDNN:&lt;/strong&gt; 8.0 / 5.1&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;TensorFlow GitHub hash:&lt;/strong&gt; b1e174e&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Benchmark GitHub hash:&lt;/strong&gt; 9165a70&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Build Command:&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;bazel build -c opt --copt=-march=&quot;haswell&quot; --config=cuda
//tensorflow/tools/pip_package:build_pip_package&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Disk:&lt;/strong&gt; 1.7 TB Shared SSD persistent disk (800 MB/s)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DataSet:&lt;/strong&gt; ImageNet&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Test Date:&lt;/strong&gt; May 2017&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å‹çš„æ‰¹å¤„ç†å¤§å°å’Œä¼˜åŒ–å™¨å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚é™¤äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ‰¹å¤„ç†å¤§å°ï¼ŒInceptionV3 å’Œ ResNet-50 ä¹Ÿç”¨æ‰¹å¤„ç†å¤§å°ä¸º 32 è¿›è¡Œæµ‹è¯•ã€‚è¿™äº›ç»“æœåœ¨ &lt;em&gt;å…¶ä»–ç»“æœ&lt;/em&gt; ç« èŠ‚ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Options&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Batch size per GPU&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;512&lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Optimizer&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å‹æ‰€ç”¨çš„é…ç½®ä¸­ï¼Œ variable_update å’Œ parameter_server é…ç½®ç›¸åŒï¼Œlocal_parameter_device å’Œ cpu é…ç½®ç›¸åŒã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç»“æœ-1&quot;&gt;ç»“æœ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_gce_synth_k80_single_server_scaling.png&quot; /&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_gce_real_k80_single_server_scaling.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;30.5&lt;/td&gt;
      &lt;td&gt;51.9&lt;/td&gt;
      &lt;td&gt;20.0&lt;/td&gt;
      &lt;td&gt;656&lt;/td&gt;
      &lt;td&gt;35.4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;57.8&lt;/td&gt;
      &lt;td&gt;99.0&lt;/td&gt;
      &lt;td&gt;38.2&lt;/td&gt;
      &lt;td&gt;1209&lt;/td&gt;
      &lt;td&gt;64.8&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;116&lt;/td&gt;
      &lt;td&gt;195&lt;/td&gt;
      &lt;td&gt;75.8&lt;/td&gt;
      &lt;td&gt;2328&lt;/td&gt;
      &lt;td&gt;120&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;227&lt;/td&gt;
      &lt;td&gt;387&lt;/td&gt;
      &lt;td&gt;148&lt;/td&gt;
      &lt;td&gt;4640&lt;/td&gt;
      &lt;td&gt;234&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;30.6&lt;/td&gt;
      &lt;td&gt;51.2&lt;/td&gt;
      &lt;td&gt;20.0&lt;/td&gt;
      &lt;td&gt;639&lt;/td&gt;
      &lt;td&gt;34.2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;58.4&lt;/td&gt;
      &lt;td&gt;98.8&lt;/td&gt;
      &lt;td&gt;38.3&lt;/td&gt;
      &lt;td&gt;1136&lt;/td&gt;
      &lt;td&gt;62.9&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;115&lt;/td&gt;
      &lt;td&gt;194&lt;/td&gt;
      &lt;td&gt;75.4&lt;/td&gt;
      &lt;td&gt;2067&lt;/td&gt;
      &lt;td&gt;118&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;225&lt;/td&gt;
      &lt;td&gt;381&lt;/td&gt;
      &lt;td&gt;148&lt;/td&gt;
      &lt;td&gt;4056&lt;/td&gt;
      &lt;td&gt;230&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;å…¶ä»–ç»“æœ-1&quot;&gt;å…¶ä»–ç»“æœ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3 (batch size 32)&lt;/th&gt;
      &lt;th&gt;ResNet-50 (batch size 32)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;29.3&lt;/td&gt;
      &lt;td&gt;49.5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;95.4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;109&lt;/td&gt;
      &lt;td&gt;183&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;216&lt;/td&gt;
      &lt;td&gt;362&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3 (batch size 32)&lt;/th&gt;
      &lt;th&gt;ResNet-50 (batch size 32)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;29.5&lt;/td&gt;
      &lt;td&gt;49.3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;55.4&lt;/td&gt;
      &lt;td&gt;95.3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;110&lt;/td&gt;
      &lt;td&gt;186&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;216&lt;/td&gt;
      &lt;td&gt;359&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;amazon-ec2-nvidia-tesla-k80-çš„ç»†èŠ‚&quot;&gt;Amazon EC2 (NVIDIAÂ® TeslaÂ® K80) çš„ç»†èŠ‚&lt;/h2&gt;

&lt;h3 id=&quot;ç¯å¢ƒé…ç½®-2&quot;&gt;ç¯å¢ƒé…ç½®&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Instance type&lt;/strong&gt;: p2.8xlarge&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GPU:&lt;/strong&gt; 8x NVIDIAÂ® TeslaÂ® K80&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OS:&lt;/strong&gt; Ubuntu 16.04 LTS&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;CUDA / cuDNN:&lt;/strong&gt; 8.0 / 5.1&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;TensorFlow GitHub hash:&lt;/strong&gt; b1e174e&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Benchmark GitHub hash:&lt;/strong&gt; 9165a70&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Build Command:&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;bazel build -c opt --copt=-march=&quot;haswell&quot; --config=cuda
//tensorflow/tools/pip_package:build_pip_package&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Disk:&lt;/strong&gt; 1TB Amazon EFS (burst 100 MiB/sec for 12 hours, continuous 50
MiB/sec)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DataSet:&lt;/strong&gt; ImageNet&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Test Date:&lt;/strong&gt; May 2017&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å‹çš„æ‰¹å¤„ç†å¤§å°å’Œä¼˜åŒ–å™¨å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚é™¤äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ‰¹å¤„ç†å¤§å°ï¼ŒInceptionV3 å’Œ ResNet-50 ä¹Ÿç”¨æ‰¹å¤„ç†å¤§å°ä¸º 32 è¿›è¡Œæµ‹è¯•ã€‚è¿™äº›ç»“æœåœ¨ &lt;em&gt;å…¶ä»–ç»“æœ&lt;/em&gt; ç« èŠ‚ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Options&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Batch size per GPU&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;512&lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Optimizer&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç”¨äºæ¯ä¸ªæ¨¡å‹çš„é…ç½®ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Model&lt;/th&gt;
      &lt;th&gt;variable_update&lt;/th&gt;
      &lt;th&gt;local_parameter_device&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;InceptionV3&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;cpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet-50&lt;/td&gt;
      &lt;td&gt;replicated (without NCCL)&lt;/td&gt;
      &lt;td&gt;gpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet-152&lt;/td&gt;
      &lt;td&gt;replicated (without NCCL)&lt;/td&gt;
      &lt;td&gt;gpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;AlexNet&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;gpu&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;VGG16&lt;/td&gt;
      &lt;td&gt;parameter_server&lt;/td&gt;
      &lt;td&gt;gpu&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ç»“æœ-2&quot;&gt;ç»“æœ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_aws_synth_k80_single_server_scaling.png&quot; /&gt;
  &lt;img style=&quot;width:35%&quot; src=&quot;https://www.tensorflow.org/images/perf_aws_real_k80_single_server_scaling.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;30.8&lt;/td&gt;
      &lt;td&gt;51.5&lt;/td&gt;
      &lt;td&gt;19.7&lt;/td&gt;
      &lt;td&gt;684&lt;/td&gt;
      &lt;td&gt;36.3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;58.7&lt;/td&gt;
      &lt;td&gt;98.0&lt;/td&gt;
      &lt;td&gt;37.6&lt;/td&gt;
      &lt;td&gt;1244&lt;/td&gt;
      &lt;td&gt;69.4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;117&lt;/td&gt;
      &lt;td&gt;195&lt;/td&gt;
      &lt;td&gt;74.9&lt;/td&gt;
      &lt;td&gt;2479&lt;/td&gt;
      &lt;td&gt;141&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;230&lt;/td&gt;
      &lt;td&gt;384&lt;/td&gt;
      &lt;td&gt;149&lt;/td&gt;
      &lt;td&gt;4853&lt;/td&gt;
      &lt;td&gt;260&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
      &lt;th&gt;AlexNet&lt;/th&gt;
      &lt;th&gt;VGG16&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;30.5&lt;/td&gt;
      &lt;td&gt;51.3&lt;/td&gt;
      &lt;td&gt;19.7&lt;/td&gt;
      &lt;td&gt;674&lt;/td&gt;
      &lt;td&gt;36.3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;59.0&lt;/td&gt;
      &lt;td&gt;94.9&lt;/td&gt;
      &lt;td&gt;38.2&lt;/td&gt;
      &lt;td&gt;1227&lt;/td&gt;
      &lt;td&gt;67.5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;118&lt;/td&gt;
      &lt;td&gt;188&lt;/td&gt;
      &lt;td&gt;75.2&lt;/td&gt;
      &lt;td&gt;2201&lt;/td&gt;
      &lt;td&gt;136&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;228&lt;/td&gt;
      &lt;td&gt;373&lt;/td&gt;
      &lt;td&gt;149&lt;/td&gt;
      &lt;td&gt;N/A&lt;/td&gt;
      &lt;td&gt;242&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç”±äºæˆ‘ä»¬çš„ EFS æ²¡æœ‰æä¾›è¶³å¤Ÿçš„ååé‡ï¼Œä¸Šé¢çš„å›¾è¡¨ä¸­æˆ‘ä»¬æ’å‡ºäº†ä½¿ç”¨ 8 ä¸ª GPU æ¥è®­ç»ƒ AlexNet æ¨¡å‹çš„ç»Ÿè®¡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–ç»“æœ-2&quot;&gt;å…¶ä»–ç»“æœ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3 (batch size 32)&lt;/th&gt;
      &lt;th&gt;ResNet-50 (batch size 32)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;29.9&lt;/td&gt;
      &lt;td&gt;49.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;57.5&lt;/td&gt;
      &lt;td&gt;94.1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;114&lt;/td&gt;
      &lt;td&gt;184&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;216&lt;/td&gt;
      &lt;td&gt;355&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒçœŸå®æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3 (batch size 32)&lt;/th&gt;
      &lt;th&gt;ResNet-50 (batch size 32)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;30.0&lt;/td&gt;
      &lt;td&gt;49.1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;57.5&lt;/td&gt;
      &lt;td&gt;95.1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;113&lt;/td&gt;
      &lt;td&gt;185&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;212&lt;/td&gt;
      &lt;td&gt;353&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;amazon-ec2-distributed-nvidia-tesla-k80-çš„ç»†èŠ‚&quot;&gt;Amazon EC2 Distributed (NVIDIAÂ® TeslaÂ® K80) çš„ç»†èŠ‚&lt;/h2&gt;

&lt;h3 id=&quot;ç¯å¢ƒé…ç½®-3&quot;&gt;ç¯å¢ƒé…ç½®&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Instance type&lt;/strong&gt;: p2.8xlarge&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GPU:&lt;/strong&gt; 8x NVIDIAÂ® TeslaÂ® K80&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OS:&lt;/strong&gt; Ubuntu 16.04 LTS&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;CUDA / cuDNN:&lt;/strong&gt; 8.0 / 5.1&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;TensorFlow GitHub hash:&lt;/strong&gt; b1e174e&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Benchmark GitHub hash:&lt;/strong&gt; 9165a70&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Build Command:&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;bazel build -c opt --copt=-march=&quot;haswell&quot; --config=cuda
//tensorflow/tools/pip_package:build_pip_package&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Disk:&lt;/strong&gt; 1.0 TB EFS (burst 100 MB/sec for 12 hours, continuous 50 MB/sec)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DataSet:&lt;/strong&gt; ImageNet&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Test Date:&lt;/strong&gt; May 2017&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å‹çš„æ‰¹å¤„ç†å¤§å°å’Œä¼˜åŒ–å™¨å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚é™¤äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ‰¹å¤„ç†å¤§å°ï¼ŒInceptionV3 å’Œ ResNet-50 ä¹Ÿç”¨æ‰¹å¤„ç†å¤§å°ä¸º 32 è¿›è¡Œæµ‹è¯•ã€‚è¿™äº›ç»“æœåœ¨ &lt;em&gt;å…¶ä»–ç»“æœ&lt;/em&gt; ç« èŠ‚ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Options&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Batch size per GPU&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Optimizer&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
      &lt;td&gt;sgd&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç”¨äºæ¯ä¸ªæ¨¡å‹çš„é…ç½®ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Model&lt;/th&gt;
      &lt;th&gt;variable_update&lt;/th&gt;
      &lt;th&gt;local_parameter_device&lt;/th&gt;
      &lt;th&gt;cross_replica_sync&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;InceptionV3&lt;/td&gt;
      &lt;td&gt;distributed_replicated&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet-50&lt;/td&gt;
      &lt;td&gt;distributed_replicated&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ResNet-152&lt;/td&gt;
      &lt;td&gt;distributed_replicated&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä¸ºäº†ç®€åŒ–æœåŠ¡å™¨è®¾ç½®ï¼ŒEC2 å®ä¾‹ï¼ˆp2.8xlargeï¼‰è¿è¡Œäº† worker æœåŠ¡å™¨å’Œ parameter æœåŠ¡å™¨ã€‚ç›¸åŒæ•°é‡çš„ worker æœåŠ¡å™¨å’Œ parameter æœåŠ¡å™¨ä½¿ç”¨äº†ä¸‹è¿°çš„é…ç½®ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;InceptionV3: 8 instances / 6 parameter servers&lt;/li&gt;
  &lt;li&gt;ResNet-50: (batch size 32) 8 instances / 4 parameter servers&lt;/li&gt;
  &lt;li&gt;ResNet-152: 8 instances / 4 parameter servers&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ç»“æœ-3&quot;&gt;ç»“æœ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:80%&quot; src=&quot;https://www.tensorflow.org/images/perf_summary_k80_aws_distributed.png&quot; /&gt;
&lt;/div&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:70%&quot; src=&quot;https://www.tensorflow.org/images/perf_aws_synth_k80_distributed_scaling.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3&lt;/th&gt;
      &lt;th&gt;ResNet-50&lt;/th&gt;
      &lt;th&gt;ResNet-152&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;29.7&lt;/td&gt;
      &lt;td&gt;52.4&lt;/td&gt;
      &lt;td&gt;19.4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;229&lt;/td&gt;
      &lt;td&gt;378&lt;/td&gt;
      &lt;td&gt;146&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;459&lt;/td&gt;
      &lt;td&gt;751&lt;/td&gt;
      &lt;td&gt;291&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;902&lt;/td&gt;
      &lt;td&gt;1388&lt;/td&gt;
      &lt;td&gt;565&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;1783&lt;/td&gt;
      &lt;td&gt;2744&lt;/td&gt;
      &lt;td&gt;981&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;å…¶ä»–ç»“æœ-3&quot;&gt;å…¶ä»–ç»“æœ&lt;/h3&gt;

&lt;div style=&quot;width:95%; margin:auto; margin-bottom:10px; margin-top:20px;&quot;&gt;
  &lt;img style=&quot;width:50%&quot; src=&quot;https://www.tensorflow.org/images/perf_aws_synth_k80_multi_server_batch32.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è®­ç»ƒåˆæˆæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;GPUs&lt;/th&gt;
      &lt;th&gt;InceptionV3 (batch size 32)&lt;/th&gt;
      &lt;th&gt;ResNet-50 (batch size 32)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;29.2&lt;/td&gt;
      &lt;td&gt;48.4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;219&lt;/td&gt;
      &lt;td&gt;333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;427&lt;/td&gt;
      &lt;td&gt;667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;820&lt;/td&gt;
      &lt;td&gt;1180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;64&lt;/td&gt;
      &lt;td&gt;1608&lt;/td&gt;
      &lt;td&gt;2315&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;æ–¹æ³•&quot;&gt;æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;ä¸Šè¿°ç»“æœæ˜¯ä½¿ç”¨è¯¥ &lt;a href=&quot;https://github.com/tensorflow/benchmarks/tree/master/scripts/tf_cnn_benchmarks&quot;&gt;è„šæœ¬&lt;/a&gt; è¿è¡Œåœ¨å„ç§å¹³å°ä¸Šè€Œç”Ÿæˆã€‚&lt;a href=&quot;https://www.tensorflow.org/performance/performance_models&quot;&gt;ã€ŠHigh-Performance Modelsã€‹&lt;/a&gt; æ–‡ç« è¯¦ç»†æè¿°äº†è„šæœ¬ä¸­çš„æŠ€æœ¯ï¼Œä»¥åŠå¦‚ä½•æ‰§è¡Œè„šæœ¬çš„ç¤ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†åˆ›å»ºå°½å¯èƒ½é‡å¤çš„ç»“æœï¼Œæ¯ä¸ªæµ‹è¯•è¿è¡Œ 5 æ¬¡ï¼Œç„¶åå–å¹³å‡å€¼ã€‚åœ¨ç»™å®šçš„å¹³å°ä¸Šï¼ŒGPU æ˜¯åœ¨é»˜è®¤çŠ¶æ€ä¸‹è¿è¡Œçš„ã€‚å¯¹äº NVIDIAÂ® TeslaÂ® K80 æ¥è¯´è¿™æ„å‘³ç€ä¸ä½¿ç”¨ &lt;a href=&quot;https://devblogs.nvidia.com/parallelforall/increase-performance-gpu-boost-k80-autoboost/&quot;&gt;GPU
Boost&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºæ¯ä¸ªæµ‹è¯•ï¼Œéœ€è¦å®Œæˆ 10 æ¬¡é¢„çƒ­ï¼Œç„¶åå†å¹³å‡å®Œæˆ 100 æ¬¡æµ‹è¯•ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://www.tensorflow.org/performance/benchmarks&quot;&gt;https://www.tensorflow.org/performance/benchmarks&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;è¯‘æ–‡å‡ºè‡ªï¼š&lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;è¯‘è€…ï¼š&lt;a href=&quot;https://github.com/charsdavy&quot;&gt;charsdavy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;æ ¡å¯¹è€…ï¼š&lt;a href=&quot;https://github.com/joyking7&quot;&gt;joyking7&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt; æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º &lt;a href=&quot;https://juejin.im&quot;&gt;æ˜é‡‘&lt;/a&gt; ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– &lt;a href=&quot;https://github.com/xitu/gold-miner#android&quot;&gt;Android&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#ios&quot;&gt;iOS&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#å‰ç«¯&quot;&gt;å‰ç«¯&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#åç«¯&quot;&gt;åç«¯&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#åŒºå—é“¾&quot;&gt;åŒºå—é“¾&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#äº§å“&quot;&gt;äº§å“&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#è®¾è®¡&quot;&gt;è®¾è®¡&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½&quot;&gt;äººå·¥æ™ºèƒ½&lt;/a&gt;ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ &lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt;ã€&lt;a href=&quot;http://weibo.com/juejinfanyi&quot;&gt;å®˜æ–¹å¾®åš&lt;/a&gt;ã€&lt;a href=&quot;https://zhuanlan.zhihu.com/juejinfanyi&quot;&gt;çŸ¥ä¹ä¸“æ &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Chars</name></author><category term="ml" /><category term="tensorflow" /><category term="æ€§èƒ½" /><category term="æœºå™¨å­¦ä¹ " /><summary type="html">TensorFlow ç¤¾åŒºåˆ›å»ºäº†ä¸€ç³»åˆ—ç”¨äºå¤šå¹³å°æµ‹è¯•çš„å›¾åƒåˆ†ç±»æ¨¡å‹å‚è€ƒç‚¹ã€‚åœ¨ æ–¹æ³• ç« èŠ‚ä¸­ä¼šè¯¦ç»†è¯´æ˜å¦‚ä½•æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶ç»™å‡ºä½¿ç”¨çš„è„šæœ¬é“¾æ¥ã€‚</summary></entry><entry><title type="html">ä¸ªäººä½œå“</title><link href="http://localhost:4000/blog/personal-projects/" rel="alternate" type="text/html" title="ä¸ªäººä½œå“" /><published>2018-02-02T00:00:00+08:00</published><updated>2018-02-02T00:00:00+08:00</updated><id>http://localhost:4000/blog/personal-projects</id><content type="html" xml:base="http://localhost:4000/blog/personal-projects/">&lt;p&gt;å¶å°”å†™å†™è‡ªå·±çš„å°åº”ç”¨ï¼Œä¸»è¦æœ‰ &lt;a href=&quot;http://itunes.apple.com/cn/app/id1177823334&quot;&gt;é“æ‰‹è‰º&lt;/a&gt;ã€&lt;a href=&quot;https://itunes.apple.com/cn/app/id1188174656&quot;&gt;Piclip&lt;/a&gt;ã€&lt;a href=&quot;https://itunes.apple.com/cn/app/id1176787145&quot;&gt;ä»Šæ—¥è´¦å•&lt;/a&gt; ç­‰ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;æ—¥æœ¬è¯­ç¤¾åŒº&quot;&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1184113889&quot;&gt;æ—¥æœ¬è¯­ç¤¾åŒº&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;â€”â€”â€”â€” è¯­è¨€æ˜¯ç”Ÿäº§åŠ›æ™‹å‡çš„é˜¶æ¢¯&lt;/p&gt;

&lt;p&gt;è¿™æ¬¾è½¯ä»¶ä¸»è¦æ”¶é›†æ—¥è¯­å­¦ä¹ èµ„æºï¼Œæ•´åˆå„ç§æ–‡æœ¬ã€éŸ³é¢‘å’Œè§†é¢‘å­¦ä¹ èµ„æ–™ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://itunes.apple.com/cn/app/id1184113889&quot;&gt;https://itunes.apple.com/cn/app/id1184113889&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/popularize_japanese.png&quot; alt=&quot;æ—¥æœ¬è¯­ç¤¾åŒº&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä»Šæ—¥è´¦å•&quot;&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1176787145&quot;&gt;ä»Šæ—¥è´¦å•&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;â€”â€”â€”â€” æ¸…æ™°ç®€æ´ã€è®°å½•æ¯ä¸€å•&lt;/p&gt;

&lt;p&gt;å¸å•è®°å½•ä¸æ•°æ®åˆ†æï¼Œå†…å«äº‘å¤‡ä»½åŠŸèƒ½ï¼Œç•Œé¢ç®€æ´æ¸…çˆ½ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://itunes.apple.com/cn/app/id1176787145&quot;&gt;https://itunes.apple.com/cn/app/id1176787145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/popularize_ibill.png&quot; alt=&quot;ä»Šæ—¥è´¦å•&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;piclip&quot;&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/id1188174656&quot;&gt;Piclip&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;â€”â€”â€”â€” åˆ‡å›¾åˆ†äº«ã€ä¸ä¸€æ ·çš„é£æ ¼&lt;/p&gt;

&lt;p&gt;å³å…´æƒ³èµ·çš„ä¸€æ¬¾ä¹å®«æ ¼åˆ‡å›¾è½¯ä»¶ï¼Œå½“ç„¶è¿˜æœ‰å…­ã€å››ç­‰å®«æ ¼å¸ƒå±€ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://itunes.apple.com/cn/app/id1188174656&quot;&gt;https://itunes.apple.com/cn/app/id1188174656&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/popularize_piclip.png&quot; alt=&quot;Piclip&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;é“æ‰‹è‰º&quot;&gt;&lt;a href=&quot;http://itunes.apple.com/cn/app/id1177823334&quot;&gt;é“æ‰‹è‰º&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;â€”â€”â€”â€” å¥åº·ç¾é£Ÿã€å¿«ä¹ç”Ÿæ´»&lt;/p&gt;

&lt;p&gt;ã€é“æ‰‹è‰ºã€‘é‡Œé¢æœ‰ç¾å®¹å¥èº«ã€ç–¾ç—…è°ƒç†ã€èŠ‚æ°”ä¹ ä¿—ã€é€‚å®œäººç¾¤ã€å°åƒã€å¤–å›½ç¾é£Ÿç­‰äºŒåäºŒå¤§åˆ†ç±»ï¼Œæ€»å…±å…­åå¤šä¸‡æ¡èœè°±é…æ–¹ï¼Œå…¨æ–¹ä½æ»¡è¶³æˆ‘ä»¬çš„åƒè´§éœ€æ±‚ã€‚é¢å¯¹è¿™ä¹ˆå¤šçš„èœè°±æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆä¾¿æ·çš„æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„èœè°±ï¼Œåªéœ€è¦æˆ‘ä»¬ç®€å•çš„æœç´¢æˆ‘ä»¬æƒ³è¦çš„èœè°±æˆ–è€…é£Ÿæï¼Œå°±èƒ½æ‰¾åˆ°æ»¡æ„çš„ç­”æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œæ ¹æ®æˆ‘ä»¬çš„å–œå¥½å£å‘³ï¼Œæ¨èçƒ­é—¨çˆ†æ¬¾èœè°±ã€çƒ­ç‚¹å…´è¶£èœè°±ï¼Œå¸®åŠ©æˆ‘ä»¬å‘ç°ä¸ä¸€æ ·çš„ç¾é£Ÿä¸–ç•Œï¼ŒæŒ–æ˜æˆ‘ä»¬å†…å¿ƒæ½œåœ¨çš„åƒè´§å±æ€§ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°æ¯å¤©æœ€å—æ¬¢è¿çš„èœè°±åˆ†ç±»ï¼Œå¯ä»¥æ¸…æ¥šæŒæ¡åœ¨ç¾é£Ÿçš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬çš„å°ä¼™ä¼´éƒ½å–œæ¬¢åƒäº›ä»€ä¹ˆï¼Œå¦‚æœæ„¿æ„ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å’Œå¤§å®¶é è¿‘ï¼Œå°è¯•ä¸ä¸€æ ·çš„å£å‘³èœç³»ã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºä¸€ä¸ªçœŸæ­£çš„åƒè´§ï¼Œæ˜¯ä¸€å®šèƒ½å¤Ÿè‡ªå·±æ»¡è¶³è‡ªå·±çš„ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¹Ÿèƒ½å°†æˆ‘ä»¬å–œæ¬¢çš„èœè°±â€œæ”¶è—â€èµ·æ¥ï¼Œä¹Ÿèƒ½æ¨èåˆ†äº«ç»™ä»–äººã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è¾¹çœ‹è¾¹åšï¼Œèœè°±é‡Œçš„åšæ³•æ­¥éª¤æä¾›èƒ½â€œæœ—è¯»â€åŠŸèƒ½ï¼Œå®Œç¾é‡Šæ”¾æˆ‘ä»¬çš„åŒæ‰‹ï¼Œå¯ä»¥è¾¹å¬è¾¹åšï¼ŒçœŸçš„ä¸è¦å¤ªç¾å¥½å•¦ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;http://itunes.apple.com/cn/app/id1177823334&quot;&gt;http://itunes.apple.com/cn/app/id1177823334&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/popularize_ihealth.png&quot; alt=&quot;é“æ‰‹è‰º&quot; /&gt;&lt;/p&gt;</content><author><name>Chars</name></author><category term="project" /><category term="project" /><summary type="html">å¶å°”å†™å†™è‡ªå·±çš„å°åº”ç”¨ï¼Œä¸»è¦æœ‰ é“æ‰‹è‰ºã€Piclipã€ä»Šæ—¥è´¦å• ç­‰ã€‚</summary></entry><entry><title type="html">æ•°æ®é“¾è·¯å±‚ä¹‹ LLDP</title><link href="http://localhost:4000/blog/data-link-layer-lldp/" rel="alternate" type="text/html" title="æ•°æ®é“¾è·¯å±‚ä¹‹ LLDP" /><published>2018-01-29T00:00:00+08:00</published><updated>2018-01-29T00:00:00+08:00</updated><id>http://localhost:4000/blog/data-link-layer-lldp</id><content type="html" xml:base="http://localhost:4000/blog/data-link-layer-lldp/">&lt;p&gt;éšç€ç½‘ç»œæŠ€æœ¯çš„å‘å±•ï¼Œæ¥å…¥ç½‘ç»œçš„è®¾å¤‡çš„ç§ç±»è¶Šæ¥è¶Šå¤šï¼Œé…ç½®è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¥è‡ªä¸åŒè®¾å¤‡å‚å•†çš„è®¾å¤‡ä¹Ÿå¾€å¾€ä¼šå¢åŠ è‡ªå·±ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œè¿™å°±å¯¼è‡´åœ¨ä¸€ä¸ªç½‘ç»œä¸­å¾€å¾€ä¼šæœ‰å¾ˆå¤šå…·æœ‰ä¸åŒç‰¹æ€§çš„ã€æ¥è‡ªä¸åŒå‚å•†çš„è®¾å¤‡ï¼Œä¸ºäº†æ–¹ä¾¿å¯¹è¿™æ ·çš„ç½‘ç»œè¿›è¡Œç®¡ç†ï¼Œå°±éœ€è¦ä½¿å¾—ä¸åŒå‚å•†çš„è®¾å¤‡èƒ½å¤Ÿåœ¨ç½‘ç»œä¸­ç›¸äº’å‘ç°å¹¶äº¤äº’å„è‡ªçš„ç³»ç»ŸåŠé…ç½®ä¿¡æ¯ã€‚Â &lt;/p&gt;

&lt;p&gt;LLDPï¼ˆLink Layer Discovery Protocolï¼Œé“¾è·¯å±‚å‘ç°åè®®ï¼‰å°±æ˜¯ç”¨äºè¿™ä¸ªç›®çš„çš„åè®®ã€‚LLDP å®šä¹‰åœ¨ 802.1ab ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒå±‚åè®®ï¼Œå®ƒæä¾›äº†ä¸€ç§æ ‡å‡†çš„é“¾è·¯å±‚å‘ç°æ–¹å¼ã€‚LLDP åè®®ä½¿å¾—æ¥å…¥ç½‘ç»œçš„ä¸€å°è®¾å¤‡å¯ä»¥å°†å…¶ä¸»è¦çš„&lt;strong&gt;èƒ½åŠ›ï¼Œç®¡ç†åœ°å€ï¼Œè®¾å¤‡æ ‡è¯†ï¼Œæ¥å£æ ‡è¯†&lt;/strong&gt;ç­‰ä¿¡æ¯å‘é€ç»™æ¥å…¥åŒä¸€ä¸ªå±€åŸŸç½‘ç»œçš„å…¶å®ƒè®¾å¤‡ã€‚å½“ä¸€ä¸ªè®¾å¤‡ä»ç½‘ç»œä¸­æ¥æ”¶åˆ°å…¶å®ƒè®¾å¤‡çš„è¿™äº›ä¿¡æ¯æ—¶ï¼Œå®ƒå°±å°†è¿™äº›ä¿¡æ¯ä»¥MIBçš„å½¢å¼å­˜å‚¨èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;è¿™äº› MIB ä¿¡æ¯å¯ç”¨äºå‘ç°è®¾å¤‡çš„ç‰©ç†æ‹“æ‰‘ç»“æ„ä»¥åŠç®¡ç†é…ç½®ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ LLDP ä»…ä»…è¢«è®¾è®¡ç”¨äºè¿›è¡Œä¿¡æ¯é€šå‘Šï¼Œå®ƒè¢«ç”¨äºé€šå‘Šä¸€ä¸ªè®¾å¤‡çš„ä¿¡æ¯å¹¶å¯ä»¥è·å¾—å…¶å®ƒè®¾å¤‡çš„ä¿¡æ¯ï¼Œè¿›è€Œå¾—åˆ°ç›¸å…³çš„ MIB ä¿¡æ¯ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªé…ç½®ã€æ§åˆ¶åè®®ï¼Œæ— æ³•é€šè¿‡è¯¥åè®®å¯¹è¿œç«¯è®¾å¤‡è¿›è¡Œé…ç½®ï¼Œ&lt;strong&gt;å®ƒåªæ˜¯æä¾›äº†å…³äºç½‘ç»œæ‹“æ‰‘ä»¥åŠç®¡ç†é…ç½®çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥è¢«ç”¨äºç®¡ç†ã€é…ç½®çš„ç›®çš„ï¼Œå¦‚ä½•ç”¨å–å†³äºä¿¡æ¯çš„ä½¿ç”¨è€…ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;ç»“æ„&quot;&gt;ç»“æ„&lt;/h2&gt;

&lt;p&gt;LLDP çš„æ¡†æ¶ç»“æ„å¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-struct.png&quot; alt=&quot;LLDP ç»“æ„å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤å›¾ä¹Ÿè¡¨æ˜ LLDP å°±æ˜¯ä¸€ä¸ªä¿¡æ¯å‘ç°ä¸é€šå‘Šåè®®ï¼ŒLLDP çš„å®ä½“ä¸»è¦ç»´æŠ¤äº†ä¸¤ä¸ª MIB åº“ï¼Œä¸€ä¸ª local system MIBï¼Œä¸€ä¸ª remote system MIBã€‚ä»å…¶åå­—ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªç”¨äºç»´æŠ¤æœ¬åœ°ç›¸å…³çš„è®¾å¤‡ MIB ä¿¡æ¯ï¼Œä¸€ä¸ªç”¨äºç»´æŠ¤è¿œç«¯è®¾å¤‡ MIB ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;LLDP é€šè¿‡ä¸ä¸Šå›¾ä¸­å³ä¾§çš„å‡ ä¸ª MIB åº“äº¤äº’æ¥åˆå§‹åŒ–å¹¶ç»´æŠ¤ local system MIBï¼Œå¹¶å°†æœ¬åœ°çš„ç›¸å…³ä¿¡æ¯é€šå‘Šå‡ºå»ï¼›åŒæ—¶å½“æ¥æ”¶åˆ°æ¥è‡ªå…¶å®ƒè®¾å¤‡çš„ä¿¡æ¯æ—¶å°±å°†å…¶æ›´æ–°åˆ°remote system MIB ä¸­ã€‚é€šè¿‡è¿™ç§å·¥ä½œæ–¹å¼ï¼Œä¸€ä¸ªè®¾å¤‡å°±å¯ä»¥å°†è‡ªå·±çš„ä¿¡æ¯é€šå‘Šå‡ºå»å¹¶è·å¾—ç½‘ç»œä¸­å…¶å®ƒè®¾å¤‡çš„ç›¸å…³ä¿¡æ¯ï¼Œæœ€ç»ˆè·å¾—ååº”ç½‘ç»œæ‹“æ‰‘ä»¥åŠå…¶å®ƒé…ç½®ä¿¡æ¯çš„ä¸¤ä¸ª MIB åº“ã€‚è¿™ä¸¤ä¸ªåº“å¯ä»¥è¢«å…¶ç”¨æˆ·ç”¨æ¥å®Œæˆå„ç§åŠŸèƒ½ã€‚éœ€è¦è¯´æ˜çš„æ˜¯&lt;strong&gt;LLDP ä¿¡æ¯çš„é€šå‘Šä»¥åŠæ¥æ”¶å¤„ç†ä¸å—ç«¯å£çš„STPçŠ¶æ€çš„å½±å“ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h2&gt;

&lt;h3 id=&quot;å¸§æ ¼å¼&quot;&gt;å¸§æ ¼å¼&lt;/h3&gt;

&lt;p&gt;å°è£…æœ‰ LLDPDU çš„æŠ¥æ–‡ç§°ä¸º LLDP å¸§ï¼Œå…¶å°è£…æ ¼å¼æœ‰ä¸¤ç§ï¼šEthernet II å’Œ SNAPï¼ˆSubnetwork Access Protocolï¼Œå­ç½‘è®¿é—®åè®®ï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ethernet-ii-æ ¼å¼å°è£…çš„-lldp-å¸§&quot;&gt;Ethernet II æ ¼å¼å°è£…çš„ LLDP å¸§&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-ethernet-ii-frame.png&quot; alt=&quot;Ethernet II æ ¼å¼å°è£…çš„ LLDP å¸§&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾æ˜¯ä»¥ Ethernet II æ ¼å¼å°è£…çš„ LLDP å¸§ï¼Œå…¶ä¸­å„å­—æ®µçš„å«ä¹‰å¦‚ä¸‹ï¼šÂ &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;DAï¼šç›®çš„ MAC åœ°å€ï¼Œä¸ºå›ºå®šçš„ç»„æ’­ MAC åœ°å€ 0x0180-C200-000Eã€‚Â &lt;/li&gt;
  &lt;li&gt;SAï¼šæº MAC åœ°å€ï¼Œä¸ºç«¯å£ MAC åœ°å€æˆ–è®¾å¤‡ MAC åœ°å€ï¼ˆå¦‚æœ‰ç«¯å£åœ°å€åˆ™ç”¨ç«¯å£ MAC åœ°å€ï¼Œå¦åˆ™ç”¨è®¾å¤‡ MAC åœ°å€ï¼‰ã€‚Â æŒ‡ä¸è®¾å¤‡ç›¸é‚»è¿æ¥è®¾å¤‡çš„æ¡¥ MACã€‚&lt;/li&gt;
  &lt;li&gt;LLDP Ethertypeï¼šå¸§ç±»å‹ï¼Œä¸º 0x88CCã€‚Â &lt;/li&gt;
  &lt;li&gt;LLDPDUï¼šLLDP Data Unitï¼ŒLLDP æ•°æ®å•å…ƒï¼Œå®ƒæ˜¯ LLDP ä¿¡æ¯äº¤æ¢çš„ä¸»ä½“ã€‚&lt;/li&gt;
  &lt;li&gt;FCSï¼šå¸§æ£€éªŒåºåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;snap-æ ¼å¼å°è£…çš„-lldp-å¸§&quot;&gt;SNAP æ ¼å¼å°è£…çš„ LLDP å¸§&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-snap-frame.png&quot; alt=&quot;SNAP æ ¼å¼å°è£…çš„ LLDP å¸§&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾æ˜¯ä»¥ SNAP æ ¼å¼å°è£…çš„ LLDP å¸§ï¼Œå…¶ä¸­å„å­—æ®µçš„å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;DAï¼šç›®çš„ MAC åœ°å€ï¼Œä¸ºå›ºå®šçš„ç»„æ’­ MAC åœ°å€ 01-80-C2-00-00-0Eã€‚Â &lt;/li&gt;
  &lt;li&gt;SAï¼šæº MAC åœ°å€ï¼Œä¸ºç«¯å£ MAC åœ°å€æˆ–è®¾å¤‡ MAC åœ°å€ï¼ˆå¦‚æœ‰ç«¯å£åœ°å€åˆ™ç”¨ç«¯å£ MAC åœ°å€ï¼Œå¦åˆ™ç”¨è®¾å¤‡ MAC åœ°å€ï¼‰ã€‚Â &lt;/li&gt;
  &lt;li&gt;Typeï¼šå¸§ç±»å‹ï¼Œä¸º 0xAAAA-0300-0000-88CCã€‚Â &lt;/li&gt;
  &lt;li&gt;Dataï¼šæ•°æ®ï¼Œä¸º LLDPDUã€‚Â &lt;/li&gt;
  &lt;li&gt;FCSï¼šå¸§æ£€éªŒåºåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ç›®çš„åœ°å€&quot;&gt;ç›®çš„åœ°å€&lt;/h4&gt;

&lt;p&gt;ç›®çš„åœ°å€å®é™…ä¸ŠåŒ…æ‹¬ä¸‰ä¸ªï¼Œåˆ†åˆ«ä¸º 01-80-C2-00-00-0Eï¼Œ01-80-C2-00-00-03ï¼Œ01-80-C2-00-00-00ã€‚è¿™ä¸‰ä¸ªåœ°å€åˆ†åˆ«ç”¨äºä¸åŒçš„ç›®çš„ï¼Œå®ƒä»¬å¯ä»¥è·¨è¶Šä¸åŒçš„ç½‘ç»œã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;01-80-C2-00-00-0Eï¼Œä¹Ÿè¢«ç§°ä¸º Nearest Bridge ç»„åœ°å€ï¼šæ— è®ºæ˜¯ Two-Port MAC RelayÂ (TPMR)ç»„ä»¶ã€S-VLAN ç»„ä»¶ã€C-VLAN ç»„ä»¶ï¼Œè¿˜æ˜¯ 802.1D ç½‘æ¡¥éƒ½ä¸èƒ½è½¬å‘ç›®çš„ä¸ºè¯¥åœ°å€çš„å¸§ã€‚ç®€å•çš„è¯´ä»»ä½•ç±»å‹çš„ç½‘æ¡¥éƒ½ä¸èƒ½è½¬å‘ç›®çš„ä¸ºè¯¥åœ°å€çš„å¸§ï¼Œç›®çš„ä¸ºè¯¥åœ°å€çš„å¸§è¢«é™åˆ¶åœ¨è¿æ¥ä¸¤ä¸ªç½‘æ¡¥æ¥å£çš„è¿æ¥ä¸Šä¼ è¾“ã€‚&lt;/li&gt;
  &lt;li&gt;01-80-C2-00-00-03ï¼Œä¹Ÿè¢«ç§°ä¸º Nearest non-TPMR Bridge ç»„åœ°å€ï¼šå¯¹äºç›®çš„åœ°å€ä¸ºè¯¥åœ°å€çš„å¸§ï¼ŒTwo-Port MAC RelayÂ (TPMR)ç»„ä»¶å°†æˆä¸ºä¸€ä¸ªä¸­ç»§å™¨ï¼Œå³ä¸æ¥æ”¶å®ƒã€‚è€Œ S-VLANï¼ˆService Provider VLANï¼‰ç»„ä»¶ï¼ŒC-VLANï¼ˆCustomer VLANï¼‰ç»„ä»¶ï¼Œä»¥åŠ 802.1D ç½‘æ¡¥éƒ½ä¸èƒ½è½¬å‘å®ƒï¼Œè€Œæ˜¯éœ€è¦è¿›è¡Œæ¥æ”¶å¹¶å¤„ç†ã€‚å› æ­¤ç›®çš„åœ°å€ä¸ºè¯¥åœ°å€çš„å¸§å°†è·¨è¶Š TPMRã€‚&lt;/li&gt;
  &lt;li&gt;01-80-C2-00-00-00ï¼Œä¹Ÿè¢«ç§°ä¸º Nearest Customer Bridge ç»„åœ°å€ï¼šå¯¹äºç›®çš„åœ°å€ä¸ºè¯¥åœ°å€çš„å¸§ï¼ŒTwo-Port MAC RelayÂ (TPMR)ç»„ä»¶ä»¥åŠ S-VLAN ç»„ä»¶å°†æˆä¸ºä¸­ç»§å™¨ï¼Œå³ä¸æ¥æ”¶å®ƒã€‚è€Œ C-VLAN ç»„ä»¶ï¼Œä»¥åŠ 802.1D ç½‘æ¡¥éƒ½ä¸èƒ½è½¬å‘å®ƒï¼Œè€Œæ˜¯éœ€è¦è¿›è¡Œæ¥æ”¶å¹¶å¤„ç†ã€‚å› æ­¤ç›®çš„åœ°å€ä¸ºè¯¥åœ°å€çš„å¸§å°†è·¨è¶Š TPMR ä»¥åŠ S-VLANã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tpmr-ä»‹ç»&quot;&gt;TPMR ä»‹ç»&lt;/h3&gt;

&lt;p&gt;TPMR ä»¥åŠ S-VLANï¼ŒC-VLAN éƒ½æ˜¯ 802.1Q ä¸­çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬è¿™ä¸‰è€…çš„ç½‘ç»œä»¥åŠå„ä¸ªåœ°å€çš„ä½œç”¨èŒƒå›´å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-mac-addr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-group-mac-addr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-diff-os-mac-addr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;C-VLANï¼šCustomer VLANï¼Œæ˜¯ç”¨æˆ·ç½‘ç»œå†…éƒ¨ä½¿ç”¨çš„ VLANï¼›&lt;/li&gt;
  &lt;li&gt;S-VLANï¼šService VLANï¼ŒæœåŠ¡æä¾›å•†ç½‘ç»œä¸­ä½¿ç”¨çš„ VLANï¼Œè¯¥ VLAN æ ‡è¯† VPN ç”¨æˆ·æˆ–è€…æ˜¯ç”¨æˆ·çš„ä¸šåŠ¡ï¼›&lt;/li&gt;
  &lt;li&gt;Customer Bridge: Customer ç½‘ç»œä¸­çš„ Bridgeï¼Œåªèƒ½è¯†åˆ« C-VLANï¼›&lt;/li&gt;
  &lt;li&gt;Provider Bridgeï¼šæœåŠ¡æä¾›å•†ç½‘ç»œä¸­çš„ Bridgeï¼Œæ ¹æ®å¤„ç†å†…å®¹çš„ä¸åŒåˆåˆ†ä¸ºS-VLAN Bridge å’Œ Provider Edge Bridgeã€‚å…¶ä¸­ S-VLAN Bridge åªèƒ½è¯†åˆ« S-VLANï¼›Â Provider Edge Bridge å¯ä»¥åŒæ—¶è¯†åˆ« C-VLAN å’Œ S-VLANï¼›&lt;/li&gt;
  &lt;li&gt;C-VLAN Componentï¼šåœ¨ Bridge å†…å¯è¯†åˆ«ã€æ’å…¥ã€åˆ é™¤ C-VLAN çš„å®ä½“ï¼Œæ¯ä¸ªç«¯å£ä¸€ä¸ªï¼Œå¯¹ C-VLAN çš„æ“ä½œäº’ç›¸ç‹¬ç«‹ï¼ˆä¸¤ä¸ªç«¯å£ä¸Šæ¥æ”¶åˆ°ç›¸åŒçš„ C-VLANï¼Œä½†ç”±äºå±äºä¸åŒçš„å®¢æˆ·æœ€åçš„å¤„ç†ç»“æœä¼šä¸åŒï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;S-VLAN Componentï¼šåœ¨ Bridge å†…å¯è¯†åˆ«ã€æ’å…¥ã€åˆ é™¤ S-VLAN çš„å®ä½“ï¼Œç”±äºåœ¨ä¸€ä¸ª Bridge å†…ä¸å­˜åœ¨ç›¸åŒçš„ S-VLAN å±äºä¸åŒæœåŠ¡æä¾›å•†çš„æƒ…å†µï¼Œå› æ­¤åœ¨ä¸€ä¸ªæ¡¥å†…åªæœ‰ä¸€ä¸ª S-VLAN çš„å®ä½“ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;qinq-ä»‹ç»&quot;&gt;QinQ ä»‹ç»&lt;/h3&gt;

&lt;p&gt;QinQ çš„ç†è®ºåŸºç¡€ï¼Œæ˜¯ IEEE å®šä¹‰çš„ 802.1adã€‚åœ¨è¿™ä¸ªè§„èŒƒé‡Œé¢ï¼ŒIEEE æå‡ºäº†ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒè®¤ä¸ºæ±‡èšå’Œæ¥å…¥å±‚é‚£é‡Œæœ‰è¿™ä¹ˆä¸¤ç§è®¾å¤‡ï¼šS-VLAN Bridge å’Œ Provider Edge Bridgeï¼Œå†å¾€ä¸‹å°±æ˜¯ Customer System äº†ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œè¯´ System è€Œä¸æ˜¯ Bridgeï¼Œæ˜¯å› ä¸º Customer æ¥è¿›æ¥çš„æœªå¿…æ˜¯äºŒå±‚è®¾å¤‡ï¼Œå¯èƒ½ä¹Ÿæ˜¯ä¸‰å±‚è®¾å¤‡ï¼‰ã€‚VLAN ç©ºé—´ä¹Ÿè¢«åˆ†æˆä¸¤ä¸ª VLAN ç©ºé—´ï¼Œå³ S-VLAN å’Œ C-VLANï¼ŒS å³ Service Providerï¼ŒC å³ Customerã€‚åœ¨ S-VLAN Bridge ä¸Šï¼Œåªæœ‰ S-VLAN ç©ºé—´ï¼Œè€Œåœ¨ Provider Edge Bridge ä¸Šï¼Œåˆ™æ—¢æœ‰ S-VLAN ç©ºé—´ï¼Œåˆæœ‰ C-VLAN ç©ºé—´ã€‚ç›¸åº”çš„ï¼Œè¿™ä¸ª Bridge å°±è¢«ä»é€»è¾‘ä¸Šåˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ”¯æŒ S-VLAN åŠŸèƒ½çš„éƒ¨åˆ†ç§°ä¹‹ä¸º S-VLAN Componentï¼Œæ”¯æŒ C-VLAN åŠŸèƒ½çš„éƒ¨åˆ†ç§°ä¹‹ä¸º C-VLAN Componentã€‚S-VLAN Bridge åªåŒ…å« S-VLAN Componentã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†ä¸¤ç§ Bridge çš„æ¦‚å¿µï¼Œ802.1ad è¿˜æå‡ºäº†ä¸‰ç§ Service ç±»å‹å’Œå››ç§ Port ç±»å‹ï¼Œå…¶ä¸­ä¸€ç§ Port æ˜¯å†…éƒ¨ Portï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ï¼Œå…¶å®ƒä¸‰ç§ Port åˆ†åˆ«å¯¹åº”äº†ä¸‰ç§ä¸åŒçš„ Serviceï¼Œå³è¿è¥å•†å¯ä»¥é€šè¿‡åœ¨äº¤æ¢æœºä¸Šé…ç½®ä¸‰ç§ä¸åŒçš„ Port ç±»å‹ï¼Œæ¥ç›¸åº”çš„ä¸ºç”¨æˆ·æä¾›ä¸‰ç§ä¸åŒç±»å‹çš„ Serviceã€‚ä¸‰ç§ Service åˆ†åˆ«æ˜¯ Port Based Serviceï¼ŒC-Tag Based Service å’Œ S-Tag Based Serviceã€‚å››ç§Port åˆ†åˆ«æ˜¯ Customer Network Port ï¼ˆCNï¼‰ï¼Œ Customer Edge Portï¼ˆCEï¼‰ï¼ŒProvider Network Portï¼ˆPNï¼‰ï¼ŒProvider Edge Portï¼ˆå†…éƒ¨ Portï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€è°“ Port Based Serviceï¼Œå°±æ˜¯è¯´æŸä¸ª Service æ˜¯åŸºäº Port çš„ï¼Œä»è¯¥ Port è¿›æ¥çš„æ‰€æœ‰æŠ¥æ–‡ï¼Œéƒ½è¢«è®¤ä¸ºæ˜¯å±äºæŸä¸€ä¸ªç‰¹å®šçš„ Customer çš„ï¼Œä¸ç®¡å®ƒæ˜¯å¦å¸¦ C-Tagï¼Œå¸¦äº†ä»€ä¹ˆæ ·çš„ C-Tagï¼Œè¿™äº›ä¿¡æ¯ç»Ÿç»Ÿè¢«å¿½è§†ã€‚æ‰€æœ‰ä»è¿™ä¸ª Port è¿›æ¥çš„æŠ¥æ–‡è¢«èµ‹äºˆä¸€ä¸ª S-VLANï¼Œè¯¥ S-VLAN è¢«ç”¨æ¥æ ‡è¯†è¯¥ Customerï¼Œæˆ–è¯´è¯¥ Serviceã€‚æä¾›è¿™ç§ Service çš„ Port å°±æ˜¯CN Portã€‚CN Port çš„å®è´¨å°±æ˜¯è¿è¥å•†ä¸ºä¸€ä¸ª Customer æä¾›ä¸€ä¸ªä¸“é—¨çš„ Portï¼Œä¸è·Ÿåˆ«çš„ Customer å…±äº«ã€‚æ³¨æ„ï¼Œä»è¿™ä¸ª Port ä¸Šè¿›æ¥çš„æŠ¥æ–‡ä¸èƒ½å¸¦ S-Tagï¼Œå¦åˆ™ä¼šè¢«ä¸¢å¼ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äº S-Tag è€Œè¨€ï¼Œè¿™ä¸ª Port æ˜¯ Access Portï¼Œè€Œä¸æ˜¯ Trunk Portã€‚è¿™æ˜¯è·Ÿåé¢çš„ S-Tag Based service æœ¬è´¨çš„ä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-port-based-pbn.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€è°“çš„ S-Tag Based Serviceï¼Œå°±æ˜¯è¯´ä»ä¸€ä¸ª Port ä¸Šè¿›æ¥çš„æŠ¥æ–‡ï¼Œæ ¹æ® S-VLAN æ¥æŠŠå®ƒä»¬åˆ’åˆ†åˆ°ä¸åŒçš„ Customerï¼Œæ¢å¥è¯è¯´ï¼Œæ˜¯ç”¨ S-VLAN æ¥æ ‡è®° Customerã€‚æä¾›è¿™ç§ Service çš„ Port ä¹Ÿæ˜¯ CN Portï¼Œåªä¸è¿‡è¿™ä¸ªæ—¶å€™çš„ CN Portï¼Œå¿…é¡»é…ç½®æˆ Trunk Portï¼Œåªè¯†åˆ« S-VLANï¼Œæ ¹æ® S-VLAN æ¥æ ‡è¯† Customerï¼Œè½¬å‘æŠ¥æ–‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-port-based-pbn-struct.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€è°“çš„ C-Tag Based Serviceï¼Œå°±æ˜¯æŒ‡æŠ¥æ–‡æºå¸¦ C-Tag è¿›å…¥ Portï¼Œåœ¨è¯¥ Port ä¸ŠåŸºäº C-VLAN æ¥æ ‡è¯† Customerï¼Œä¸€ä¸ª Port ä¸Šå¯ä»¥æ”¯æŒå¤šä¸ª Customerã€‚ç”¨æ¥æ”¯æŒ C-Tag Based Service çš„ Port å°±æ˜¯ CE Portï¼ŒCE Port æ˜¯ C-VLAN Component çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äº C-VLAN è€Œè¨€ï¼ŒCE Port æ˜¯ Trunk Portã€‚å®ƒä¸è¯†åˆ« S-Tagã€‚&lt;/p&gt;

&lt;p&gt;PN Port æ˜¯ S-VLAN Component çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒè·Ÿ CN Port å”¯ä¸€çš„ä¸åŒæ˜¯ CN Port é¢å‘ Customer Networkï¼Œè€Œå®ƒé¢å‘ Provider Networkï¼Œåœ¨å®é™…çš„äº¤æ¢æœºä¸­é€šå¸¸è¢«é…ç½®æˆ Uplink Portï¼Œè€Œä¸”é€šå¸¸éƒ½æ˜¯ VLAN Trunk Modeï¼ˆç›¸å¯¹äº Access Modeï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºä¸€ä¸ªæ‹¥æœ‰ S-VLAN Component å’Œ C-VLAN Component çš„ Provider Edge Bridge è€Œè¨€ï¼Œåœ¨åš Mac Forwarding/Learning çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;S-VLAN+MAC&lt;/code&gt;ï¼Œå¦å¤–ä¸€ç§åˆ™æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;S-VLAN+C-VLAN+MAC&lt;/code&gt;ï¼Œå‰è€…å³æ‰€è°“çš„ C-VLAN Unaware Modeï¼Œè€Œåè€…åˆ™æ˜¯ C-VLAN Aware Modeã€‚&lt;/p&gt;

&lt;p&gt;C-VLAN Aware Mode å¸¦æ¥çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå› ä¸ºå®ƒå°† VLAN ç©ºé—´ä» 4K æ‰©å±•åˆ°äº† 16Mï¼Œä½†æ˜¯å®ƒçš„é—®é¢˜åœ¨äºï¼Œå½“å‰ç»å¤§å¤šæ•°èŠ¯ç‰‡éƒ½ä¸æ”¯æŒï¼Œå°±ç®—æ”¯æŒäº†ï¼Œä¹Ÿä¸å¤ªå¯èƒ½æ”¯æŒåˆ°ç†è®ºä¸Šçš„ 16Mã€‚&lt;/p&gt;

&lt;h4 id=&quot;ä¸€ç§ç‹¬åˆ›çš„-qinq-æ¨¡å¼&quot;&gt;ä¸€ç§ç‹¬åˆ›çš„ QinQ æ¨¡å¼&lt;/h4&gt;

&lt;p&gt;ç°å®ä¸–ç•Œä¸­ç”¨æˆ·çš„éœ€æ±‚æ˜¯åƒå¥‡ç™¾æ€ªï¼Œæœ‰ä¸€ç§éœ€æ±‚ï¼Œæ˜¯å¸‚åœºä¸Šç°å­˜çš„äº¤æ¢æœºæ‰€è§£å†³ä¸äº†çš„ã€‚åœ¨è®¨è®ºè¿™ç§éœ€æ±‚ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹å½“å‰äº¤æ¢æœºçš„åšæ³•ã€‚æ— è®ºå„ä¸ªå‚å®¶çš„å®ç°å·®åˆ«æœ‰å¤šå¤§ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å¤§å®¶éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯åœ¨æ¥å…¥äº¤æ¢æœºä¸Šï¼Œé€šè¿‡ Port æˆ–è€… C-VLAN æ¥è¯†åˆ«ç”¨æˆ·ï¼Œç„¶åä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ª S-VLANï¼Œç„¶åç”¨ S-VLAN æ¥åšåç»­å¤„ç†ï¼Œå¦‚ ACL/QoS/Mac Learning/Mac Forwarding ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿è¥å•†ï¼Œç‰¹åˆ«æ˜¯æ¬§ç¾çš„ä¸€äº›è¿è¥å•†å¯èƒ½æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œä¸ºäº†æè¿°çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸ªè¿è¥å•† Aï¼Œå®ƒåœ¨ä¸ºå®ƒçš„å®¢æˆ·æä¾›æœåŠ¡çš„æ—¶å€™ï¼Œæœ‰çš„æ—¶å€™éœ€è¦ç§Ÿç”¨åˆ«çš„è¿è¥å•†ï¼Œå‡è®¾æ˜¯è¿è¥å•† B çš„ç½‘ç»œï¼Œåœ¨ç§Ÿç”¨ç½‘ç»œçš„æ—¶å€™ï¼ŒA è¿™äº› B çš„å®¢æˆ·ï¼Œè¿è¥å•† B éœ€è¦ç»™ A åˆ†é… S-VLANï¼Œè€Œä¸”å¾€å¾€æ˜¯ä¸€ä¸ª S-VLAN å¤šå°‘é’±ï¼Œå› ä¸º VLAN æ˜¯ç¨€ç¼ºèµ„æºï¼Œç‰¹åˆ«æ˜¯ç½‘ç»œæ¯”è¾ƒå¤§çš„æ—¶å€™ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœè¿è¥å•† A ä¸ºå®ƒè‡ªå·±çš„å®¢æˆ·æ¯ä¸ªéƒ½åˆ†é…ä¸€ä¸ª S-VLANï¼Œé‚£ä¹ˆç›¸åº”çš„å®ƒå°±éœ€è¦å‘ B ä¹Ÿç”³è¯·å¾ˆå¤šä¸ª S-VLANï¼Œä¸åˆ’ç®—ï¼Œè¿™ä¸ªæ—¶å€™å®ƒå°±æƒ³åœ¨è‡ªå·±çš„æ¥å…¥è®¾å¤‡ä¸Šï¼Œä¸ç”¨ S-VLAN æ¥æ ‡è¯† Customerï¼Œç»™æ‰€æœ‰çš„ Customer åˆ†é…åŒä¸€ä¸ª S-VLANï¼Œç”¨è¯¥ S-VLAN æ¥ç©¿è¶Š B çš„ç½‘ç»œï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒS-VLAN çš„æ„ä¹‰ä¸æ˜¯ä»£è¡¨ Customerï¼Œè€Œæ˜¯ä»£è¡¨ä¸€ä¸ª Tunnelã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜å…³é”®åœ¨äºï¼Œå¦‚æœä¸ç”¨ S-VLAN æ¥ä»£è¡¨ Customerï¼Œåœ¨ A çš„æ¥å…¥è®¾å¤‡ä¸Šï¼Œå¦‚ä½•æ¥å¯¹ä¸åŒçš„ Customer æ¥åšåŒºåˆ†å¤„ç†å‘¢ï¼Ÿç”¨ C-VLAN è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä¸åŒ Port ä¸Šçš„ C-VLAN ä»£è¡¨çš„ Customer å¯èƒ½æ˜¯ä¸åŒçš„ã€‚Centec çš„äº¤æ¢æœºï¼Œåœ¨èŠ¯ç‰‡å†…éƒ¨ç”¨ä¸€ä¸ªä¸åŒäº C-VLAN å’Œ S-VLAN çš„ CustomerID æ¥æ ‡è¯† Customerï¼Œç”¨è¿™ä¸ªå€¼æ¥åšåç»­çš„ä¸€ç³»åˆ— Customer çš„å¤„ç†ï¼Œéå¸¸å¼ºå¤§ã€‚&lt;/p&gt;

&lt;h4 id=&quot;qinq-çš„ä¸è¶³&quot;&gt;QinQ çš„ä¸è¶³&lt;/h4&gt;

&lt;p&gt;å°½ç®¡ QinQ è²Œä¼¼å¾ˆå¥½å¾ˆå¼ºå¤§ï¼Œå¹¶ä¸”å—åˆ°çƒ­çƒˆè¿½æ§ï¼Œä½†æ˜¯è¿™ä¸èƒ½æ©ç›–å®ƒçš„å…ˆå¤©ä¸è¶³ã€‚&lt;/p&gt;

&lt;p&gt;QinQ çš„æœ€å¤§ä¸è¶³å°±æ˜¯å®ƒæ— æ³•å¯¹è¿è¥å•†ç½‘ç»œå®Œå…¨éšè— Customer ä¿¡æ¯ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©è¿è¥å•† Core Network çš„è®¾å¤‡çœ‹ä¸åˆ° Customer VLANï¼Œä½†æ˜¯æ— æ³•è®©å®ƒä»¬çœ‹ä¸åˆ° Customer MACã€‚è€Œè¿™ä¸€ç‚¹æœ‰ä¸¤ä¸ªä¸åˆ©çš„å½±å“ï¼Œä¸€ä¸ªæ˜¯ Scalability éå¸¸å·®ï¼Œå¦‚æœä¸­é—´çš„è®¾å¤‡éƒ½æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä¼šå¯¼è‡´ MAC è¡¨éå¸¸å¤§ï¼›ç¬¬äºŒä¸ªä¸åˆ©çš„å½±å“åˆ™æ˜¯ï¼Œä¸€æ—¦ Customer ç½‘ç»œå‡ºç°äº†ç¯è·¯ï¼Œä¼šå¯¼è‡´ Provider Network é‡Œé¢çš„è®¾å¤‡ä¸æ–­è¿›è¡Œ MAC Learningï¼Œä¸‡ä¸€æœ‰ ARP ä¹‹ç±»æŠ¥æ–‡ï¼Œè¿˜å¯èƒ½å†²å‡» CPUã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœ Customer VLAN å¯¹è¿è¥å•†ç½‘ç»œä¸å¯è§ï¼Œé‚£ä¹ˆå°±èµ·ä¸åˆ°æ‰©å±• VLAN ç©ºé—´çš„ä½œç”¨ï¼Œè¿è¥å•†çš„ VLAN ç©ºé—´å°±ä»ç„¶åªæœ‰ 4Kã€‚&lt;/p&gt;

&lt;p&gt;è€Œ PBBï¼Œå³æ‰€è°“çš„ MAC-in-MAC åˆ™èƒ½å¾ˆå¥½çš„è§£å†³ QinQ çš„è¿™ä¸ªä¸è¶³ï¼Œå› ä¸º PBB ä¸ä»…åœ¨åŸæ¥çš„æŠ¥æ–‡ä¸Šæ–°å¢ä¸€ä¸ª VLANï¼Œè¿˜æ–°å¢ MACSa/MACDa ä»¥åŠ 24 ä¸ª bit çš„ Isidï¼ˆç”¨æ¥æ ‡è¯† Serviceï¼‰ï¼Œå®ƒå¯ä»¥å®Œå…¨å¯¹è¿è¥å•†çš„ Core Network è®¾å¤‡éšè— Customer ä¿¡æ¯ï¼Œä¸”èƒ½åˆ©ç”¨ Isid æ¥æ”¯æŒ 16M Customer/Serviceã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶PBBä¹Ÿæœ‰PBBçš„é—®é¢˜ï¼Œç›®å‰çœ‹ä¸åˆ°å®ƒæœ‰æˆä¸ºä¸»æµæŠ€æœ¯çš„è¶‹åŠ¿ã€‚&lt;/p&gt;

&lt;h2 id=&quot;lldpdu&quot;&gt;LLDPDU&lt;/h2&gt;

&lt;p&gt;LLDPDU æ˜¯ LLDP çš„æœ‰æ•ˆè´Ÿè½½ï¼Œç”¨äºæ‰¿è½½è¦å‘é€çš„æ¶ˆæ¯ã€‚LLDPDU çš„æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-du.png&quot; alt=&quot;LLDPDU&quot; /&gt;&lt;/p&gt;

&lt;p&gt;LLDPDU é‡‡ç”¨äº† TLV çš„æ ¼å¼ï¼Œå³ &lt;code class=&quot;highlighter-rouge&quot;&gt;type+length+value&lt;/code&gt; çš„æ ¼å¼ï¼Œtype è¡¨ç¤º TLV çš„ç±»å‹ï¼Œlength æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ TLV çš„é•¿åº¦ï¼Œvalue æ˜¯è¯¥ TLV çš„å€¼ã€‚å…¶ä¸­ Chassis ID TLVï¼ŒPort ID TLV Time To Live TLV ä»¥åŠ End Of LLDPDU TLV æ˜¯å¼ºåˆ¶çš„ï¼Œå¿…é¡»åŒ…å«çš„éƒ¨åˆ†ï¼Œé™¤æ­¤ä¹‹å¤–åœ¨ TLV Time To Live TLV å’Œ End Of LLDPDU TLV ä¹‹é—´å¯ä»¥åŒ…å« 0 ä¸ªåˆ°å¤šä¸ªå¯é€‰çš„å…¶å®ƒ TLVã€‚&lt;/p&gt;

&lt;h2 id=&quot;tlv&quot;&gt;TLV&lt;/h2&gt;

&lt;p&gt;TLV æ˜¯ç»„æˆ LLDPDU çš„å•å…ƒï¼Œæ¯ä¸ª TLV éƒ½ä»£è¡¨ä¸€ä¸ªä¿¡æ¯ã€‚LLDPDU çš„ TLV å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¢«è®¤ä¸ºæ˜¯ç½‘ç»œç®¡ç†çš„åŸºç¡€çš„ TLV é›†åˆï¼Œæ‰€æœ‰çš„ LLDP å®ç°éƒ½éœ€è¦æ”¯æŒã€‚&lt;/li&gt;
  &lt;li&gt;ç»„ç»‡å®šä¹‰çš„ TLV æ‰©å±•é›†åˆï¼ŒåŒ…æ‹¬ &lt;code class=&quot;highlighter-rouge&quot;&gt;802.1&lt;/code&gt; ç»„ç»‡å®šä¹‰ TLVã€&lt;code class=&quot;highlighter-rouge&quot;&gt;802.3&lt;/code&gt; ç»„ç»‡å®šä¹‰ TLV ä»¥åŠå…¶ä»–ç»„ç»‡å®šä¹‰çš„ TLVã€‚è¿™äº› TLV ç”¨äºå¢å¼ºå¯¹ç½‘ç»œè®¾å¤‡çš„ç®¡ç†ï¼Œå¯æ ¹æ®å®é™…éœ€è¦é€‰æ‹©æ˜¯å¦åœ¨ LLDPDU ä¸­å‘é€ã€‚Â &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;TLV çš„åŸºæœ¬æ ¼å¼å¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-format.png&quot; alt=&quot;TLVåŸºæœ¬æ ¼å¼å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;TLVçš„ç±»å‹åŸŸçš„å®šä¹‰åŠåˆ†é…å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-list.png&quot; alt=&quot;TLVç±»å‹åŸŸ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;type0-8&lt;/code&gt; å±äºåŸºæœ¬çš„ TLV é›†åˆã€‚å¯¹äºå…¶ä¸­çš„ Mandatory çš„ TLVï¼Œå®ƒæ˜¯å¿…é¡»åŒ…å«åœ¨ LLDP ä¸­çš„ã€‚â€¨ç»„ç»‡å®šä¹‰ TLV é›†åˆçš„æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-frame.png&quot; alt=&quot;TLVé›†åˆæ ¼å¼&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;OUIï¼šç»„ç»‡æœºæ„çš„ IDã€‚&lt;/li&gt;
  &lt;li&gt;organizationally defined subtypeï¼šç»„ç»‡è‡ªå®šä¹‰çš„ç±»å‹ã€‚&lt;/li&gt;
  &lt;li&gt;organizationally defined information stringï¼šä¼ è¾“çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;åŸºç¡€-tlv-é›†åˆ&quot;&gt;åŸºç¡€ TLV é›†åˆ&lt;/h2&gt;

&lt;p&gt;å‡ ä¸ªå¼ºåˆ¶çš„å¿…é¡»åŒ…å«çš„ TLV çš„å®šä¹‰å¦‚ä¸‹ã€‚éå¼ºåˆ¶çš„å¯ä»¥å‚è€ƒ IEEE802.1ABã€‚&lt;/p&gt;

&lt;h3 id=&quot;end-of-lldpdu-tlv&quot;&gt;End Of LLDPDU TLV&lt;/h3&gt;

&lt;p&gt;è¯¥ TLV ç”¨äºæ ‡è¯† LLDPDU çš„ç»“æŸã€‚å…¶æ ¼å¼å¦‚ä¸‹&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-end.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç”±äº length=0ï¼Œå› æ­¤å®ƒä¸åŒ…å« value åŸŸã€‚&lt;/p&gt;

&lt;h3 id=&quot;chassis-id-tlv&quot;&gt;Chassis ID TLV&lt;/h3&gt;

&lt;p&gt;è¯¥ TLV ç”¨äºé€šå‘Šè¯¥ LLDPDU å‘é€è€…çš„ Chassis IDã€‚ç”±äºæœ‰å¾ˆå¤šæ–¹å¼å¯ç”¨æ¥æ ‡è¯†ä¸€ä¸ª Chassisï¼Œå› æ­¤åœ¨è¯¥ç±» TLV ä¸­åŒ…å«ä¸€ä¸ªå­ç±»å‹åŸŸç”¨äºå‘Šè¯‰æ¥æ”¶è€…ï¼Œå‘é€è€…çš„ Chassis ID é‡‡ç”¨çš„æ˜¯å“ªä¸€ç§æ ‡è¯†æ–¹å¼ã€‚å…¶æ ¼å¼å¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-chassis.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ª LLDPDU å¿…é¡»åŒ…å«ä¸”ä»…åŒ…å«ä¸€ä¸ªè¯¥ç±»å‹çš„ TLVã€‚ç”±äº Chassis ID å®é™…ä¸Šæ˜¯ç”¨äºæ ‡è¯†è®¾å¤‡çš„ï¼Œå› æ­¤åœ¨è¿æ¥å¯ç”¨æ—¶å®ƒåº”è¯¥ä¿æŒä¸å˜ã€‚â€¨Chassis å­ç±»å‹æ‰€å¯èƒ½çš„å–å€¼å¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-chassis-list.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;port-id-tlv&quot;&gt;Port ID TLV&lt;/h3&gt;

&lt;p&gt;å®ƒç”¨äºæ ‡è¯†å‘é€è¯¥ LLDPDU çš„è®¾å¤‡çš„ç«¯å£ã€‚ç±»ä¼¼äº Chassis IDï¼Œæœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥æ ‡è¯†ä¸€ä¸ª Portï¼Œå› æ­¤è¯¥ TLV ä¹ŸåŒ…å«ä¸€ä¸ªå­ç±»å‹åŸŸã€‚å…¶æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-port.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ª LLDPDU å¿…é¡»åŒ…å«ä¸€ä¸ªä¸”åªèƒ½åŒ…å«ä¸€ä¸ªè¯¥ç±»å‹çš„ TLVã€‚åŒæ—¶ï¼Œå½“ç«¯å£å¯ç”¨æ—¶ï¼Œä»è¯¥ç«¯å£å‘é€å‡ºå»çš„ LLDPDU çš„è¯¥ TLV åº”è¯¥ä¿æŒä¸å˜ã€‚â€¨å…¶å­ç±»å‹çš„å¯èƒ½å–å€¼å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-port-list.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;time-to-live-tlv&quot;&gt;Time To Live TLV&lt;/h3&gt;

&lt;p&gt;è¯¥ TLV ç”¨äºå‘Šè¯‰æ¥æ”¶ç«¯ï¼Œå®ƒæ¥æ”¶åˆ°çš„è¿™äº›ä¿¡æ¯çš„æœ‰æ•ˆæœŸæœ‰å¤šé•¿ã€‚å…¶æ ¼å¼å¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-tlv-ttl.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;TTL çš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œç”±äºåªæœ‰ 2 ä¸ªå­—èŠ‚é•¿ï¼Œå› è€Œæœ€å¤§æœ‰æ•ˆæ—¶é—´æ˜¯ 65536 ç§’ã€‚å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´åˆ°æœŸäº†è¿˜æ²¡æœ‰æ–°çš„ LLDPDU è¢«æ”¶åˆ°ï¼Œåˆ™è¯¥ TLV æ‰€å±çš„é‚£ä¸ª LLDPDU æºå¸¦çš„ä¿¡æ¯ä¼šè¢«ä» MIB ä¸­åˆ é™¤ã€‚å¦‚æœæ”¶åˆ°äº†æ–°çš„ LLDPDUï¼Œåˆ™&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¦‚æœ TTL ä¸ä¸º 0ï¼Œåˆ™ä¼šç”¨æ–°æ”¶åˆ°çš„ LLDPDU çš„ä¿¡æ¯æ›¿æ¢ MIB åº“ä¸­çš„ç›¸åº”çš„ä¿¡æ¯ï¼ˆå³ä¸è¯¥ LLDPDU çš„å‘é€è€…ç›¸å…³çš„ MIB ä¿¡æ¯ï¼ŒLLDP ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; æ¥åˆ¤æ–­æ˜¯å¦æ¥è‡ªäºåŒä¸€ä¸ªæºï¼Œè¿™ä¹Ÿæ˜¯è¦æ±‚è¿™ä¸¤è€…ä¿æŒä¸å˜çš„åŸå› ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœ TTL ä¸º 0ï¼Œåˆ™åˆ é™¤ç›¸åº”çš„ MIB åº“ä¸­çš„ä¿¡æ¯ï¼ˆå³ä¸è¯¥ LLDPDU çš„å‘é€è€…ç›¸å…³çš„ MIB ä¿¡æ¯ï¼‰ã€‚å› æ­¤ TTL ä¸º 0 çš„ LLDPDU åˆè¢«ç§°ä¸ºSHUTDOWN LLDPDUã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯ä¸€ä¸ª LLDPDU å¿…é¡»åŒ…å«ä¸”åªèƒ½åŒ…å«ä¸€ä¸ªè¯¥ç±»å‹çš„ TLVã€‚&lt;/p&gt;

&lt;h2 id=&quot;å·¥ä½œæœºåˆ¶&quot;&gt;å·¥ä½œæœºåˆ¶&lt;/h2&gt;

&lt;p&gt;LLDP æ˜¯ä¸€ä¸ªç”¨äºä¿¡æ¯é€šå‘Šå’Œè·å–çš„åè®®ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒLLDP å‘é€çš„ä¿¡æ¯é€šå‘Šä¸éœ€è¦ç¡®è®¤ï¼Œä¸èƒ½å‘é€ä¸€ä¸ªè¯·æ±‚æ¥è¯·æ±‚è·å–æŸäº›ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ LLDP æ˜¯ä¸€ä¸ªå•å‘çš„åè®®ï¼Œåªæœ‰ä¸»åŠ¨é€šå‘Šä¸€ç§å·¥ä½œæ–¹å¼ï¼Œæ— éœ€ç¡®è®¤ï¼Œä¸èƒ½æŸ¥è¯¢ã€è¯·æ±‚ï¼ˆæ¯”å¦‚åƒ ARP åè®®é‚£æ ·è¯·æ±‚æŸä¸ª IP çš„ MAC åœ°å€ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;LLDP ä¸»è¦å®Œæˆå¦‚ä¸‹å·¥ä½œï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åˆå§‹åŒ–å¹¶ç»´æŠ¤æœ¬åœ° MIB åº“ä¸­çš„ä¿¡æ¯ã€‚&lt;/li&gt;
  &lt;li&gt;ä»æœ¬åœ° MIB åº“ä¸­æå–ä¿¡æ¯ï¼Œå¹¶å°†ä¿¡æ¯å°è£…åˆ° LLDP å¸§ä¸­ã€‚LLDP å¸§çš„å‘é€æœ‰ä¸¤ç§è§¦å‘æ–¹å¼ï¼Œä¸€æ˜¯å®šæ—¶å™¨åˆ°æœŸè§¦å‘ï¼Œä¸€æ˜¯è®¾å¤‡çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–è§¦å‘ã€‚&lt;/li&gt;
  &lt;li&gt;è¯†åˆ«å¹¶å¤„ç†æ¥æ”¶åˆ°çš„ LLDPDU å¸§ã€‚&lt;/li&gt;
  &lt;li&gt;ç»´æŠ¤è¿œç«¯è®¾å¤‡ LLDP MIB ä¿¡æ¯åº“ã€‚&lt;/li&gt;
  &lt;li&gt;å½“æœ¬åœ°æˆ–è¿œç«¯è®¾å¤‡ MIB ä¿¡æ¯åº“ä¸­æœ‰ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‘å‡ºé€šå‘Šäº‹ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;lldpdu-å‘é€&quot;&gt;LLDPDU å‘é€&lt;/h3&gt;

&lt;h4 id=&quot;å‘é€æœºåˆ¶&quot;&gt;å‘é€æœºåˆ¶&lt;/h4&gt;

&lt;p&gt;LLDPDU çš„å‘é€å¯ä»¥è¢«å¦‚ä¸‹äº‹ä»¶è§¦å‘ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸æœ¬åœ° MIB ä¿¡æ¯åº“ç›¸å…³è”çš„å®šæ—¶å™¨ txTTR åˆ°æœŸæ—¶ï¼Œè¿™å°†ç¡®ä¿è¿œç«¯æ¥æ”¶ç³»ç»Ÿä¸­çš„ç›¸å…³ä¿¡æ¯ä¸ä¼šå› ä¸º TTL åˆ°æœŸè€Œè¿‡æœŸã€‚&lt;/li&gt;
  &lt;li&gt;æœ¬åœ° MIB ä¿¡æ¯åº“ä¸­çš„ä¿¡æ¯å‘ç”Ÿäº†æ”¹å˜æ—¶ï¼Œä¼šç«‹å³å‘é€ LLDPDUï¼Œè¿™å°†ä¿è¯æ”¹å˜èƒ½åŠæ—¶è¢«æ›´æ–°ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœä¸€ä¸ªâ€œæ–°é‚»å±…â€è¢«è¯†åˆ«ï¼Œå°†ä¼šå¯ç”¨å¿«é€Ÿå‘é€æœºåˆ¶ï¼Œåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…è¿ç»­å‘é€æŒ‡å®šæ•°é‡ï¼ˆtxFastInitï¼Œé»˜è®¤å€¼ä¸º 4ï¼‰çš„ LLDPDUï¼Œä»¥ç¡®ä¿â€œæ–°é‚»å±…â€èƒ½è¢«å¿«é€Ÿæ›´æ–°ã€‚å¦‚æœè¿œç«¯ç³»ç»Ÿ MIB ä¿¡æ¯åº“å› ä¸ºè¿‡è½½ï¼ˆtooManyNeighborsï¼‰è€Œä¸èƒ½å®¹çº³æ–°çš„é‚»å±…ä¿¡æ¯ï¼Œåˆ™ä¼šä¸ºäº†é¿å…è¿‡å¤šçš„LLDPDU ä¼ è¾“è€ŒæŠ‘åˆ¶å¿«é€Ÿå‘é€è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;LLDP çš„å¸¸è§„å‘é€æ—¶é—´æ˜¯å»ºç«‹åœ¨ç³»ç»Ÿçš„ Tick ä¹‹ä¸Šçš„ï¼Œé—´éš”ä¸º 1 ç§’ä¸€ä¸ªï¼Œä¸ºäº†é˜²æ­¢åœ¨å…±äº«ä»‹è´¨çš„ LANï¼ˆshared media LANï¼‰ä¸­åŒæ—¶å‡ºç°å¤§é‡çš„ LLDPDUï¼ˆå› ä¸ºæ¥å…¥åŒä¸€ä¸ªLANçš„å¤šä¸ªç³»ç»Ÿçš„æ—¶é—´æ˜¯åŒæ­¥çš„ï¼Œå› è€Œå¤šä¸ªç³»ç»Ÿä¸Šçš„åŸºäº Tick çš„1ç§’å®šæ—¶å™¨å¯èƒ½åŒæ—¶åˆ°æœŸï¼‰ï¼Œå‘é€å®šæ—¶å™¨å¼•å…¥äº†ä¸€ä¸ªéšæœºçš„æŠ–åŠ¨ï¼Œè¿™å°±ä½¿å¾—å¸¸è§„çš„ LLDP å¸§çš„å‘é€é—´éš”æ—¶é—´çš„å¹³å‡å€¼ä»æ˜¯ 1 ç§’ï¼Œä½†æ˜¯å…·ä½“åˆ°æŸä¸€æ¬¡åˆ°æœŸæ—¶é—´å¯èƒ½å¹¶ä¸æ˜¯å‡†ç¡®çš„ 1 ç§’ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ—¶ä¸ºäº†é˜²æ­¢åœ¨æœ‰å¤šä¸ªç«¯å£éœ€è¦å‘é€ LLDPDU çš„ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰çš„ç«¯å£çš„å®šæ—¶å™¨éƒ½åœ¨åŒä¸€æ—¶é—´åˆ°æœŸï¼Œå› è€Œæ ‡å‡†å»ºè®®å°†é‡‡ç”¨æŸç§æœºåˆ¶å°†å¤šä¸ªå‘é€å®ä¾‹çš„å®šæ—¶å™¨åˆ°æœŸæ—¶é—´ç»™é”™å¼€ï¼Œä»¥é¿å…ä¸€ä¸ªç³»ç»Ÿåœ¨åŒä¸€æ—¶åˆ»å‘é€å¤§é‡çš„ LLDPDUã€‚&lt;/p&gt;

&lt;h4 id=&quot;å‘é€çŠ¶æ€æœº&quot;&gt;å‘é€çŠ¶æ€æœº&lt;/h4&gt;

&lt;p&gt;LLDPDU çš„å‘é€çŠ¶æ€æœºå¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-send-state-machine.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯¹äºè¯¥çŠ¶æ€æœºï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸ºäº†é˜²æ­¢è¿‡äºé¢‘ç¹çš„é‡æ–°åˆå§‹åŒ–å‘é€çŠ¶æ€æœºï¼Œåœ¨ LLDP çš„å‘é€çŠ¶æ€æœºä¸­å¼•å…¥äº†ä¸€ä¸ªå»¶æ—¶ï¼Œè¯¥å»¶æ—¶é™åˆ¶äº†åœ¨å…³é—­å‘é€çŠ¶æ€æœºåï¼Œå¿…é¡»è‡³å°‘ç­‰å¾…å¤šé•¿æ—¶é—´æ‰èƒ½é‡æ–°åˆå§‹åŒ–å‘é€çŠ¶æ€æœºã€‚&lt;/li&gt;
  &lt;li&gt;æ˜¯å¦å‘é€ SHUTDOWN LLDPDU ç”±æœ¬åœ°çš„ LLDP å·¥ä½œçŠ¶æ€å†³å®šã€‚&lt;/li&gt;
  &lt;li&gt;æ˜¯å¦å‘é€æ­£å¸¸çš„ LLDPDU ç”± txNow å’Œ txCredit å†³å®šã€‚è¿™ä¸¤ä¸ªå˜é‡éƒ½ç”±å‘é€å®šæ—¶å™¨çŠ¶æ€æœºæ›´æ–°ã€‚txNow å†³å®šæ˜¯å¦å‘é€ï¼Œè€Œ txCredit åˆ™æ˜¯ä¸€ä¸ªä¿¡ç”¨é‡ï¼Œå†³å®šäº†å¯ä»¥å‘é€çš„é‡ï¼Œå¦‚æœæ˜¯ 0 åˆ™ä¸å…è®¸å‘é€ï¼Œåªæœ‰å¤§äº 0 çš„å€¼æ‰å…è®¸å‘é€ï¼Œæ¯å‘é€ä¸€ä¸ªè¯¥å€¼å°±å‡ 1ã€‚æ›´é‡è¦çš„æ˜¯åœ¨æœ¬åœ°ä¿¡æ¯å¿«é€Ÿæ”¹å˜æ—¶ï¼ŒtxCredit æ—¢å…è®¸è¿ç»­å‘é€å¤šä¸ª LLDPDUï¼Œä½†æ˜¯åˆå¯¹å¯ä»¥è¿ç»­å‘é€çš„ LLDPDU å¸§æ•°åšäº†é™åˆ¶ï¼Œè¿™ä½¿å¾—æœ¬åœ°çŠ¶æ€çš„å¿«é€Ÿæ”¹å˜å¯ä»¥åŠæ—¶è¢«é€šå‘Šå‡ºå»ï¼Œä½†æ˜¯åˆä¸èƒ½æ— é™å‘é€å¯¼è‡´ç½‘ç»œå‡ºç°å¤§é‡ LLDPDU å¸§ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;å‘é€å®šæ—¶å™¨çŠ¶æ€æœº&quot;&gt;å‘é€å®šæ—¶å™¨çŠ¶æ€æœº&lt;/h4&gt;

&lt;p&gt;LLDP å‘é€å®šæ—¶å™¨çŠ¶æ€æœºå¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-send-timer-state-machine.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;localChange è¡¨ç¤ºæœ¬åœ°ä¿¡æ¯æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼›txTTR è¡¨ç¤ºä¸‹ä¸€æ¬¡å®šæ—¶å™¨åˆ°æœŸçš„æ—¶é—´ï¼›newNeighbor è¡¨ç¤ºæ˜¯å¦å‘ç°äº†æ–°çš„é‚»å±…ï¼Œå¹¶ç”±æ¥æ”¶çŠ¶æ€è®¾ç½®ï¼Œç”±è¯¥çŠ¶æ€æœºæ¸…é™¤ï¼›txTick è¡¨ç¤ºåŸºäºç³»ç»Ÿæ—¶é—´çš„1ç§’å®šæ—¶å™¨æ˜¯å¦åˆ°æœŸã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºè¯¥çŠ¶æ€æœºï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SIGNAL_TX ç”¨äºè§¦å‘å‘é€ï¼Œå®ƒä¼šå°† txNow è®¾ç½®ä¸ºå…è®¸å‘é€ï¼Œå¹¶è®¾ç½®æœ¬åœ°ä¿¡æ¯å‘ç”Ÿæ”¹å˜ä¸º FALSEï¼Œå¦‚æœå½“å‰ä¸æ˜¯åœ¨å¿«é€Ÿå‘é€çŠ¶æ€ï¼ˆtxFast = 0ï¼‰å°±è®¾ç½®å‘é€å®šæ—¶å™¨ä¸‹æ¬¡åˆ°æœŸæ—¶é—´ä¸º msgTxIntervalï¼ˆmsgTxIntervalé»˜è®¤ä¸º30ç§’ï¼Œå–å€¼èŒƒå›´1-3600ç§’ï¼‰ï¼Œå¦åˆ™è®¾ç½®å‘é€å®šæ—¶å™¨ä¸‹æ¬¡åˆ°æœŸæ—¶é—´ä¸º msgFastTxï¼ˆmsgFastTxé»˜è®¤å€¼ä¸º1ç§’ï¼Œå–å€¼èŒƒå›´1-3600ç§’ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœæœ¬åœ°ä¿¡æ¯å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±ç«‹å³è¿›å…¥ SIGNAL_TXã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœå®šæ—¶å™¨åˆ°æœŸï¼Œåˆ™å¦‚æœ txFast å¤§äº 0ï¼Œåˆ™å°†å…¶å‡ 1 å¹¶è¿›å…¥ SIGNAL_TXï¼Œå¦åˆ™ç›´æ¥è¿›å…¥ SIGNAL_TXã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœå‘ç°äº†æ–°é‚»å±…ï¼Œåˆ™é¦–å…ˆå°†å‘ç°æ–°é‚»å±…çš„æ ‡è¯†æ›´æ–°ä¸ºæ²¡æœ‰å‘ç°æ–°é‚»å±…ï¼Œç„¶åå¦‚æœå½“å‰å·²ç»å¤„äºå¿«é€Ÿå‘é€çŠ¶æ€å°±ç›´æ¥è¿›å…¥å‘é€å®šæ—¶å™¨åˆ°æœŸçŠ¶æ€ï¼ˆä»¥è§¦å‘ä¸€æ¬¡ç«‹å³å‘é€ï¼‰ï¼Œå¦åˆ™è®¾ç½® txFast çš„å€¼ä¸º txFastInit çš„å€¼ï¼ˆtxFastInit é»˜è®¤å€¼ä¸º 4ï¼Œå–å€¼èŒƒå›´ 1-8ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœåŸºäºç³»ç»Ÿæ—¶é—´çš„ 1 ç§’å®šæ—¶å™¨åˆ°æœŸï¼Œåˆ™ç»™ txCredit å¢åŠ ä¿¡ç”¨é‡ï¼Œå…¶æœ€å¤§å€¼ä¸º txCreditMaxï¼ŒtxCreditMax æ˜¯ä¸€ä¸ªå–å€¼åœ¨ 1 åˆ° 10 ä¹‹é—´çš„å€¼ï¼Œé»˜è®¤å€¼ä¸º 5ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™é‡Œæœ‰å–å€¼èŒƒå›´çš„å‡ ä¸ªå˜é‡éƒ½æ˜¯å¯é…ç½®çš„å˜é‡ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šè¿°ä¸¤ä¸ªçŠ¶æ€æœºçš„å·¥ä½œçŠ¶æ€å¯ä»¥çœ‹å‡ºï¼Œå‘é€å®šæ—¶å™¨çŠ¶æ€æœºç”¨äºç»´æŠ¤ä¿¡ç”¨é‡ä»¥åŠæ˜¯å¦å…è®¸å‘é€ LLDPDU å¸§ï¼Œè€Œå‘é€çŠ¶æ€æœºæ ¹æ®è¿™ä¸¤ä¸ªä¿¡æ¯æ¥å†³å®šæ˜¯å¦å‘é€ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ LLDP æ‰€ä½¿ç”¨çš„æ‰€æœ‰å®šæ—¶å™¨æ“ä½œéƒ½æ˜¯â€œåŸºäºç³»ç»Ÿæ—¶é—´çš„ 1 ç§’å®šæ—¶å™¨çš„â€ï¼Œæ¯å½“è¿™ä¸ªå®šæ—¶å™¨åˆ°æœŸæ—¶å®ƒé™¤äº†ä¼šå°† txTick è®¾ç½®ä¸º TRUE å¤–ï¼Œè¿˜ä¼šå¤„ç†å…¶å®ƒçš„å®šæ—¶åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;lldpdu-æ¥æ”¶&quot;&gt;LLDPDU æ¥æ”¶&lt;/h3&gt;

&lt;h4 id=&quot;æ¥æ”¶æœºåˆ¶&quot;&gt;æ¥æ”¶æœºåˆ¶&lt;/h4&gt;

&lt;p&gt;LLDP å¸§çš„æ¥æ”¶ç”± 3 ä¸ªé˜¶æ®µç»„æˆï¼šå¸§çš„è¯†åˆ«ã€å¸§çš„æ ¡éªŒã€LLDP è¿œç«¯ MIB ä¿¡æ¯åº“æ›´æ–°ã€‚&lt;/p&gt;

&lt;h5 id=&quot;å¸§çš„è¯†åˆ«&quot;&gt;å¸§çš„è¯†åˆ«&lt;/h5&gt;

&lt;p&gt;ç”±åœ¨ LLDP/LSAPï¼ˆé“¾è·¯æœåŠ¡è®¿é—®ç‚¹ï¼‰è¿›è¡Œï¼Œæ£€æŸ¥çš„å†…å®¹æ˜¯å¸§çš„ç›®çš„åœ°æ˜¯å¦æ˜¯ LLDP çš„ç»„æ’­ MAC åœ°å€ï¼Œå¸§çš„ç±»å‹æ˜¯å¦æ˜¯ LLDPã€‚&lt;/p&gt;

&lt;h5 id=&quot;å¸§çš„éªŒè¯&quot;&gt;å¸§çš„éªŒè¯&lt;/h5&gt;

&lt;p&gt;è¯¥è¿‡ç¨‹ä¼šé¦–å…ˆæ ¹æ® TLV çš„æ ¼å¼å®šä¹‰ä¾æ¬¡æ ¡éªŒ Chassis ID TLVï¼ŒPort ID TLVï¼Œ Time To Live TLVï¼Œå¦‚æœè¿™ä¸‰ä¸ª TLV éƒ½å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œæ‰ä¼šè¿›ä¸€æ­¥çš„è§£ç å¯é€‰çš„ TLV ç›´åˆ°é‡åˆ° End Of LLDPDU TLVï¼Œç„¶åæ ¹æ®è·å¾—çš„ä¿¡æ¯æ›´æ–°è¿œç«¯ MIB ä¿¡æ¯åº“ã€‚&lt;/p&gt;

&lt;h5 id=&quot;è¿œç«¯-mib-ä¿¡æ¯åº“æ›´æ–°&quot;&gt;è¿œç«¯ MIB ä¿¡æ¯åº“æ›´æ–°&lt;/h5&gt;

&lt;p&gt;åœ¨å‰ä¸¤æ­¥éƒ½é€šè¿‡ä¹‹åï¼ŒLLDPDU çš„æ¥æ”¶è€…å°±éœ€è¦æ ¹æ®è§£æå‡ºæ¥çš„ä¿¡æ¯æ›´æ–°è¿œç«¯ MIB ä¿¡æ¯åº“ã€‚åœ¨ MIB ä¿¡æ¯åº“ä¸­ï¼ŒLLDP ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; æ¥æ ‡è¯†ã€å­˜å‚¨æ¥è‡ªä¸åŒæºçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¦‚æœè¿œç«¯MIBåº“ä¸­å·²ç»æœ‰å¯¹åº”äºè¯¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; çš„ä¿¡æ¯ï¼Œåˆ™ä½¿ç”¨æ”¶åˆ°çš„å¸§ä¸­çš„æ–°çš„ TTL æ¥æ›´æ–° TTLã€‚å¹¶ç”¨å¯¹äºæ”¶åˆ°çš„æ–°çš„ LLDPPDU ä¸­çš„æ¯ä¸€ç§ typeï¼Œå¦‚æœæœ‰å˜åŒ–å°±è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœæŸç§ type åŸæ¥ä¸å­˜åœ¨ï¼Œåˆ™éœ€è¦å°†å…¶æ·»åŠ åˆ° MIB åº“ä¸­ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœå®ç°ä¸æ”¯æŒæŸç§ç±»å‹çš„ typeï¼Œåˆ™
    &lt;ol&gt;
      &lt;li&gt;å¦‚æœ type ä¸æ˜¯ 127ï¼Œåˆ™æŒ‰ç…§åŸºæœ¬ TLV çš„æ ¼å¼å°†å…¶å­˜å‚¨åˆ°è¿œç«¯ MIB åº“ï¼Œå­˜å‚¨æ ¼å¼ä¸º typeï¼Œlengthï¼Œvalueã€‚&lt;/li&gt;
      &lt;li&gt;å¦‚æœ type æ˜¯ 127ï¼Œåˆ™æŒ‰ç…§ç»„ç»‡å®šä¹‰ TLV çš„æ ¼å¼å°†å…¶å­˜å‚¨åˆ°è¿œç«¯ MIB åº“ï¼Œå­˜å‚¨æ ¼å¼ä¸º typeï¼Œlengthï¼Œvalueï¼ŒOUIï¼Œç»„ç»‡è‡ªå®šä¹‰å­ç±»å‹ï¼Œä»¥åŠä¿¡æ¯åŸŸã€‚&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ›´æ–°æ—¶ï¼Œå¦‚æœéœ€è¦æ·»åŠ æ–°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; çš„è¡¨é¡¹ï¼Œæˆ–è€…ä¸ºæŸä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; æ·»åŠ æ–°çš„ TLVï¼Œåˆ™å¯èƒ½é‡åˆ°æ²¡æœ‰å†…å­˜çš„é—®é¢˜ï¼Œæ ‡å‡†æ²¡æœ‰è§„å®šå¿…é¡»å¦‚ä½•å¤„ç†ï¼Œåªæ˜¯ç»™å‡ºäº†ä¸€äº›å»ºè®®ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¿½ç•¥æ–°çš„ LLDPDU çš„ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;åˆ é™¤æœ€æ—§çš„ä¿¡æ¯ä»¥é‡Šæ”¾ç©ºé—´ç»™æ–°çš„ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;éšæœºåˆ é™¤ä¸€äº›æ—§çš„ä¿¡æ¯ä»¥é‡Šæ”¾ç©ºé—´ç»™æ–°çš„ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;LLDPDU æºå¸¦çš„ TTLï¼ˆTime To Liveï¼‰å€¼ä¼šå½±å“æ¥æ”¶ç«¯çš„å¤„ç†æ–¹å¼ï¼Œå¦‚æœå®ƒä¸ä¸º 0ï¼Œåˆ™æ›´æ–°ç›¸åº”ä¿¡æ¯çš„è€åŒ–æ—¶é—´ï¼Œå¦‚æœæ¥æ”¶åˆ°çš„ LLDPDU ä¸­çš„ TTL ç­‰äº 0ï¼Œåˆ™å°†ç«‹åˆ»è€åŒ–æ‰ç›¸åº”çš„ä¿¡æ¯ï¼ˆå³ä¸è¯¥ LLDPDU çš„å‘é€è€…ç›¸å…³çš„MIBä¿¡æ¯ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Chassis ID+Port ID&lt;/code&gt; æ ‡è¯†çš„ä¿¡æ¯çš„ TTL è¶…æ—¶ï¼Œåˆ™ç›¸åº”çš„ MIB ä¿¡æ¯ä¼šè¢«åˆ é™¤ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æ¥æ”¶çŠ¶æ€æœº&quot;&gt;æ¥æ”¶çŠ¶æ€æœº&lt;/h4&gt;

&lt;p&gt;LLDPDU çš„æ¥æ”¶çŠ¶æ€æœºå¦‚å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-receive-state-machine.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;lldp-å·¥ä½œæ¨¡å¼&quot;&gt;LLDP å·¥ä½œæ¨¡å¼&lt;/h3&gt;

&lt;p&gt;LLDP å¯ä»¥å·¥ä½œåœ¨å¤šç§æ¨¡å¼ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;TxRxï¼šæ—¢å‘é€ä¹Ÿæ¥æ”¶ LLDP å¸§ã€‚&lt;/li&gt;
  &lt;li&gt;Txï¼šåªå‘é€ä¸æ¥æ”¶ LLDP å¸§ã€‚&lt;/li&gt;
  &lt;li&gt;Rxï¼šåªæ¥æ”¶ä¸å‘é€ LLDP å¸§ã€‚&lt;/li&gt;
  &lt;li&gt;Disableï¼šæ—¢ä¸å‘é€ä¹Ÿä¸æ¥æ”¶ LLDP å¸§ï¼ˆå‡†ç¡®çš„è¯´ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ª LLDP çš„çŠ¶æ€ï¼Œè¿™å¯èƒ½æ˜¯ LLDP åŠŸèƒ½è¢«å…³é—­äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯è®¾å¤‡å°±ä¸æ”¯æŒï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç”±äº LLDP å¯ä»¥å•ç‹¬å·¥ä½œåœ¨å‘é€æˆ–æ¥æ”¶æ¨¡å¼ä¸‹ï¼Œå› æ­¤ LLDP åè®®çš„å®ç°éœ€è¦æ”¯æŒå•ç‹¬åˆå§‹åŒ–å‘é€æˆ–è€…æ¥æ”¶åŠŸèƒ½ã€‚å½“å·¥ä½œæ¨¡å¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦æ ¹æ®è€çš„/æ–°çš„å·¥ä½œæ¨¡å¼æ¥å…³é—­/æ‰“å¼€å‘é€æˆ–è€…æ¥æ”¶çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-mib-block.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/data-link-layer-lldp-state-machine-symbol.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼ŒLLDP ç›¸å…³çŸ¥è¯†ç‚¹å·²ç»ä»‹ç»å®Œï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;</content><author><name>Chars</name></author><category term="web" /><category term="LLDP" /><summary type="html">éšç€ç½‘ç»œæŠ€æœ¯çš„å‘å±•ï¼Œæ¥å…¥ç½‘ç»œçš„è®¾å¤‡çš„ç§ç±»è¶Šæ¥è¶Šå¤šï¼Œé…ç½®è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¥è‡ªä¸åŒè®¾å¤‡å‚å•†çš„è®¾å¤‡ä¹Ÿå¾€å¾€ä¼šå¢åŠ è‡ªå·±ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œè¿™å°±å¯¼è‡´åœ¨ä¸€ä¸ªç½‘ç»œä¸­å¾€å¾€ä¼šæœ‰å¾ˆå¤šå…·æœ‰ä¸åŒç‰¹æ€§çš„ã€æ¥è‡ªä¸åŒå‚å•†çš„è®¾å¤‡ï¼Œä¸ºäº†æ–¹ä¾¿å¯¹è¿™æ ·çš„ç½‘ç»œè¿›è¡Œç®¡ç†ï¼Œå°±éœ€è¦ä½¿å¾—ä¸åŒå‚å•†çš„è®¾å¤‡èƒ½å¤Ÿåœ¨ç½‘ç»œä¸­ç›¸äº’å‘ç°å¹¶äº¤äº’å„è‡ªçš„ç³»ç»ŸåŠé…ç½®ä¿¡æ¯ã€‚Â </summary></entry><entry><title type="html">TensorFlow å¹¿åº¦å’Œæ·±åº¦å­¦ä¹ çš„æ•™ç¨‹</title><link href="http://localhost:4000/blog/tensorflow-wide-and-deep/" rel="alternate" type="text/html" title="TensorFlow å¹¿åº¦å’Œæ·±åº¦å­¦ä¹ çš„æ•™ç¨‹" /><published>2017-11-30T22:00:10+08:00</published><updated>2017-11-30T22:00:10+08:00</updated><id>http://localhost:4000/blog/tensorflow-wide-and-deep</id><content type="html" xml:base="http://localhost:4000/blog/tensorflow-wide-and-deep/">&lt;p&gt;åœ¨å‰æ–‡ &lt;a href=&quot;https://www.tensorflow.org/tutorials/wide&quot;&gt;ã€ŠTensorFlow Liner Model Tutorialã€‹&lt;/a&gt; ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;a href=&quot;https://archive.ics.uci.edu/ml/datasets/Census+Income&quot;&gt;äººå£æ”¶å…¥æ™®æŸ¥æ•°æ®é›†&lt;/a&gt; è®­ç»ƒäº†ä¸€ä¸ª logistic çº¿æ€§å›å½’æ¨¡å‹å»é¢„æµ‹ä¸ªäººå¹´æ”¶å…¥è¶…è¿‡ 5 ä¸‡ç¾å…ƒçš„æ¦‚ç‡ã€‚TensorFlow åœ¨è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œæ–¹é¢æ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šè€ƒè™‘è¯¥å¦‚ä½•å–èˆå®ƒçš„åŠŸèƒ½äº† â€“ å¯æ˜¯ï¼Œä¸ºä»€ä¹ˆä¸é€‰æ‹©ä¸¤è€…å…¼å¾—å‘¢ï¼Ÿé‚£ä¹ˆï¼Œæ˜¯å¦å¯ä»¥å°†ä¸¤è€…çš„ä¼˜åŠ¿ç»“åˆåœ¨ä¸€ä¸ªæ¨¡å‹ä¸­å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ TF.Learn API åŒæ—¶è®­ç»ƒä¸€ä¸ªå¹¿åº¦çº¿æ€§æ¨¡å‹å’Œä¸€ä¸ªæ·±åº¦å‰é¦ˆç¥ç»ç½‘ç»œã€‚è¿™ç§æ–¹æ³•ç»“åˆäº†è®°å¿†å’Œæ³›åŒ–çš„ä¼˜åŠ¿ã€‚å®ƒåœ¨ä¸€èˆ¬çš„å¤§è§„æ¨¡å›å½’å’Œå…·æœ‰ç¨€ç–è¾“å…¥ç‰¹æ€§çš„åˆ†ç±»é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œåˆ†ç±»ç‰¹å¾å­˜åœ¨ä¸€ä¸ªå¾ˆå¤§çš„å¯èƒ½å€¼åŸŸï¼‰ä¸Šå¾ˆæœ‰æ•ˆã€‚å¦‚æœä½ æœ‰å…´è¶£å­¦ä¹ æ›´å¤šå…³äºå¹¿åº¦å’Œæ·±åº¦å­¦ä¹ å¦‚ä½•å·¥ä½œçš„é—®é¢˜ï¼Œè¯·å‚è€ƒ &lt;a href=&quot;http://arxiv.org/abs/1606.07792&quot;&gt;ç ”ç©¶è®ºæ–‡&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.tensorflow.org/images/wide_n_deep.svg&quot; alt=&quot;Wide &amp;amp; Deep Spectrum of Models&quot; title=&quot;Wide &amp;amp; Deep&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†å¹¿åº¦æ¨¡å‹ï¼ˆå…·æœ‰ç¨€ç–ç‰¹å¾å’Œè½¬æ¢æ€§è´¨çš„ logistic å›å½’æ¨¡å‹ï¼‰ï¼Œæ·±åº¦æ¨¡å‹ï¼ˆå…·æœ‰ä¸€ä¸ªåµŒå…¥å±‚å’Œå¤šä¸ªéšè—å±‚çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼‰ï¼Œå¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ï¼ˆä¸¤è€…çš„è”åˆè®­ç»ƒï¼‰çš„åŒºåˆ«æ¯”è¾ƒã€‚åœ¨é«˜å±‚çº§é‡Œï¼Œåªéœ€è¦é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤å°±èƒ½ä½¿ç”¨ TF.Learn API é…ç½®å¹¿åº¦ï¼Œæ·±åº¦æˆ–å¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ã€‚&lt;/p&gt;

&lt;p&gt;1.é€‰æ‹©å¹¿åº¦éƒ¨åˆ†çš„ç‰¹å¾ï¼šé€‰æ‹©è¦ä½¿ç”¨çš„ç¨€ç–åŸºæœ¬åˆ—å’Œäº¤å‰åˆ—ã€‚&lt;/p&gt;

&lt;p&gt;2.é€‰æ‹©æ·±åº¦éƒ¨åˆ†çš„ç‰¹å¾ï¼šé€‰æ‹©è¿ç»­åˆ—ï¼Œæ¯ä¸ªåˆ†ç±»åˆ—çš„åµŒå…¥ç»´åº¦å’Œéšè—å±‚å¤§å°ã€‚&lt;/p&gt;

&lt;p&gt;3.å°†å®ƒä»¬ä¸€èµ·æ”¾å…¥å¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;DNNLinearCombinedClassifier&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®‰è£…&quot;&gt;å®‰è£…&lt;/h2&gt;

&lt;p&gt;å¦‚æœæƒ³è¦å°è¯•æœ¬æ•™ç¨‹ä¸­çš„ä»£ç ï¼š&lt;/p&gt;

&lt;p&gt;1.å®‰è£… TensorFlow ï¼Œ&lt;a href=&quot;/blog/tensorflow-pycharm-mac&quot;&gt;è¯·å‰å¾€æ­¤å¤„&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;2.ä¸‹è½½ &lt;a href=&quot;https://www.tensorflow.org/code/tensorflow/examples/learn/wide_n_deep_tutorial.py&quot;&gt;æ•™ç¨‹ä»£ç &lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;3.å®‰è£… pandas æ•°æ®åˆ†æåº“ã€‚å› ä¸ºæœ¬æ•™ç¨‹ä¸­éœ€è¦ä½¿ç”¨ pandas æ•°æ®ã€‚è™½ç„¶ tf.learn ä¸è¦æ±‚ pandasï¼Œä½†æ˜¯å®ƒæ”¯æŒ pandasã€‚å®‰è£… pandasï¼š&lt;/p&gt;

&lt;p&gt;a. è·å– pipï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Ubuntu/Linux 64-bit
$ sudo apt-get install python-pip python-dev

# Mac OS X
$ sudo easy_install pip
$ sudo easy_install --upgrade six
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;b. ä½¿ç”¨ pip å®‰è£… pandas&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pip install pandas
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ åœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·å‰å¾€ pandas ç½‘ç«™ä¸Šçš„ &lt;a href=&quot;http://pandas.pydata.org/pandas-docs/stable/install.html&quot;&gt;è¯´æ˜&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;p&gt;4.æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è®­ç»ƒæ•™ç¨‹ä¸­æè¿°çš„çº¿æ€§æ¨¡å‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ python wide_n_deep_tutorial.py --model_type=wide_n_deep
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¯·ç»§ç»­é˜…è¯»ï¼Œäº†è§£æ­¤ä»£ç å¦‚ä½•æ„å»ºå…¶çº¿æ€§æ¨¡å‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®šä¹‰åŸºæœ¬ç‰¹å¾åˆ—&quot;&gt;å®šä¹‰åŸºæœ¬ç‰¹å¾åˆ—&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œå®šä¹‰æˆ‘ä»¬ä½¿ç”¨çš„åŸºæœ¬åˆ†ç±»å’Œè¿ç»­ç‰¹å¾çš„åˆ—ã€‚è¿™äº›åˆ—å°†è¢«ä½œä¸ºæ¨¡å‹çš„å¹¿åº¦éƒ¨åˆ†å’Œæ·±åº¦éƒ¨åˆ†çš„æ„ä»¶å—ã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tensorflow&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tf&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_vocabulary_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Female&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Male&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;education&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_vocabulary_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;education&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Bachelors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;HS-grad&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;11th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Masters&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;9th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Some-college&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Assoc-acdm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Assoc-voc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;7th-8th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Doctorate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Prof-school&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;5th-6th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;10th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1st-4th&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Preschool&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;12th&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;marital_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_vocabulary_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;marital_status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Married-civ-spouse&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Divorced&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Married-spouse-absent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Never-married&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Separated&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Married-AF-spouse&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Widowed&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;relationship&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_vocabulary_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;relationship&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Husband&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Not-in-family&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Wife&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Own-child&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Unmarried&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Other-relative&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;workclass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_vocabulary_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;workclass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Self-emp-not-inc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Private&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;State-gov&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Federal-gov&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Local-gov&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Self-emp-inc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Without-pay&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Never-worked&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å±•ç¤ºä¸€ä¸ªå“ˆå¸Œçš„ä¾‹å­ï¼š&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;occupation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_hash_bucket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;occupation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash_bucket_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;native_country&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categorical_column_with_hash_bucket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;native_country&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash_bucket_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è¿ç»­åŸºåˆ—&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numeric_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;education_num&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numeric_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;education_num&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;capital_gain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numeric_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;capital_gain&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;capital_loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numeric_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;capital_loss&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hours_per_week&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numeric_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hours_per_week&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è½¬æ¢&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;age_buckets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bucketized_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;boundaries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;55&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;å¹¿åº¦æ¨¡å‹å…·æœ‰äº¤å‰ç‰¹å¾åˆ—çš„çº¿æ€§æ¨¡å‹&quot;&gt;å¹¿åº¦æ¨¡å‹ï¼šå…·æœ‰äº¤å‰ç‰¹å¾åˆ—çš„çº¿æ€§æ¨¡å‹&lt;/h2&gt;

&lt;p&gt;å¹¿åº¦æ¨¡å‹æ˜¯ä¸€ä¸ªå…·æœ‰ç¨€ç–å’Œäº¤å‰ç‰¹å¾åˆ—çš„çº¿æ€§æ¨¡å‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;base_columns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;native_country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;education&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;occupation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;workclass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relationship&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;age_buckets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;crossed_columns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crossed_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;education&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;occupation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash_bucket_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crossed_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age_buckets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;education&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;occupation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash_bucket_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crossed_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;native_country&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;occupation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash_bucket_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å…·æœ‰äº¤å‰ç‰¹å¾åˆ—çš„å¹¿åº¦æ¨¡å‹å¯ä»¥æœ‰æ•ˆåœ°è®°å¿†ç‰¹å¾ä¹‹é—´çš„ç¨€ç–äº¤äº’ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº¤å‰ç‰¹å¾åˆ—ä¸èƒ½æ¦‚æ‹¬æ²¡æœ‰åœ¨è®­ç»ƒæ•°æ®ä¸­å‡ºç°çš„ç‰¹å¾ç»„åˆã€‚è®©æˆ‘ä»¬é‡‡ç”¨åµŒå…¥æ–¹å¼æ¥æ·»åŠ ä¸€ä¸ªæ·±åº¦æ¨¡å‹æ¥ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ·±åº¦æ¨¡å‹åµŒå…¥å¼ç¥ç»ç½‘ç»œ&quot;&gt;æ·±åº¦æ¨¡å‹ï¼šåµŒå…¥å¼ç¥ç»ç½‘ç»œ&lt;/h2&gt;

&lt;p&gt;æ·±åº¦æ¨¡å‹æ˜¯ä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œï¼Œå¦‚å‰å›¾æ‰€ç¤ºã€‚æ¯ä¸€ä¸ªç¨€ç–ï¼Œé«˜ç»´åº¦åˆ†ç±»ç‰¹å¾é¦–å…ˆéƒ½ä¼šè¢«è½¬æ¢æˆä¸€ä¸ªä½ç»´åº¦å¯†é›†çš„å®å€¼çŸ¢é‡ï¼Œé€šå¸¸è¢«ç§°ä¸ºåµŒå…¥å¼çŸ¢é‡ã€‚è¿™äº›ä½ç»´åº¦å¯†é›†çš„åµŒå…¥å¼çŸ¢é‡ä¸è¿ç»­ç‰¹å¾ç›¸è¿ï¼Œç„¶ååœ¨æ­£å‘ä¼ é€’ä¸­é¦ˆå…¥ç¥ç»ç½‘ç»œçš„éšè—å±‚ã€‚åµŒå…¥å€¼éšæœºåˆå§‹åŒ–ï¼Œå¹¶ä¸å…¶ä»–æ¨¡å‹å‚æ•°ä¸€èµ·è®­ç»ƒï¼Œä»¥æœ€å¤§åŒ–å‡å°‘è®­ç»ƒæŸå¤±ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äºåµŒå…¥çš„çŸ¥è¯†ï¼Œè¯·åœ¨æŸ¥é˜…æ•™ç¨‹ &lt;a href=&quot;https://www.tensorflow.org/versions/r0.9/tutorials/word2vec/index.html&quot;&gt;Vector Representations of Words&lt;/a&gt; æˆ–åœ¨ Wikipedia ä¸ŠæŸ¥é˜… &lt;a href=&quot;https://en.wikipedia.org/wiki/Word_embedding&quot;&gt;Word Embedding&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;embedding_column&lt;/code&gt; é…ç½®åˆ†ç±»åµŒå…¥åˆ—ï¼Œå¹¶å°†å®ƒä»¬ä¸è¿ç»­åˆ—è¿æ¥ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;deep_columns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indicator_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;workclass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indicator_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;education&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indicator_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indicator_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;relationship&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# å±•ç¤ºä¸€ä¸ªåµŒå…¥ä¾‹å­&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;native_country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feature_column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;occupation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;education_num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;capital_gain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;capital_loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hours_per_week&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åµŒå…¥çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;dimension&lt;/code&gt; è¶Šé«˜ï¼Œè‡ªç”±åº¦å°±è¶Šé«˜ï¼Œæ¨¡å‹å°†ä¸å¾—ä¸å­¦ä¹ è¿™äº›ç‰¹æ€§çš„è¡¨ç¤ºã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬è®¾ç½®æ‰€æœ‰ç‰¹å¾åˆ—çš„ç»´åº¦ä¸º 8ã€‚ä»ç»éªŒä¸Šçœ‹ï¼Œå…³äºç»´åº¦çš„è®¾å®šæœ€å¥½æ˜¯ä» \log_{2}(n) æˆ– k\sqrt[4]{n} å€¼å¼€å§‹ï¼Œè¿™é‡Œçš„ n ä»£è¡¨ç‰¹å¾åˆ—ä¸­å”¯ä¸€ç‰¹å¾çš„æ•°é‡ï¼Œk æ˜¯ä¸€ä¸ªå¾ˆå°çš„å¸¸é‡ï¼ˆé€šå¸¸å°äº10ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡å¯†é›†åµŒå…¥ï¼Œæ·±åº¦æ¨¡å‹å¯ä»¥æ›´å¥½çš„æ¦‚æ‹¬ï¼Œå¹¶æ›´å¥½å¯¹ä¹‹å‰æ²¡æœ‰åœ¨è®­ç»ƒæ•°æ®ä¸­é‡è§çš„ç‰¹å¾è¿›è¡Œé¢„æµ‹ã€‚ç„¶è€Œï¼Œå½“ä¸¤ä¸ªç‰¹å¾åˆ—ä¹‹é—´çš„åº•å±‚äº¤äº’çŸ©é˜µæ˜¯ç¨€ç–å’Œé«˜ç­‰çº§æ—¶ï¼Œå¾ˆéš¾å­¦ä¹ ç‰¹å¾åˆ—çš„æœ‰æ•ˆä½ç»´åº¦è¡¨ç¤ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°ç‰¹å¾å¯¹ä¹‹é—´çš„äº¤äº’åº”è¯¥ä¸ºé›¶ï¼Œé™¤äº†å°‘æ•°å‡ ä¸ªï¼Œä½†å¯†é›†çš„åµŒå…¥å°†å¯¼è‡´æ‰€æœ‰ç‰¹å¾å¯¹çš„éé›¶é¢„æµ‹ï¼Œä»è€Œå¯èƒ½è¿‡åº¦æ³›åŒ–ã€‚å¦ä¸€æ–¹é¢ï¼Œå…·æœ‰äº¤å‰ç‰¹å¾çš„çº¿æ€§æ¨¡å‹å¯ä»¥ç”¨æ›´å°‘çš„æ¨¡å‹å‚æ•°æœ‰æ•ˆåœ°è®°ä½è¿™äº›â€œå¼‚å¸¸è§„åˆ™â€ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•è”åˆè®­ç»ƒå¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ï¼Œè®©å®ƒä»¬ä¼˜åŠ¿å’ŒåŠ£åŠ¿äº’è¡¥ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å°†å¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ç»“åˆä¸ºä¸€ä½“&quot;&gt;å°†å¹¿åº¦å’Œæ·±åº¦æ¨¡å‹ç»“åˆä¸ºä¸€ä½“&lt;/h2&gt;

&lt;p&gt;é€šè¿‡å°†å…¶æœ€ç»ˆè¾“å‡ºçš„å¯¹æ•°å‡ ç‡ä½œä¸ºé¢„æµ‹ç»“åˆèµ·æ¥ï¼Œç„¶åå°†é¢„æµ‹æä¾›ç»™ logistic æŸå¤±å‡½æ•°ï¼Œå°†å¹¿åº¦æ¨¡å‹å’Œæ·±åº¦æ¨¡å‹ç›¸ç»“åˆã€‚æ‰€æœ‰çš„å›¾å½¢å®šä¹‰å’Œå˜é‡åˆ†é…éƒ½å·²ç»è¢«å¤„ç†ï¼Œæ‰€ä»¥ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;DNNLinearCombinedClassifier&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tempfile&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mkdtemp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contrib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;learn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DNNLinearCombinedClassifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;linear_feature_columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wide_columns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dnn_feature_columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deep_columns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dnn_hidden_units&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;è®­ç»ƒå’Œè¯„ä¼°æ¨¡å‹&quot;&gt;è®­ç»ƒå’Œè¯„ä¼°æ¨¡å‹&lt;/h2&gt;

&lt;p&gt;åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯»äººå£æ™®æŸ¥æ•°æ®é›†ï¼Œå°±åƒåœ¨ &lt;a href=&quot;https://www.tensorflow.org/tutorials/wide&quot;&gt;ã€ŠTensorFlow Liner Model Tutorialã€‹&lt;/a&gt; ä¸­æ‰€åšçš„ä¸€æ ·ã€‚ è¾“å…¥æ•°æ®å¤„ç†çš„ä»£ç å†æ¬¡ä¸ºä½ æä¾›æ–¹ä¾¿ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pd&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ä¸ºæ•°æ®é›†å®šä¹‰åˆ—å&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CSV_COLUMNS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;workclass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;fnlwgt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;education&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;education_num&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;marital_status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;occupation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;relationship&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;race&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;capital_gain&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;capital_loss&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hours_per_week&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;native_country&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;income_bracket&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;maybe_download&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Maybe downloads training data and returns train and test file names.&quot;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_data&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NamedTemporaryFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlretrieve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;train_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# pylint: disable=line-too-long&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training data is downloaded to &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;test_file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_data&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;test_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NamedTemporaryFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlretrieve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.test&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# pylint: disable=line-too-long&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;test_file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;test_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Test data is downloaded to &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_file_name&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;input_fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_epochs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Input builder function.&quot;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;df_data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CSV_COLUMNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;skipinitialspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;python&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;skiprows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;# ç§»é™¤ NaN å…ƒç´ &lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;df_data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df_data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dropna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;how&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;any&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;income_bracket&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;gt;50K&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;estimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pandas_input_fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;num_epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_epochs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;num_threads&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;é˜…è¯»æ•°æ®ä¹‹åï¼Œä½ å¯ä»¥è®­ç»ƒå¹¶è¯„ä¼°æ¨¡å‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å°† num_epochs è®¾ç½®ä¸º Noneï¼Œä»¥è·å¾—æ— é™çš„æ•°æ®æµ&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;input_fn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_steps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# åœ¨æ‰€æœ‰æ•°æ®è¢«æ¶ˆè€—ä¹‹å‰ï¼Œä¸ºäº†è¿è¡Œè¯„ä¼°ï¼Œè®¾ç½® steps ä¸º None&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;input_fn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;model directory = &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºçš„ç¬¬ä¸€è¡Œåº”è¯¥ç±»ä¼¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;accuracy: 0.84429705&lt;/code&gt;ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨å¹¿åº¦å’Œæ·±åº¦æ¨¡å‹å°†å¹¿åº¦çº¿æ€§æ¨¡å‹ç²¾åº¦çº¦ 83.6% æé«˜åˆ°äº†çº¦ 84.4%ã€‚å¦‚æœä½ æƒ³çœ‹ç«¯å¯¹ç«¯çš„å·¥ä½œç¤ºä¾‹ï¼Œä½ å¯ä»¥ä¸‹è½½æˆ‘ä»¬çš„ &lt;a href=&quot;https://www.tensorflow.org/code/tensorflow/examples/learn/wide_n_deep_tutorial.py&quot;&gt;ç¤ºä¾‹ä»£ç &lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¯·æ³¨æ„ï¼Œæœ¬æ•™ç¨‹åªæ˜¯ä¸€ä¸ªå°å‹æ•°æ®åŸºçš„ç®€å•ç¤ºä¾‹ï¼Œä¸ºäº†è®©ä½ å¿«é€Ÿç†Ÿæ‚‰ APIã€‚å¦‚æœä½ æœ‰å¤§é‡å…·æœ‰ç¨€ç–ç‰¹å¾åˆ—å’Œå¤§é‡å¯èƒ½ç‰¹å¾å€¼çš„æ•°æ®é›†ï¼Œå¹¿åº¦å’Œæ·±åº¦å­¦ä¹ å°†ä¼šæ›´åŠ å¼ºå¤§ã€‚æ­¤å¤–ï¼Œè¯·éšæ—¶å…³æ³¨æˆ‘ä»¬çš„ &lt;a href=&quot;http://arxiv.org/abs/1606.07792&quot;&gt;ç ”ç©¶è®ºæ–‡&lt;/a&gt;ï¼Œä»¥äº†è§£æ›´å¤šå…³äºåœ¨å®é™…ä¸­å¹¿åº¦å’Œæ·±åº¦å­¦ä¹ åœ¨å¤§å‹æœºå™¨å­¦ä¹ æ–¹é¢å¦‚ä½•åº”ç”¨çš„æ€è€ƒã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://www.tensorflow.org/tutorials/wide_and_deep&quot;&gt;https://www.tensorflow.org/tutorials/wide_and_deep&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;è¯‘æ–‡å‡ºè‡ªï¼š&lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;è¯‘è€…ï¼š&lt;a href=&quot;https://github.com/charsdavy&quot;&gt;charsdavy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;æ ¡å¯¹è€…ï¼š&lt;a href=&quot;https://github.com/MRNIU&quot;&gt;MRNIU&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt; æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º &lt;a href=&quot;https://juejin.im&quot;&gt;æ˜é‡‘&lt;/a&gt; ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– &lt;a href=&quot;https://github.com/xitu/gold-miner#android&quot;&gt;Android&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#ios&quot;&gt;iOS&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#å‰ç«¯&quot;&gt;å‰ç«¯&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#åç«¯&quot;&gt;åç«¯&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#åŒºå—é“¾&quot;&gt;åŒºå—é“¾&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#äº§å“&quot;&gt;äº§å“&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#è®¾è®¡&quot;&gt;è®¾è®¡&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½&quot;&gt;äººå·¥æ™ºèƒ½&lt;/a&gt;ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ &lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;æ˜é‡‘ç¿»è¯‘è®¡åˆ’&lt;/a&gt;ã€&lt;a href=&quot;http://weibo.com/juejinfanyi&quot;&gt;å®˜æ–¹å¾®åš&lt;/a&gt;ã€&lt;a href=&quot;https://zhuanlan.zhihu.com/juejinfanyi&quot;&gt;çŸ¥ä¹ä¸“æ &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Chars</name></author><category term="ml" /><category term="tensorflow" /><category term="python" /><category term="æœºå™¨å­¦ä¹ " /><summary type="html">åœ¨å‰æ–‡ ã€ŠTensorFlow Liner Model Tutorialã€‹ ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ äººå£æ”¶å…¥æ™®æŸ¥æ•°æ®é›† è®­ç»ƒäº†ä¸€ä¸ª logistic çº¿æ€§å›å½’æ¨¡å‹å»é¢„æµ‹ä¸ªäººå¹´æ”¶å…¥è¶…è¿‡ 5 ä¸‡ç¾å…ƒçš„æ¦‚ç‡ã€‚TensorFlow åœ¨è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œæ–¹é¢æ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šè€ƒè™‘è¯¥å¦‚ä½•å–èˆå®ƒçš„åŠŸèƒ½äº† â€“ å¯æ˜¯ï¼Œä¸ºä»€ä¹ˆä¸é€‰æ‹©ä¸¤è€…å…¼å¾—å‘¢ï¼Ÿé‚£ä¹ˆï¼Œæ˜¯å¦å¯ä»¥å°†ä¸¤è€…çš„ä¼˜åŠ¿ç»“åˆåœ¨ä¸€ä¸ªæ¨¡å‹ä¸­å‘¢ï¼Ÿ</summary></entry><entry><title type="html">èŠèŠ iOS æ•°æ®ä¿æŠ¤</title><link href="http://localhost:4000/blog/ios-data-protection/" rel="alternate" type="text/html" title="èŠèŠ iOS æ•°æ®ä¿æŠ¤" /><published>2017-10-17T23:18:19+08:00</published><updated>2017-10-17T23:18:19+08:00</updated><id>http://localhost:4000/blog/ios-data-protection</id><content type="html" xml:base="http://localhost:4000/blog/ios-data-protection/">&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€keychainä¸­çš„é¡¹ï¼Œéƒ½æ˜¯åŠ å¯†å­˜å‚¨çš„ã€‚å½“ç”¨æˆ·è§£é”è®¾å¤‡åï¼Œç³»ç»Ÿé€šè¿‡UDIDå¯†é’¥å’Œç”¨æˆ·è®¾å®šçš„å¯†ç ç”Ÿæˆä¸€ä¸ªç”¨äºè§£å¯†çš„å¯†ç å¯†é’¥ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°è®¾å¤‡å†æ¬¡è¢«é”ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡Data Protection API æ¥è®¾å®šæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€keychainä¸­çš„é¡¹åº”è¯¥ä½•æ—¶è¢«è§£å¯†ã€‚è¿™ä¸ªå°±æ˜¯æ•°æ®ä¿æŠ¤çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;é’¥åŒ™ä¸²keychain&quot;&gt;é’¥åŒ™ä¸²ï¼ˆkeychainï¼‰&lt;/h2&gt;

&lt;p&gt;keychainæœåŠ¡æä¾›äº†ä¸€ç§å®‰å…¨çš„ä¿å­˜ç§å¯†ä¿¡æ¯ï¼ˆå¯†ç ï¼Œåºåˆ—å·ï¼Œç§é’¥ï¼Œè¯ä¹¦ç­‰ï¼‰çš„æ–¹å¼ï¼Œæ¯ä¸ªiOSç¨‹åºéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„keychainå­˜å‚¨ã€‚ç›¸å¯¹äºNSUserDefaultsã€æ–‡ä»¶ä¿å­˜ç­‰ä¸€èˆ¬æ–¹å¼ï¼Œkeychainä¿å­˜æ›´ä¸ºå®‰å…¨ï¼Œè€Œä¸”keychainé‡Œä¿å­˜çš„ä¿¡æ¯ä¸ä¼šå› APPè¢«åˆ é™¤è€Œä¸¢å¤±ã€‚&lt;/p&gt;

&lt;p&gt;åŸºäºé’¥åŒ™ä¸²çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å¯¹äºæ–°å¢çš„æ•°æ®é¡¹ç›®ï¼Œè¦æ³¨æ„æ•°æ®åˆ é™¤çš„æ—¶æœºã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œä¿æŠ¤å±æ€§çš„æŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šä¿æŠ¤å±æ€§ï¼Œè¿™å°†è¢«è§†ä¸ºä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½œç”¨&quot;&gt;ä½œç”¨&lt;/h3&gt;

&lt;h4 id=&quot;å¤‡ä»½&quot;&gt;å¤‡ä»½&lt;/h4&gt;

&lt;p&gt;å½“æˆ‘ä»¬å¤‡ä»½è®¾å¤‡æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šå°†ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨ç›¸åº”çš„é’¥åŒ™ä¸²ä¸­ï¼Œå¹¶ä¾ç…§ç›¸åº”çš„å®‰å…¨ç­–ç•¥ä¿å­˜ã€‚ä¸»è¦åˆ†æˆä¸¤ç±»ï¼š&lt;strong&gt;åŠ å¯†&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸åŠ å¯†&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºæ¢å¤æ•°æ®æ—¶çš„èŒƒå›´ä¸åŒã€‚åŠ å¯†å¤‡ä»½çš„æ•°æ®å¯ä»¥æ¢å¤åˆ°ä»»ä½•è®¾å¤‡ä¸Šï¼ˆThisDeviceOnlyæŒ‡å®šçš„é¡¹ç›®é™¤å¤–ï¼‰ï¼Œè€Œä¸åŠ å¯†çš„å¤‡ä»½åˆ™åªèƒ½æ¢å¤è‡³åŒä¸€å°è®¾å¤‡ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å…±äº«&quot;&gt;å…±äº«&lt;/h4&gt;

&lt;p&gt;keychainæ”¯æŒåœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº«æ•°æ®ã€‚ä½†ç°å®å¼€å‘ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;UIPasteboardNameFind&lt;/code&gt;çš„ä½¿ç”¨ä»£æ›¿äº†keychainã€‚ä¸è¿‡å¥½åœ¨Appleåœ¨iOS11ä¸­å·²ç»åºŸå¼ƒå®ƒã€‚çœ‹æ¥Appleæƒ³è§„èŒƒå¼€å‘è€…å¯¹äºç”¨æˆ·æ•æ„Ÿæ•°æ®çš„å…±äº«ä½¿ç”¨ï¼ŒåŒæ—¶æé†’å¤§å®¶ä½¿ç”¨æ›´åŠ å®‰å…¨çš„æ–¹å¼å­˜å‚¨ç”¨æˆ·æ•æ„Ÿæ•°æ®ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨èŒƒä¾‹&quot;&gt;ä½¿ç”¨èŒƒä¾‹&lt;/h3&gt;

&lt;h4 id=&quot;secitemadd&quot;&gt;SecItemAdd&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSMutableDictionary *dict = [NSMutableDictionary dictionary];
NSData *passwordData = [@&quot;myPassword&quot; dataUsingEncoding:NSUTF8StringEncoding];

[dict setObject:(__bridge id)kSecClassGenericPassword forKey:(__bridge id)kSecClass];
[dict setObject:@&quot;Conglomco&quot; forKey:(__bridge id)kSecAttrLabel];
[dict setObject:@&quot;This is your password for the Conglomco service.&quot; forKey:(__bridge id)kSecAttrDescription];
[dict setObject:@&quot;chars&quot; forKey:(__bridge id)kSecAttrAccount];
[dict setObject:@&quot;cn.zaker.keychain.sample&quot; forKey:(__bridge id)kSecAttrService];
[dict setObject:passwordData forKey:(__bridge id)kSecValueData];
[dict setObject:(__bridge id)kSecAttrAccessibleWhenUnlocked forKey:(__bridge id)kSecAttrAccessible];

OSStatus error = SecItemAdd((__bridge CFDictionaryRef)dict, NULL);
if (error == errSecSuccess) {
    NSLog(@&quot;Yay&quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;secitemdelete&quot;&gt;SecItemDelete&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSMutableDictionary *dict = [NSMutableDictionary dictionary];

[dict setObject:(__bridge id)kSecClassGenericPassword forKey:(__bridge id)kSecClass];
[dict setObject:@&quot;chars&quot; forKey:(__bridge id)kSecAttrAccount];
[dict setObject:@&quot;cn.zaker.keychain.sample&quot; forKey:(__bridge id)kSecAttrService];

OSStatus error = SecItemDelete((__bridge CFDictionaryRef)dict);
if (error == errSecSuccess) {
	NSLog(@&quot;Yay&quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;secitemupdate&quot;&gt;SecItemUpdate&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSMutableDictionary *dict = [NSMutableDictionary dictionary];
NSData *newPasswordData = [@&quot;newMyPassword&quot; dataUsingEncoding:NSUTF8StringEncoding];

[dict setObject:(__bridge id)kSecClassGenericPassword forKey:(__bridge id)kSecClass];
[dict setObject:@&quot;chars&quot; forKey:(__bridge id)kSecAttrAccount];
[dict setObject:@&quot;cn.zaker.keychain.sample&quot; forKey:(__bridge id)kSecAttrService];

NSDictionary *updatedAttribute = [NSDictionary dictionaryWithObject:newPasswordData forKey:(__bridge id)kSecValueData];

OSStatus error = SecItemUpdate((__bridge CFDictionaryRef)dict, (__bridge CFDictionaryRef)updatedAttribute);
if (error == errSecSuccess) {
	NSLog(@&quot;Yay&quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;secitemcopymatching&quot;&gt;SecItemCopyMatching&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSMutableDictionary *dict = [NSMutableDictionary dictionary];

[dict setObject:(__bridge id)kSecClassGenericPassword forKey:(__bridge id)kSecClass];
[dict setObject:@&quot;chars&quot; forKey:(__bridge id)kSecAttrAccount];
[dict setObject:@&quot;cn.zaker.keychain.sample&quot; forKey:(__bridge id)kSecAttrService];
[dict setObject:(id)kCFBooleanTrue forKey:(__bridge id)kSecReturnAttributes];

NSDictionary *result = nil;
OSStatus error = SecItemCopyMatching((__bridge CFDictionaryRef)dict, (void *)&amp;amp;result);
if (error == errSecSuccess) {
	NSLog(@&quot;Yay %@&quot;, result);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;å¸¸ç”¨æ–¹æ³•&quot;&gt;å¸¸ç”¨æ–¹æ³•&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;æ–¹æ³•&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;SecItemAdd&lt;/td&gt;
      &lt;td&gt;æ·»åŠ æ•°æ®&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SecItemDelete&lt;/td&gt;
      &lt;td&gt;åˆ é™¤æ•°æ®&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SecItemUpdate&lt;/td&gt;
      &lt;td&gt;ä¿®æ”¹æ•°æ®&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SecItemCopyMatching&lt;/td&gt;
      &lt;td&gt;æŸ¥æ‰¾æ•°æ®&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ä¿æŠ¤å±æ€§&quot;&gt;ä¿æŠ¤å±æ€§&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é’¥åŒ™ä¸²ä¿æŠ¤å±æ€§&lt;/th&gt;
      &lt;th&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleAfterFirstUnlock&lt;/td&gt;
      &lt;td&gt;å¼€æœºä¹‹åå¯†é’¥ä¸å¯ç”¨ï¼Œç›´åˆ°ç”¨æˆ·é¦–æ¬¡è¾“å…¥å¯†ç &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleAlways&lt;/td&gt;
      &lt;td&gt;å¯†é’¥åœ¨è®¾å¤‡å¼€æœºåä¾æ—§å¯ç”¨ã€‚åœ¨iOS9ä¸­å·²ç»åºŸå¼ƒ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleAlwaysThisDeviceOnly&lt;/td&gt;
      &lt;td&gt;å¯†é’¥å§‹ç»ˆå¯ç”¨ï¼Œä½†æ— æ³•è¿ç§»åˆ°å…¶ä»–è®¾å¤‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleAfterFirstUnlockThisDeviceOnly&lt;/td&gt;
      &lt;td&gt;ä½œç”¨åŒä¸Š&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleWhenUnlocked&lt;/td&gt;
      &lt;td&gt;åªè¦è§£é”è¿‡è®¾å¤‡ï¼Œåˆ™å¯†é’¥ä¿æŒå¯ç”¨çŠ¶æ€&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleWhenUnlockedThisDeviceOnly&lt;/td&gt;
      &lt;td&gt;ä½œç”¨åŒä¸Š&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecAttrAccessibleWhenPasscodeSetThisDeviceOnly&lt;/td&gt;
      &lt;td&gt;ä½œç”¨åŒä¸Šï¼Œåªæœ‰ç”¨æˆ·è®¾ç½®å¯†ç å¯†é’¥æ‰å¯ç”¨&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrAccessibleAlways&lt;/code&gt; å°†ä¼šå¼•å…¥ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºæ­¤ç§ä¿æŠ¤å±æ€§ï¼Œåªè¦æœ‰äººçªƒå–äº†ä½ çš„è®¾å¤‡ï¼Œä»–ä»¬å°±èƒ½è¯»å–é’¥åŒ™ä¸²çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrAccessibleAfterFirstUnlockThisDeviceOnly&lt;/code&gt; è¿™ä¸ªå±æ€§å¯ä»¥å®Œç¾çš„è§£å†³ä¸Šè¿°çš„å®‰å…¨é—®é¢˜ã€‚å› ä¸ºè¶Šç‹±æ—¶é€šå¸¸éœ€è¦é‡å¯è®¾å¤‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrAccessibleWhenUnlocked&lt;/code&gt; è¿™ä¸ªå±æ€§è¦æ±‚æ”»å‡»è€…å¿…é¡»çŸ¥é“ç”¨æˆ·å¯†ç æ‰èƒ½æå–éšç§æ•°æ®ã€‚å®ƒå¾ˆé€‚åˆåšé»˜è®¤å±æ€§å€¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrAccessibleWhenPasscodeSetThisDeviceOnly&lt;/code&gt; æ˜¯iOS8æ–°å¢çš„ä¿æŠ¤å±æ€§ã€‚è¿™ä¸ªå±æ€§è¦æ±‚åœ¨ä½¿ç”¨æ—¶ç”¨æˆ·è®¾å®šäº†å¯†ç ï¼Œå¦åˆ™ä½¿ç”¨å°±å¤±è´¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åŸºæœ¬ç”¨æ³•&quot;&gt;åŸºæœ¬ç”¨æ³•&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é¡¹ç›®ç±»&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecClassGenericPassword&lt;/td&gt;
      &lt;td&gt;æ™®é€šå¯†ç &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecClassInternetPassword&lt;/td&gt;
      &lt;td&gt;ä¸“é—¨ç”¨äºäº’è”ç½‘æœåŠ¡çš„å¯†ç &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecClassCertificate&lt;/td&gt;
      &lt;td&gt;åŠ å¯†è¯ä¹¦&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecClassKey&lt;/td&gt;
      &lt;td&gt;åŠ å¯†å¯†é’¥&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kSecClassIdentity&lt;/td&gt;
      &lt;td&gt;ä¸€ä¸ªå¯†é’¥å¯¹ï¼ˆåŒ…æ‹¬å…¬å…±è¯ä¹¦å’Œç§é’¥ï¼‰&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;icloudåŒæ­¥&quot;&gt;iCloudåŒæ­¥&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯iOS7å¼•å…¥çš„ä¸€ç§æ–°æœºåˆ¶ï¼Œå¯ä»¥æŠŠé’¥åŒ™ä¸²é¡¹ç›®åŒæ­¥åˆ°iCloudï¼Œå…è®¸ç”¨æˆ·åœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´å…±äº«é’¥åŒ™ä¸²é¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºåˆ›å»ºçš„é’¥åŒ™ä¸²é¡¹ç›®ä¼šç¦ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œä½†å¯ä»¥æŠŠ&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrSynchronizable&lt;/code&gt;è®¾ç½®ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;æ¥å¯ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–è¯·æ³¨æ„ï¼Œä½¿ç”¨æ­¤é€‰é¡¹æ—¶æ— æ³•æŒ‡å®šä¸å…¼å®¹çš„kSecAttrAccessibleå±æ€§ã€‚ä¾‹å¦‚ï¼ŒæŒ‡å®škSecAttrAccessibleWhenUnlockedThisDeviceOnlyä¸èµ·ä½œç”¨ï¼Œå› ä¸ºThisDeviceOnlyæŒ‡å®šçš„é¡¹ç›®ä¸ä¼šå¤‡ä»½ï¼Œä¹Ÿä¸èƒ½åŒæ­¥åˆ°iCloudã€ç¬”è®°æœ¬ç”µè„‘ã€å°å¼æœºæˆ–å…¶ä»–åŒæ­¥ä½ç½®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ•°æ®ä¿æŠ¤&quot;&gt;æ•°æ®ä¿æŠ¤&lt;/h2&gt;

&lt;p&gt;Apple æ¨å‡ºäº†æ•°æ®ä¿æŠ¤APIä½œä¸ºé¢å¤–çš„ä¿æŠ¤å±‚ï¼Œå®ƒå…è®¸å¼€å‘è€…æŒ‡å®šæ–‡ä»¶è§£å¯†å¯†é’¥çš„ç”Ÿå‘½å‘¨æœŸã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªAPIæ§åˆ¶æ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œä¸é’¥åŒ™ä¸²é¡¹ç›®ä¸­çš„kSecAttrAccessible å±æ€§ç±»ä¼¼ã€‚&lt;/p&gt;

&lt;p&gt;æ•°æ®ä¿æŠ¤APIä½¿ç”¨ç”¨æˆ·å¯†ç å’Œå±‚çº§å¯†é’¥æ¥åŠ å¯†ä¿æŠ¤æ–‡ä»¶çš„å¯†é’¥ï¼Œè€Œå½“è¿™äº›æ–‡ä»¶ä¸èƒ½è¢«è®¿é—®æ—¶ï¼Œä¼šä»å†…å­˜ä¸­åˆ é™¤è¿™ä¸ªå±‚çº§å¯†é’¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ–‡ä»¶ä¿æŠ¤è¿‡ç¨‹&quot;&gt;æ–‡ä»¶ä¿æŠ¤è¿‡ç¨‹&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_2.png&quot; alt=&quot;æ–‡ä»¶ä¿æŠ¤è¿‡ç¨‹&quot; /&gt;&lt;/p&gt;

&lt;p&gt;1.æ–‡ä»¶ç”Ÿæˆä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶å¯†é’¥&lt;/code&gt;æ¥åŠ å¯†æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;2.ç”Ÿæˆä¸€ä¸ªé¢å¤–çš„å¯†é’¥å¯¹ï¼Œç”¨äºç”Ÿæˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶å…¬é’¥&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶ç§é’¥&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;3.ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶ç§é’¥&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;Protected Unless Openç­‰çº§å…¬é’¥&lt;/code&gt;è®¡ç®—å‡ºä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;å…±äº«å¯†ç &lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;4.ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;å…±äº«å¯†ç &lt;/code&gt; SHA-1æ•£åˆ—å€¼åŠ å¯†æ–‡ä»¶å¯†é’¥ã€‚&lt;/p&gt;

&lt;p&gt;5.åŠ å¯†è¿‡çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶å¯†é’¥&lt;/code&gt;ä¼šå­˜å‚¨åœ¨æ–‡ä»¶çš„å…ƒæ•°æ®ä¸­ï¼Œå…ƒæ•°æ®ä¸­è¿˜æœ‰æ–‡ä»¶çš„å…¬é’¥ã€‚&lt;/p&gt;

&lt;p&gt;6.ç³»ç»Ÿä¸¢å¼ƒ&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶ç§é’¥&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;7.å…³é—­æ–‡ä»¶æ—¶ä»å†…å­˜ä¸­åˆ é™¤æœªåŠ å¯†çš„æ–‡ä»¶å¯†é’¥ã€‚&lt;/p&gt;

&lt;p&gt;8.éœ€è¦å†æ¬¡æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;Protected Unless Openç­‰çº§ç§é’¥&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;æ–‡ä»¶å…¬é’¥&lt;/code&gt;è®¡ç®—&lt;code class=&quot;highlighter-rouge&quot;&gt;å…±äº«å¯†ç &lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;9.è®¡ç®—&lt;code class=&quot;highlighter-rouge&quot;&gt;å…±äº«å¯†ç &lt;/code&gt;çš„SHA-1æ•£åˆ—å€¼ï¼ŒæŠŠå®ƒå½“ä½œè§£å¯†æ–‡ä»¶çš„å¯†é’¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;dataprotectionclass-æƒé™&quot;&gt;DataProtectionClass æƒé™&lt;/h3&gt;

&lt;p&gt;å¦‚æœä½ çš„åº”ç”¨åœ¨è®¾å¤‡è¿›å…¥åå°æˆ–é”å®šæ—¶ä¸éœ€è¦å†™å…¥æˆ–è¯»å–æ–‡ä»¶ï¼Œé‚£ä½ å°±å¯ä»¥åœ¨å·¥ç¨‹ä¸­é…ç½®ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;NSFileProtectionComplete&lt;/code&gt;å€¼æ¥æ·»åŠ æƒé™ã€‚è¿™å°†ç¡®ä¿æ‰€æœ‰å—ä¿æŠ¤çš„æ–‡ä»¶æ•°æ®åªèƒ½åœ¨è®¾å¤‡è§£é”æ—¶è®¿é—®ï¼Œç›¸å½“äºä¸ºæ‰€æœ‰çš„åº”ç”¨æ–‡ä»¶éƒ½è®¾ç½®&lt;code class=&quot;highlighter-rouge&quot;&gt;kSecAttrAccessibleWhenUnlocked&lt;/code&gt;é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;ä»Xcode5å¼€å§‹ï¼Œæ–°å·¥ç¨‹ä¼šé»˜è®¤å¯ç”¨æ•°æ®ä¿æŠ¤æƒé™ï¼Œä½†æ˜¯ä¸€äº›æ—§å·¥ç¨‹å¹¶ä¸ä¼šè‡ªåŠ¨å¼€å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¼€å¯æ–¹å¼å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_1.png?imageView2/2/w/800&quot; alt=&quot;å¼€å¯DataProtectionClassæƒé™&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨èŒƒä¾‹-1&quot;&gt;ä½¿ç”¨èŒƒä¾‹&lt;/h3&gt;

&lt;h4 id=&quot;nsdatawritingfileprotectioncomplete&quot;&gt;NSDataWritingFileProtectionComplete&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSData *data = [self generateData];
NSError *error = nil;
NSString *path = [NSString stringWithFormat:@&quot;%@_demo.pdf&quot;, NSTemporaryDirectory()];
[data writeToFile:path options:NSDataWritingFileProtectionComplete error:&amp;amp;error];
if (error) {
	NSLog(@&quot;%@&quot;, error);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;nsfileprotectioncomplete&quot;&gt;NSFileProtectionComplete&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@&quot;demo.txt&quot;];
NSError *error = nil;
NSDictionary *attr = [NSDictionary dictionaryWithObject:NSFileProtectionComplete forKey:NSFileProtectionKey];
[[NSFileManager defaultManager] setAttributes:attr ofItemAtPath:path error:&amp;amp;error];
if (error) {
	NSLog(@&quot;%@&quot;, error);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;sqlite_open_fileprotection_completeunlessopen&quot;&gt;SQLITE_OPEN_FILEPROTECTION_COMPLETEUNLESSOPEN&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@&quot;demo.sqlite&quot;];
sqlite3 *handle = NULL;
sqlite3_open_v2([path UTF8String],
                &amp;amp;handle,
                SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_FILEPROTECTION_COMPLETEUNLESSOPEN,
                NULL);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ä¿æŠ¤ç­‰çº§&quot;&gt;ä¿æŠ¤ç­‰çº§&lt;/h3&gt;

&lt;h4 id=&quot;completeuntilfirstuserauthentication&quot;&gt;CompleteUntilFirstUserAuthentication&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªä¿æŠ¤ç­‰çº§æ˜¯iOS5å¼€å§‹ä½¿ç”¨çš„é»˜è®¤å€¼ã€‚ä¸»è¦ç”¨æ¥é˜²å¾¡ä¸€äº›éœ€è¦é‡å¯çš„æ”»å‡»ã€‚&lt;/p&gt;

&lt;h4 id=&quot;complete&quot;&gt;Complete&lt;/h4&gt;

&lt;p&gt;å®˜æ–¹ç§°è¿™æ˜¯ç›®å‰æœ€å®‰å…¨çš„æ–‡ä»¶ä¿æŠ¤ç­‰çº§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”å±ä¹‹åç³»ç»Ÿå°±ä¼šåˆ é™¤å†…å­˜ä¸­çš„å±‚çº§å¯†é’¥ï¼Œå¹¶æŠŠæ–‡ä»¶æ”¹ä¸ºä¸å¯è¯»ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“ä½¿ç”¨çš„èŒƒä¾‹å‰æ–‡å¯è§ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨Completeä¿æŠ¤ä¹‹å‰ï¼Œè€ƒè™‘æ˜¯å¦åˆé€‚ã€‚å¦‚æœä½ çš„åº”ç”¨è¿›ç¨‹éœ€è¦æŒç»­å†™/è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£è¿™ç§ä¿æŠ¤æ¨¡å¼å°±ä¸åˆé€‚äº†ã€‚&lt;/p&gt;

&lt;h4 id=&quot;completeunlessopen&quot;&gt;CompleteUnlessOpen&lt;/h4&gt;

&lt;p&gt;å¦‚æœä¸€ä¸ªæ–‡ä»¶å½“å‰è¢«ä¸€ä¸ªåº”ç”¨æ‰“å¼€ï¼Œé‚£ä¼šæš‚æ—¶ç¦ç”¨è¯¥æ–‡ä»¶çš„ä¿æŠ¤ã€‚å®ƒä¼šç¡®ä¿æ‰“å¼€çš„æ–‡ä»¶åœ¨è®¾å¤‡è¢«é”å®šæ—¶ä¾ç„¶èƒ½å¤Ÿå†™å…¥ï¼Œå¹¶ä¸”å…è®¸æ–°å»ºæ–‡ä»¶åˆ°ç£ç›˜ã€‚ä¸è¿‡è¿™ä¸ªç­‰çº§ä¿æŠ¤çš„æ–‡ä»¶åœ¨é”å±æ—¶æ— æ³•æ‰“å¼€ï¼Œé™¤éé”å±æ—¶å°±å·²ç»æå‰æ‰“å¼€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;commoncryptoåŠ å¯†&quot;&gt;CommonCryptoåŠ å¯†&lt;/h2&gt;

&lt;p&gt;CommonCryptoæ˜¯Appleå®˜æ–¹æä¾›çš„ä¸€å¥—åŠ å¯†æ¡†æ¶ã€‚åœ¨ä½¿ç”¨è¿™å¥—æ–¹æ¡ˆæ—¶ï¼Œä¸»è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªé—®é¢˜å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é¿å…å¼±ç®—æ³•&quot;&gt;é¿å…å¼±ç®—æ³•&lt;/h3&gt;

&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒDESå°±æ˜¯ä¸€ç§å¾ˆå…¸å‹çš„å¼±ç®—æ³•ã€‚å¦‚æœä½ ä½¿ç”¨å¼±ç®—æ³•ï¼Œé‚£åº”ç”¨å°±å¾ˆå®¹æ˜“é­å—å¯†ç æ”»å‡»å’Œæš´åŠ›ç ´è§£ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨AESç®—æ³•ã€MD5ç®—æ³•æˆ–MD5åŠ ç›ç®—æ³•ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç ´ç¢çš„ç†µ&quot;&gt;ç ´ç¢çš„ç†µ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;rand&lt;/code&gt;æ–¹æ³•æ¥äº§ç”Ÿéšæœºæ•°ï¼Œä½†æ˜¯ç³»ç»Ÿçš„è¿™ä¸ªéšæœºå‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£çš„éšæœºã€‚å®ƒäº§ç”Ÿçš„éšæœºæ•°ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„æ–¹æ³•&lt;code class=&quot;highlighter-rouge&quot;&gt;SecRandomCopyBytes&lt;/code&gt;è·å¾—ã€‚ä¹Ÿå¯ä»¥è‡ªå·±ä½¿ç”¨ç®—æ³•äº§ç”Ÿéšæœºæ•°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œåˆ†äº«ä¸€ä¸ªç¬”è€…ä»¥å‰è‡ªå·±å®ç°çš„éšæœºæ•°æ¡ˆä¾‹ã€‚&lt;a href=&quot;/blog/uniform-random/&quot;&gt;ã€Šå‡åŒ€åˆ†å¸ƒéšæœºå‡½æ•°çš„å®ç°ã€‹&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¼±å¯†é’¥&quot;&gt;å¼±å¯†é’¥&lt;/h3&gt;

&lt;p&gt;å¼€å‘è€…ç»å¸¸å°†ç”¨æˆ·çš„å¯†ç å½“ä½œåŠ å¯†å¯†é’¥ï¼Œå°¤å…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œè¿™å°†å¯¼è‡´ä¸€ä¸ªéå¸¸è„†å¼±ã€ä½ç†µåŠ å¯†çš„å¯†é’¥ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆæ­£ç¡®çš„å§¿åŠ¿æ˜¯ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;CCKeyDerivationPBKDF&lt;/code&gt;æ–¹æ³•æ¥ç”Ÿæˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;touch-id&quot;&gt;Touch ID&lt;/h2&gt;

&lt;h3 id=&quot;ä½¿ç”¨èŒƒä¾‹-2&quot;&gt;ä½¿ç”¨èŒƒä¾‹&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &amp;lt;LocalAuthentication/LocalAuthentication.h&amp;gt;

LAContext *context = [[LAContext alloc] init];
NSError *error = nil;
NSString *reason = @&quot;We use this to verify your identify&quot;;
if ([context canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;amp;error]) {
	[context evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics localizedReason:reason reply:^(BOOL success, NSError * _Nullable error) {
		if (success) {
			NSLog(@&quot;Hello, that's your finger!&quot;);
		} else {
			NSLog(@&quot;Couldn't read your fingerprint. Falling back to PIN or somthing.&quot;);
		}
	}];
} else {
	NSLog(@&quot;Error : %@ %@&quot;, error, [error userInfo]);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;touch-id-ä¸æ™®é€šå¯†ç ç›¸æ¯”çš„å®‰å…¨æ€§&quot;&gt;Touch ID ä¸æ™®é€šå¯†ç ç›¸æ¯”çš„å®‰å…¨æ€§&lt;/h3&gt;

&lt;p&gt;ä¸€ä¸ªäººçš„æŒ‡çº¹æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„å¯†ç ä¹‹ä¸€ã€‚å®ƒç‹¬ä¸€æ— äºŒï¼Œé«˜åº¦ç‰¹å¼‚ï¼Œå¹¶ä¸”æ— éœ€è®°å¿†ã€‚å®ƒä¼šä¼´éšäººç»ˆç”Ÿï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªæŒ‡çº¹å¯†ç ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”èµ·ç®€å•çš„4ä½æ•°å­—é”å±å¯†ç ä¸€ä¸‡åˆ†ä¹‹ä¸€çš„ç ´è§£å¯èƒ½æ€§ï¼Œèƒ½æ‰¾åˆ°åŒæ ·å•ä¸ªæŒ‡çº¹çš„äººçš„æ¦‚ç‡ä¸ºäº”ä¸‡åˆ†ä¹‹ä¸€ï¼Œè¿™æ˜¯éå¸¸å®‰å…¨çš„ï¼Œæ¯”èµ·å‰è€…æˆ‘å¯ä»¥ä¸æ–­å°è¯•ï¼ŒTouch ID æŒ‡çº¹çš„ç¡¬æ€§ç ´è§£å‡ ç‡å‡ ä¹æ²¡æœ‰ï¼Œå› ä¸ºä¸å¯èƒ½æœ‰äº”ä¸‡å¤šä¸ªäººæ’é˜Ÿæ¥ä¸€ä¸€è§£é”ä½ çš„è®¾å¤‡ï¼Œå†µä¸” Touch ID ä¼šæ‹’ç»ç¬¬äº”æ¬¡ä»¥åçš„å°è¯•è€Œè¦æ±‚è¾“å…¥å¯†ç ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ·»åŠ æ›´åŠ å¤æ‚çš„å¯†ç è€Œä¸æ˜¯ç®€å•çš„æ•°å­—å¯†ç æ¥è¿›ä¸€æ­¥æé«˜å®‰å…¨æ€§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;touch-id-æŒ‡çº¹è¯†åˆ«çš„åŸç†&quot;&gt;Touch ID æŒ‡çº¹è¯†åˆ«çš„åŸç†&lt;/h3&gt;

&lt;p&gt;åœ¨å¦‚æ­¤å¿«é€Ÿçš„è¯†åˆ«è¿‡ç¨‹ä¸­ï¼ŒHome æŒ‰é’®ä¸Šçš„ä¸€åœˆé‡‘å±ç¯èµ·åˆ°äº†æ„Ÿåº”æ‰‹æŒ‡çš„åŠŸèƒ½ï¼Œé€šçŸ¥ Touch ID æ¥è¯»å–æŒ‡çº¹ã€‚Touch ID ç½®äºè¯¥æŒ‰é’®ä¸­ï¼Œä¼ æ„Ÿå™¨çš„åšåº¦åªæœ‰ 170 å¾®ç±³ï¼Œæ‹¥æœ‰ 500 ppi é«˜åˆ†è¾¨ç‡ï¼Œå¯è¯»å–æå°çš„æŒ‡çº¹ç»†èŠ‚ã€‚ä¼ æ„Ÿå™¨å¯ä»çš®è‚¤çš®ä¸‹å±‚æŒ‡çº¹çš„ä¸€äº›å°éƒ¨åˆ†æ‹æ‘„é«˜åˆ†è¾¨ç‡å›¾åƒï¼Œç„¶åä¼šåˆ†æè¯¥ä¿¡æ¯ï¼Œæ ¹æ®ä¸‰ç§åŸºæœ¬æŒ‡çº¹ç±»å‹ï¼ˆå¼§å½¢çº¹ã€ç®•å½¢çº¹æˆ–æ–—å½¢çº¹ï¼‰å°†æŒ‡çº¹åˆ†ç±»ï¼Œå®ƒä¼šç»˜åˆ¶æ¯”äººçœ¼ä¸å¯è§çš„çº¹è·¯ç»†èŠ‚ï¼Œç¡®ä¿æŒ‡çº¹è¯»å–å‡†ç¡®æ— è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_3.png&quot; alt=&quot;touch id sensor&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Touch ID å¯ä» 360 åº¦æ–¹å‘è¯»å–æŒ‡çº¹ï¼Œéšååˆ›å»ºæŒ‡çº¹çš„æŸç§æ•°å­¦è¡¨è¾¾å¼ï¼Œå¹¶å°†å…¶ä¸å·²æ³¨å†Œçš„æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šæ˜¯å¦åŒ¹é…ã€‚å¦‚æœåŒ¹é…ï¼Œä¾¿å¯æ›¿ä»£å¯†ç æ¥è§£é”è®¾å¤‡æˆ–é€šè¿‡æŸä¸ªä»¤ç‰Œã€‚&lt;/p&gt;

&lt;p&gt;æ­¤å¤–ï¼Œæ ¹æ®è‹¹æœå®˜æ–¹çš„æè¿°ï¼ŒTouch ID ä¼šå‘ä»¥æ³¨å†Œçš„æŒ‡çº¹æ•°æ®é‡ŒæŒç»­çš„æ·»åŠ æ–°çš„ç‰¹å¾æ•°æ®ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™èƒ½ä¸æ–­æé«˜åŒ¹é…å‡†ç¡®åº¦ï¼Œä¹Ÿèƒ½è¿›ä¸€æ­¥çš„æé«˜å®‰å…¨æ€§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_4.png&quot; alt=&quot;touch id ontouch&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é™¤äº†ä¸Šè¿°çš„å†…å®¹ï¼Œè‹¹æœè¿˜åŠ å…¥å¯ä»¥ä¸€äº›æœ‰æ•ˆçš„æ‰‹æ®µæ¥è¿›ä¸€æ­¥ç¡®ä¿å®‰å…¨ï¼Œä¾‹å¦‚è®¾å¤‡å†é‡æ–°å¯åŠ¨æˆ–è€…ä¿æŒé”å®š 48 å°æ—¶åï¼Œå°±åªèƒ½é€šè¿‡å¯†ç è€Œä¸æ˜¯æŒ‡çº¹æ¥è§£é”è®¾å¤‡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;secure-enclave&quot;&gt;Secure Enclave&lt;/h3&gt;

&lt;p&gt;Appleå£°æ˜æŒ‡çº¹çš„å›¾æ¡ˆä¸ä¼šè¢«ä¿å­˜ï¼Œå­˜å‚¨äºè®¾å¤‡ä¸­çš„æ˜¯æŒ‡çº¹ç‰¹å¾çš„æ•°å­¦è¡¨è¾¾å¼ï¼Œè€Œä¸”ä»è¿™äº›è¡¨è¾¾å¼ä¸å¯èƒ½ç›´æ¥åæ¨å‡ºæŒ‡çº¹å›¾åƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_5.png&quot; alt=&quot;touch-id-structure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡çº¹çš„éªŒè¯è¿ç®—ç‹¬ç«‹äºä¸»è¦å¤„ç†å™¨èŠ¯ç‰‡ï¼ˆä¾‹å¦‚ A7ã€A8ï¼‰ï¼ŒèŠ¯ç‰‡å†…æœ‰ç§°ä¸º â€œSecure Enclaveâ€ çš„é«˜çº§å®‰å…¨æ¶æ„ï¼Œä¸“ç”¨äºå¯†ç æŒ‡çº¹æ•°æ®ï¼Œå¹¶ä½¿ç”¨ Secure Enclave çš„ä¸“ç”¨å¯†é’¥åŠ å¯†ï¼Œä»¥åŠæ¯æ¬¡å¯åŠ¨ä»¥éšæœºçš„ UID è¿›è¡Œç®¡ç†ã€‚æŒ‡çº¹æ•°æ®ä»…èƒ½è¢« Secure Enclave å¤„ç†å’Œä½¿ç”¨ï¼Œæ­£å› ä¸ºæ­¤æ¶æ„ç‹¬ç«‹äºå…¶å®ƒè®¾å¤‡éƒ¨ä»¶ï¼Œä»…æœ‰ Touch ID ä½¿ç”¨å®ƒï¼Œä¸”ä¸èƒ½å°†å®ƒç”¨äºåŒ¹é…å…¶ä»–æŒ‡çº¹æ•°æ®åº“ï¼Œæ‰€ä»¥å­˜å‚¨çš„æŒ‡çº¹æ•°æ®ä¸ä¼šç”± iOS æˆ–å…¶ä»–åº”ç”¨è®¿é—®ï¼Œä¹Ÿä¸ä¼šè¢«å­˜å‚¨åˆ° Apple æœåŠ¡å™¨æˆ–å¤‡ä»½åˆ° iCloud ç­‰åœ°æ–¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios_data_protection_6.png&quot; alt=&quot;A7-Secure-Enclave&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ç¡¬ä»¶ä¸Šæ¥çœ‹æŒ‡çº¹ç‰¹å¾æ•°æ®å°šä¸èƒ½è¢« â€œSecure Enclaveâ€ å’Œ Touch ID ä»¥å¤–çš„éƒ¨ä»¶è®¿é—®åˆ°ï¼Œå¹¶ä¸”ä¸¤è€…èŠ¯ç‰‡äº’ç›¸éš”ç¦»å¼€æ¥ï¼Œæ‰€æœ‰è½¯ä»¶éƒ½æ²¡æœ‰æƒåˆ©è·å¾—æŒ‡çº¹æ•°æ®ï¼Œä»…èƒ½å¾—åˆ°æŒ‡çº¹æ˜¯å¦é”™è¯¯çš„å›é¦ˆã€‚å› ä¸ºæ¶æ„çš„æ ¸å¿ƒç§˜å¯†ä»…ä»…åªæœ‰è‹¹æœå…¬å¸çŸ¥é“ï¼Œæ‰€ä»¥ç›®å‰å‡ ä¹æ²¡æœ‰ç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥è®¿é—®åˆ°è¿™éƒ¨åˆ†æ•æ„Ÿä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°æ­¤ï¼Œå…³äº iOS æ•°æ®ä¿æŠ¤çš„é—®é¢˜æš‚æ—¶å‘Šä¸€æ®µè½ã€‚æ¬¢è¿å¤§å®¶è¯„è®ºæŒ‡æ­£ã€‚&lt;/p&gt;</content><author><name>Chars</name></author><category term="pieces" /><category term="ios" /><category term="å®‰å…¨" /><category term="å­˜å‚¨" /><summary type="html">æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€keychainä¸­çš„é¡¹ï¼Œéƒ½æ˜¯åŠ å¯†å­˜å‚¨çš„ã€‚å½“ç”¨æˆ·è§£é”è®¾å¤‡åï¼Œç³»ç»Ÿé€šè¿‡UDIDå¯†é’¥å’Œç”¨æˆ·è®¾å®šçš„å¯†ç ç”Ÿæˆä¸€ä¸ªç”¨äºè§£å¯†çš„å¯†ç å¯†é’¥ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°è®¾å¤‡å†æ¬¡è¢«é”ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡Data Protection API æ¥è®¾å®šæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€keychainä¸­çš„é¡¹åº”è¯¥ä½•æ—¶è¢«è§£å¯†ã€‚è¿™ä¸ªå°±æ˜¯æ•°æ®ä¿æŠ¤çš„å†…å®¹ã€‚</summary></entry><entry><title type="html">MacOS æ­å»º Tensorflow PyCharm ç¯å¢ƒ</title><link href="http://localhost:4000/blog/tensorflow-pycharm-mac/" rel="alternate" type="text/html" title="MacOS æ­å»º Tensorflow PyCharm ç¯å¢ƒ" /><published>2017-09-26T23:03:16+08:00</published><updated>2017-09-26T23:03:16+08:00</updated><id>http://localhost:4000/blog/tensorflow-pycharm-mac</id><content type="html" xml:base="http://localhost:4000/blog/tensorflow-pycharm-mac/">&lt;p&gt;TensorFlow æœ€åˆç”±Googleå¤§è„‘å°ç»„ï¼ˆéš¶å±äºGoogleæœºå™¨æ™ºèƒ½ç ”ç©¶æœºæ„ï¼‰çš„ç ”ç©¶å‘˜å’Œå·¥ç¨‹å¸ˆä»¬å¼€å‘å‡ºæ¥ï¼Œç”¨äºæœºå™¨å­¦ä¹ å’Œæ·±åº¦ç¥ç»ç½‘ç»œæ–¹é¢çš„ç ”ç©¶ï¼Œä½†è¿™ä¸ªç³»ç»Ÿçš„é€šç”¨æ€§ä½¿å…¶ä¹Ÿå¯å¹¿æ³›ç”¨äºå…¶ä»–è®¡ç®—é¢†åŸŸã€‚ç›®å‰æ¥è¯´ï¼Œ&lt;a href=&quot;https://github.com/tensorflow/tensorflow&quot;&gt;Github&lt;/a&gt;ä¸Šstaræœ€å¤šçš„é¡¹ç›®å°±æ˜¯å®ƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¹‹å‰ï¼Œç¬”è€…å†™è¿‡ä¸€ç¯‡ç®€å•çš„å…¥é—¨æ–‡ç« &lt;a href=&quot;/blog/tensorflow-primer-guide/&quot;&gt;ã€Šåˆæ¢ TensorFlowã€‹&lt;/a&gt;ã€‚å½“æ—¶æ²¡èƒ½æˆåŠŸæ­å»ºç¯å¢ƒï¼ŒåŠ ä¸ŠåæœŸçš„å·¥ä½œåŸå› ï¼Œè‡³æ­¤æç½®äº†ä¸€æ®µæ—¶é—´ã€‚ä»Šå¤©ï¼Œç»ˆäºå„ç§æŠ˜è…¾ï¼Œåœ¨è‡ªå·±çš„Macä¸Šç»è¿‡å¤šç§å°è¯•ä¹‹åï¼Œå®Œç¾æ­å»ºæˆåŠŸã€‚è¿™é‡Œå°±æŠŠå®ƒåˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;åŸºäº-anaconda-çš„å®‰è£…&quot;&gt;åŸºäº Anaconda çš„å®‰è£…&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.anaconda.com/&quot;&gt;Anaconda&lt;/a&gt; æ˜¯ä¸€ä¸ªé›†æˆè®¸å¤šç¬¬ä¸‰æ–¹ç§‘å­¦è®¡ç®—åº“çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Python&lt;/code&gt; ç§‘å­¦è®¡ç®—ç¯å¢ƒ,&lt;code class=&quot;highlighter-rouge&quot;&gt;Anaconda&lt;/code&gt; ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; ä½œä¸ºè‡ªå·±çš„åŒ…ç®¡ç†å·¥å…·,åŒæ—¶å…·æœ‰è‡ªå·±çš„è®¡ç®—ç¯å¢ƒ,ç±»ä¼¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;Virtualenv&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Virtualenv&lt;/code&gt; ä¸€æ ·,ä¸åŒ &lt;code class=&quot;highlighter-rouge&quot;&gt;Python&lt;/code&gt; å·¥ç¨‹éœ€è¦çš„ä¾èµ–åŒ…,&lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; å°†ä»–ä»¬å­˜å‚¨åœ¨ä¸åŒçš„åœ°æ–¹ã€‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;TensorFlow&lt;/code&gt; ä¸Šå®‰è£…çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Anaconda&lt;/code&gt; ä¸ä¼šå¯¹ä¹‹å‰å®‰è£…çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Python&lt;/code&gt; åŒ…è¿›è¡Œè¦†ç›–.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å®‰è£… &lt;a href=&quot;https://www.anaconda.com/download/&quot;&gt;Anaconda&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å»ºç«‹ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; è®¡ç®—ç¯å¢ƒ&lt;/li&gt;
  &lt;li&gt;æ¿€æ´»ç¯å¢ƒ,ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; å®‰è£… &lt;code class=&quot;highlighter-rouge&quot;&gt;TensorFlow&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å®‰è£…æˆåŠŸå,æ¯æ¬¡ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;TensorFlow&lt;/code&gt; çš„æ—¶å€™éœ€è¦æ¿€æ´» &lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; ç¯å¢ƒ&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å®‰è£…-anaconda-&quot;&gt;å®‰è£… Anaconda :&lt;/h3&gt;

&lt;p&gt;å‚è€ƒ Anaconda çš„ä¸‹è½½é¡µé¢çš„&lt;a href=&quot;https://www.anaconda.com/download/&quot;&gt;æŒ‡å¯¼&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;å»ºç«‹ç¯å¢ƒ&quot;&gt;å»ºç«‹ç¯å¢ƒ&lt;/h3&gt;

&lt;p&gt;å»ºç«‹ä¸€ä¸ª conda è®¡ç®—ç¯å¢ƒåå­—å«&lt;code class=&quot;highlighter-rouge&quot;&gt;tensorflow&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Python 2.7
$ conda create -n tensorflow python=2.7

# Python 3.4
$ conda create -n tensorflow python=3.4
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;æ¿€æ´»&quot;&gt;æ¿€æ´»&lt;/h3&gt;

&lt;p&gt;æ¿€æ´»&lt;code class=&quot;highlighter-rouge&quot;&gt;tensorflow&lt;/code&gt;ç¯å¢ƒ,ç„¶åä½¿ç”¨å…¶ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;pip&lt;/code&gt; å®‰è£… &lt;code class=&quot;highlighter-rouge&quot;&gt;TensorFlow&lt;/code&gt;. å½“ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;easy_install&lt;/code&gt;ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;--ignore-installed&lt;/code&gt;æ ‡è®°é˜²æ­¢é”™è¯¯çš„äº§ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.tensorflow.org/install/install_mac#the_url_of_the_tensorflow_python_package&quot;&gt;URL of the TensorFlow Python package&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ source activate tensorflow
(tensorflow)$  # Your prompt should change

# Ubuntu/Linux 64-bit, CPU only, Python 2.7:
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl

# Ubuntu/Linux 64-bit, GPU enabled, Python 2.7. Requires CUDA toolkit 7.5 and CuDNN v4.
# For other versions, see &quot;Install from sources&quot; below.
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl

# Mac OS X, CPU only:
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.11.0rc0-py2-none-any.whl
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯¹äº Python 3.x :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ source activate tensorflow
(tensorflow)$  # Your prompt should change

# Ubuntu/Linux 64-bit, CPU only, Python 3.4:
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0rc0-cp34-cp34m-linux_x86_64.whl

# Ubuntu/Linux 64-bit, GPU enabled, Python 3.4. Requires CUDA toolkit 7.5 and CuDNN v4.
# For other versions, see &quot;Install from sources&quot; below.
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp34-cp34m-linux_x86_64.whl

# Mac OS X, CPU only:
(tensorflow)$ pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/mac/tensorflow-0.8.0rc0-py3-none-any.whl
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;conda ç¯å¢ƒæ¿€æ´»å,ä½ å¯ä»¥æµ‹è¯•:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ python
&amp;gt;&amp;gt;&amp;gt; import tensorflow as tf
&amp;gt;&amp;gt;&amp;gt; print(tf.__version__)
# 0.11.0rc0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;å¼€å¯æˆ–å…³é—­ç¯å¢ƒ&quot;&gt;å¼€å¯æˆ–å…³é—­ç¯å¢ƒ&lt;/h3&gt;

&lt;p&gt;å½“ä½ ä¸ç”¨ TensorFlow çš„æ—¶å€™,å…³é—­ç¯å¢ƒ:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(tensorflow)$ source deactivate

$  # Your prompt should change back
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å†æ¬¡ä½¿ç”¨çš„æ—¶å€™å†æ¿€æ´» :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ source activate tensorflow
(tensorflow)$  # Your prompt should change.
# Run Python programs that use TensorFlow.
...
# When you are done using TensorFlow, deactivate the environment.
(tensorflow)$ source deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;pycharm-é…ç½®&quot;&gt;PyCharm é…ç½®&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;é‡ç‚¹ï¼š&lt;/strong&gt;æ­£ç¡®é…ç½®&lt;code class=&quot;highlighter-rouge&quot;&gt;Project&lt;/code&gt;çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Interpreter&lt;/code&gt;å³å¯&lt;/p&gt;

&lt;h3 id=&quot;æ–¹æ³•&quot;&gt;æ–¹æ³•&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Preferences&lt;/li&gt;
  &lt;li&gt;Project Interpreter&lt;/li&gt;
  &lt;li&gt;Click More&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;é™„å›¾&quot;&gt;é™„å›¾&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;æ‰“å¼€Preferences&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/tensorflow_pycharm_config_mac_1.png?imageView/2/w/640&quot; alt=&quot;æ‰“å¼€Preferences&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/tensorflow_pycharm_config_mac_2.png?imageView/2/w/640&quot; alt=&quot;é€‰æ‹©more&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ‰“å¼€Project Interpreters&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/tensorflow_pycharm_config_mac_3.png&quot; alt=&quot;é€‰æ‹©æ­£ç¡®çš„tensorflowè·¯å¾„&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Demoè¿è¡Œç»“æœ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/tensorflow_pycharm_config_mac_4.png?imageView/2/w/640&quot; alt=&quot;demoè¿è¡Œç»“æœ&quot; /&gt;&lt;/p&gt;</content><author><name>Chars</name></author><category term="ml" /><category term="tensorflow" /><category term="python" /><category term="æœºå™¨å­¦ä¹ " /><summary type="html">TensorFlow æœ€åˆç”±Googleå¤§è„‘å°ç»„ï¼ˆéš¶å±äºGoogleæœºå™¨æ™ºèƒ½ç ”ç©¶æœºæ„ï¼‰çš„ç ”ç©¶å‘˜å’Œå·¥ç¨‹å¸ˆä»¬å¼€å‘å‡ºæ¥ï¼Œç”¨äºæœºå™¨å­¦ä¹ å’Œæ·±åº¦ç¥ç»ç½‘ç»œæ–¹é¢çš„ç ”ç©¶ï¼Œä½†è¿™ä¸ªç³»ç»Ÿçš„é€šç”¨æ€§ä½¿å…¶ä¹Ÿå¯å¹¿æ³›ç”¨äºå…¶ä»–è®¡ç®—é¢†åŸŸã€‚ç›®å‰æ¥è¯´ï¼ŒGithubä¸Šstaræœ€å¤šçš„é¡¹ç›®å°±æ˜¯å®ƒäº†ã€‚</summary></entry><entry><title type="html">iOS App å¯åŠ¨æ€§èƒ½ä¼˜åŒ–</title><link href="http://localhost:4000/blog/ios-app-launch-time-optimize/" rel="alternate" type="text/html" title="iOS App å¯åŠ¨æ€§èƒ½ä¼˜åŒ–" /><published>2017-09-22T22:02:16+08:00</published><updated>2017-09-22T22:02:16+08:00</updated><id>http://localhost:4000/blog/ios-app-launch-time-optimize</id><content type="html" xml:base="http://localhost:4000/blog/ios-app-launch-time-optimize/">&lt;p&gt;åº”ç”¨å¯åŠ¨æ—¶é—´ï¼Œç›´æ¥å½±å“ç”¨æˆ·å¯¹ä¸€æ¬¾åº”ç”¨çš„åˆ¤æ–­å’Œä½¿ç”¨ä½“éªŒã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;ZAKERæ–°é—»&lt;/code&gt;æœ¬èº«å°±åŒ…å«éå¸¸å¤šå¹¶ä¸”å¤æ‚åº¦é«˜çš„ä¸šåŠ¡æ¨¡å—ï¼ˆå¦‚æ–°é—»ã€è§†é¢‘ç­‰ï¼‰ï¼Œä¹Ÿæ¥å…¥äº†å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ’ä»¶ï¼Œè¿™åŠ¿å¿…ä¼šæ‹–æ…¢åº”ç”¨çš„å¯åŠ¨æ—¶é—´ï¼Œæœ¬ç€ç²¾ç›Šæ±‚ç²¾çš„æ€åº¦å’Œå¯¹ç”¨æˆ·ä½“éªŒçš„è¿½æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸šåŠ¡æ‰©å¼ çš„åŒæ—¶æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–å¯åŠ¨æ—¶é—´ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;å¯åŠ¨æ—¶é—´&quot;&gt;å¯åŠ¨æ—¶é—´&lt;/h2&gt;

&lt;p&gt;æ€»æ—¶é—´ = T1 + T2&lt;/p&gt;

&lt;h3 id=&quot;t1&quot;&gt;T1&lt;/h3&gt;

&lt;p&gt;åŠ è½½&lt;code class=&quot;highlighter-rouge&quot;&gt;ç³»ç»Ÿdylib&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;å¯æ‰§è¡Œæ–‡ä»¶&lt;/code&gt;çš„æ—¶é—´ã€‚&lt;/p&gt;

&lt;h3 id=&quot;t2&quot;&gt;T2&lt;/h3&gt;

&lt;p&gt;ä»&lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt;åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;applicationWillFinishLaunching&lt;/code&gt;ç»“æŸçš„æ—¶é—´ã€‚&lt;/p&gt;

&lt;h2 id=&quot;appå¯åŠ¨è¿‡ç¨‹&quot;&gt;Appå¯åŠ¨è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-app-launch-time-optimize-1.png&quot; alt=&quot;Appå¯åŠ¨è¿‡ç¨‹&quot; /&gt;&lt;/p&gt;

&lt;p&gt;1ï¼‰è§£æ&lt;code class=&quot;highlighter-rouge&quot;&gt;Info.plist&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;åŠ è½½ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚å¦‚é—ªå±&lt;/li&gt;
  &lt;li&gt;æ²™ç®±å»ºç«‹ã€æƒé™æ£€æŸ¥&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;2ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;Mach-O&lt;/code&gt;åŠ è½½&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¦‚æœæ˜¯èƒ–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯»æ‰¾åˆé€‚å½“å‰CPUç±»åˆ«çš„éƒ¨åˆ†&lt;/li&gt;
  &lt;li&gt;åŠ è½½æ‰€æœ‰ä¾èµ–çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Mach-O&lt;/code&gt;æ–‡ä»¶ï¼ˆé€’å½’è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;Mach-O&lt;/code&gt;åŠ è½½çš„æ–¹æ³•ï¼‰&lt;/li&gt;
  &lt;li&gt;å®šä½å†…éƒ¨ã€å¤–éƒ¨æŒ‡é’ˆå¼•ç”¨ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€å‡½æ•°ç­‰&lt;/li&gt;
  &lt;li&gt;æ‰§è¡Œå£°æ˜ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;__attribute__((constructor))&lt;/code&gt;çš„Cå‡½æ•°&lt;/li&gt;
  &lt;li&gt;åŠ è½½ç±»æ‰©å±•ï¼ˆCategoryï¼‰ä¸­çš„æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;C++é™æ€å¯¹è±¡åŠ è½½ã€è°ƒç”¨ObjCçš„&lt;code class=&quot;highlighter-rouge&quot;&gt; +load &lt;/code&gt;å‡½æ•°&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;3ï¼‰ç¨‹åºæ‰§è¡Œ&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;UIApplicationMain()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;applicationWillFinishLaunching&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;mach-o&quot;&gt;Mach-O&lt;/h3&gt;

&lt;p&gt;Mach-O æ˜¯é’ˆå¯¹ä¸åŒè¿è¡Œæ—¶å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶ç±»å‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-app-launch-time-optimize-4.png&quot; alt=&quot;Mach-O&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;æ–‡ä»¶ç±»å‹&quot;&gt;æ–‡ä»¶ç±»å‹ï¼š&lt;/h4&gt;

&lt;p&gt;Executableï¼š åº”ç”¨çš„ä¸»è¦äºŒè¿›åˆ¶&lt;/p&gt;

&lt;p&gt;Dylibï¼š åŠ¨æ€é“¾æ¥åº“ï¼ˆåˆç§° DSO æˆ– DLLï¼‰&lt;/p&gt;

&lt;p&gt;Bundleï¼š ä¸èƒ½è¢«é“¾æ¥çš„ Dylibï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ dlopen() åŠ è½½ï¼Œå¯å½“åš macOS çš„æ’ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;Imageï¼š executableï¼Œdylib æˆ– bundle&lt;/p&gt;

&lt;p&gt;Frameworkï¼š åŒ…å« Dylib ä»¥åŠèµ„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶çš„æ–‡ä»¶å¤¹&lt;/p&gt;

&lt;h3 id=&quot;mach-o-é•œåƒæ–‡ä»¶&quot;&gt;Mach-O é•œåƒæ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;Mach-O è¢«åˆ’åˆ†æˆä¸€äº› segementï¼Œæ¯ä¸ª segement åˆè¢«åˆ’åˆ†æˆä¸€äº› sectionã€‚&lt;/p&gt;

&lt;p&gt;segment çš„åå­—éƒ½æ˜¯å¤§å†™çš„ï¼Œä¸”ç©ºé—´å¤§å°ä¸ºé¡µçš„æ•´æ•°ã€‚é¡µçš„å¤§å°è·Ÿç¡¬ä»¶æœ‰å…³ï¼Œåœ¨ arm64 æ¶æ„ä¸€é¡µæ˜¯ 16KBï¼Œå…¶ä½™ä¸º 4KBã€‚&lt;/p&gt;

&lt;p&gt;section è™½ç„¶æ²¡æœ‰æ•´æ•°å€é¡µå¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ section ä¹‹é—´ä¸ä¼šæœ‰é‡å ã€‚&lt;/p&gt;

&lt;p&gt;å‡ ä¹æ‰€æœ‰ Mach-O éƒ½åŒ…å«è¿™ä¸‰ä¸ªæ®µï¼ˆsegmentï¼‰ï¼š &lt;code class=&quot;highlighter-rouge&quot;&gt;__TEXT&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;__DATA&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;__LINKEDIT&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__TEXT&lt;/code&gt; åŒ…å« Mach headerï¼Œè¢«æ‰§è¡Œçš„ä»£ç å’Œåªè¯»å¸¸é‡ï¼ˆå¦‚C å­—ç¬¦ä¸²ï¼‰ã€‚åªè¯»å¯æ‰§è¡Œï¼ˆr-xï¼‰ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__DATA&lt;/code&gt; åŒ…å«å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ç­‰ã€‚å¯è¯»å†™ï¼ˆrw-ï¼‰ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__LINKEDIT&lt;/code&gt; åŒ…å«äº†åŠ è½½ç¨‹åºçš„ã€å…ƒæ•°æ®ã€ï¼Œæ¯”å¦‚å‡½æ•°çš„åç§°å’Œåœ°å€ã€‚åªè¯»ï¼ˆrâ€“ï¼‰ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;mach-o-universal-æ–‡ä»¶&quot;&gt;Mach-O Universal æ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Fat_binary&quot;&gt;FAT äºŒè¿›åˆ¶&lt;/a&gt;æ–‡ä»¶ï¼Œå°†å¤šç§æ¶æ„çš„ Mach-O æ–‡ä»¶åˆå¹¶è€Œæˆã€‚å®ƒé€šè¿‡ Fat Header æ¥è®°å½•ä¸åŒæ¶æ„åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ï¼ŒFat Header å ä¸€é¡µçš„ç©ºé—´ã€‚&lt;/p&gt;

&lt;p&gt;æŒ‰åˆ†é¡µæ¥å­˜å‚¨è¿™äº› segement å’Œ header ä¼šæµªè´¹ç©ºé—´ï¼Œä½†è¿™æœ‰åˆ©äºè™šæ‹Ÿå†…å­˜çš„å®ç°ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯image&quot;&gt;ä»€ä¹ˆæ˜¯image&lt;/h3&gt;

&lt;p&gt;1.executableå¯æ‰§è¡Œæ–‡ä»¶ æ¯”å¦‚.oæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;2.dylib åŠ¨æ€é“¾æ¥åº“ frameworkå°±æ˜¯åŠ¨æ€é“¾æ¥åº“å’Œç›¸åº”èµ„æºåŒ…å«åœ¨ä¸€èµ·çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ç»“æ„ã€‚&lt;/p&gt;

&lt;p&gt;3.bundle èµ„æºæ–‡ä»¶ åªèƒ½ç”¨dlopenåŠ è½½ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼åŠ è½½ã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†æˆ‘ä»¬Appæœ¬èº«çš„å¯è¡Œæ€§æ–‡ä»¶ï¼Œç³»ç»Ÿä¸­æ‰€æœ‰çš„frameworkæ¯”å¦‚UIKitã€Foundationç­‰éƒ½æ˜¯ä»¥åŠ¨æ€é“¾æ¥åº“çš„æ–¹å¼é›†æˆè¿›Appä¸­çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯imageloader&quot;&gt;ä»€ä¹ˆæ˜¯ImageLoader&lt;/h3&gt;

&lt;p&gt;image è¡¨ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶(å¯æ‰§è¡Œæ–‡ä»¶æˆ– so æ–‡ä»¶)ï¼Œé‡Œé¢æ˜¯è¢«ç¼–è¯‘è¿‡çš„ç¬¦å·ã€ä»£ç ç­‰ï¼Œæ‰€ä»¥ ImageLoader ä½œç”¨æ˜¯å°†è¿™äº›æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œä¸”æ¯ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªImageLoaderå®ä¾‹æ¥è´Ÿè´£åŠ è½½ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¤æ­¥èµ°ï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶å®ƒå…ˆå°†åŠ¨æ€é“¾æ¥çš„ image é€’å½’åŠ è½½ (ä¹Ÿå°±æ˜¯ä¸Šé¢æµ‹è¯•æ ˆä¸­ä¸€ä¸²çš„é€’å½’è°ƒç”¨çš„æ—¶åˆ»)ã€‚ å†ä»å¯æ‰§è¡Œæ–‡ä»¶ image é€’å½’åŠ è½½æ‰€æœ‰ç¬¦å·ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨&quot;&gt;å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨&lt;/h2&gt;

&lt;h3 id=&quot;å†·å¯åŠ¨&quot;&gt;å†·å¯åŠ¨&lt;/h3&gt;

&lt;p&gt;åº”ç”¨é¦–æ¬¡å¯åŠ¨ã€‚å³åå°çº¿ç¨‹ä¸­æœªæœ‰å½“å‰æ‰“å¼€çš„åº”ç”¨ï¼Œæ‰€æœ‰çš„èµ„æºéƒ½éœ€è¦åŠ è½½å¹¶åˆå§‹åŒ–ã€‚&lt;/p&gt;

&lt;h3 id=&quot;çƒ­å¯åŠ¨&quot;&gt;çƒ­å¯åŠ¨&lt;/h3&gt;

&lt;p&gt;åº”ç”¨éé¦–æ¬¡å¯åŠ¨ã€‚å³åå°çº¿ç¨‹ä¸­ä¿ç•™æœ‰å½“å‰åº”ç”¨ï¼Œåº”ç”¨çš„èµ„æºåœ¨å†…å­˜ä¸­æœ‰ä¿å­˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¯åŠ¨æ—¶é—´åˆ†æ&quot;&gt;å¯åŠ¨æ—¶é—´åˆ†æ&lt;/h2&gt;

&lt;p&gt;1ï¼‰å¼€å¯æ—¶é—´åˆ†æåŠŸèƒ½&lt;/p&gt;

&lt;p&gt;åœ¨Xcodeçš„èœå•ä¸­é€‰æ‹©&lt;code class=&quot;highlighter-rouge&quot;&gt;Project&lt;/code&gt;â†’&lt;code class=&quot;highlighter-rouge&quot;&gt;Scheme&lt;/code&gt;â†’&lt;code class=&quot;highlighter-rouge&quot;&gt;Edit Scheme...&lt;/code&gt;ï¼Œç„¶åæ‰¾åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt; Run&lt;/code&gt; â†’ &lt;code class=&quot;highlighter-rouge&quot;&gt;Environment Variables&lt;/code&gt; â†’&lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt;ï¼Œæ·»åŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;DYLD_PRINT_STATISTICSvalue&lt;/code&gt;ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;çš„ç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-app-launch-time-optimize-2.png&quot; alt=&quot;å¼€å¯æ—¶é—´åˆ†æåŠŸèƒ½&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-app-launch-time-optimize-3.png&quot; alt=&quot;å¯åŠ¨æ—¶é—´&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;load-dylibs-image&quot;&gt;load dylibs image&lt;/h3&gt;

&lt;p&gt;åœ¨æ¯ä¸ªåŠ¨æ€åº“çš„åŠ è½½è¿‡ç¨‹ä¸­ï¼Œ dyldéœ€è¦ï¼š&lt;/p&gt;

&lt;p&gt;1.åˆ†ææ‰€ä¾èµ–çš„åŠ¨æ€åº“&lt;/p&gt;

&lt;p&gt;2.æ‰¾åˆ°åŠ¨æ€åº“çš„mach-oæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;3.æ‰“å¼€æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;4.éªŒè¯æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;5.åœ¨ç³»ç»Ÿæ ¸å¿ƒæ³¨å†Œæ–‡ä»¶ç­¾å&lt;/p&gt;

&lt;p&gt;6.å¯¹åŠ¨æ€åº“çš„æ¯ä¸€ä¸ªsegmentè°ƒç”¨mmap()&lt;/p&gt;

&lt;p&gt;é€šå¸¸çš„ï¼Œä¸€ä¸ªAppéœ€è¦åŠ è½½100åˆ°400ä¸ªdylibsï¼Œ ä½†æ˜¯å…¶ä¸­çš„ç³»ç»Ÿåº“è¢«ä¼˜åŒ–ï¼Œå¯ä»¥å¾ˆå¿«çš„åŠ è½½ã€‚ é’ˆå¯¹è¿™ä¸€æ­¥éª¤çš„ä¼˜åŒ–æœ‰ï¼š&lt;/p&gt;

&lt;p&gt;1.å‡å°‘éç³»ç»Ÿåº“çš„ä¾èµ–&lt;/p&gt;

&lt;p&gt;2.åˆå¹¶éç³»ç»Ÿåº“&lt;/p&gt;

&lt;p&gt;3.ä½¿ç”¨é™æ€èµ„æºï¼Œæ¯”å¦‚æŠŠä»£ç åŠ å…¥ä¸»ç¨‹åº&lt;/p&gt;

&lt;h3 id=&quot;rebasebind&quot;&gt;rebase/bind&lt;/h3&gt;

&lt;p&gt;ç”±äºASLR(address space layout randomization)çš„å­˜åœ¨ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’ŒåŠ¨æ€é“¾æ¥åº“åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„åŠ è½½åœ°å€æ¯æ¬¡å¯åŠ¨éƒ½ä¸å›ºå®šï¼Œæ‰€ä»¥éœ€è¦è¿™2æ­¥æ¥ä¿®å¤é•œåƒä¸­çš„èµ„æºæŒ‡é’ˆï¼Œæ¥æŒ‡å‘æ­£ç¡®çš„åœ°å€ã€‚ rebaseä¿®å¤çš„æ˜¯æŒ‡å‘å½“å‰é•œåƒå†…éƒ¨çš„èµ„æºæŒ‡é’ˆï¼› è€ŒbindæŒ‡å‘çš„æ˜¯é•œåƒå¤–éƒ¨çš„èµ„æºæŒ‡é’ˆã€‚&lt;/p&gt;

&lt;p&gt;rebaseæ­¥éª¤å…ˆè¿›è¡Œï¼Œéœ€è¦æŠŠé•œåƒè¯»å…¥å†…å­˜ï¼Œå¹¶ä»¥pageä¸ºå•ä½è¿›è¡ŒåŠ å¯†éªŒè¯ï¼Œä¿è¯ä¸ä¼šè¢«ç¯¡æ”¹ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„ç“¶é¢ˆåœ¨IOã€‚bindåœ¨å…¶åè¿›è¡Œï¼Œç”±äºè¦æŸ¥è¯¢ç¬¦å·è¡¨ï¼Œæ¥æŒ‡å‘è·¨é•œåƒçš„èµ„æºï¼ŒåŠ ä¸Šåœ¨rebaseé˜¶æ®µï¼Œé•œåƒå·²è¢«è¯»å…¥å’ŒåŠ å¯†éªŒè¯ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„ç“¶é¢ˆåœ¨äºCPUè®¡ç®—ã€‚&lt;/p&gt;

&lt;p&gt;ä¼˜åŒ–è¯¥é˜¶æ®µçš„å…³é”®åœ¨äºå‡å°‘__DATA segmentä¸­çš„æŒ‡é’ˆæ•°é‡ã€‚æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–çš„ç‚¹æœ‰ï¼š&lt;/p&gt;

&lt;p&gt;1.å‡å°‘Objcç±»æ•°é‡ï¼Œ å‡å°‘selectoræ•°é‡&lt;/p&gt;

&lt;p&gt;2.å‡å°‘C++è™šå‡½æ•°æ•°é‡&lt;/p&gt;

&lt;p&gt;3.è½¬è€Œä½¿ç”¨swift stuctï¼ˆå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸ºäº†å‡å°‘ç¬¦å·çš„æ•°é‡ï¼‰&lt;/p&gt;

&lt;h3 id=&quot;è§£è¯»&quot;&gt;è§£è¯»&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°ä¹‹å‰æ€»å…±ä½¿ç”¨äº†506.48ms&lt;/li&gt;
  &lt;li&gt;åœ¨506.48msä¸­ï¼ŒåŠ è½½åŠ¨æ€åº“ç”¨äº†46.35msï¼ŒæŒ‡é’ˆé‡å®šä½ä½¿ç”¨äº†137.72msï¼ŒObjCç±»åˆå§‹åŒ–ä½¿ç”¨äº†95.39msï¼Œå„ç§åˆå§‹åŒ–ä½¿ç”¨äº†226.92msã€‚&lt;/li&gt;
  &lt;li&gt;åœ¨åˆå§‹åŒ–è€—è´¹çš„226.92msä¸­ï¼Œç”¨æ—¶æœ€å¤šçš„å‡ ä¸ªåˆå§‹åŒ–æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;libSystem.B.dylib&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;libBacktraceRecording.dylib&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;libglInterpose.dylib&lt;/code&gt;ä»¥åŠ&lt;code class=&quot;highlighter-rouge&quot;&gt;libMTLInterpose.dylib&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;2ï¼‰ä½¿ç”¨instrumentså·¥ä½œåˆ†æå…·ä½“æ—¶é—´æ¶ˆè€—ç‚¹&lt;/p&gt;

&lt;h2 id=&quot;è€—æ—¶çš„å½±å“å› ç´ &quot;&gt;è€—æ—¶çš„å½±å“å› ç´ &lt;/h2&gt;

&lt;p&gt;1ï¼‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°ä¹‹å‰è€—æ—¶çš„å½±å“å› ç´ &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;åŠ¨æ€åº“åŠ è½½è¶Šå¤šï¼Œå¯åŠ¨è¶Šæ…¢ã€‚&lt;/li&gt;
  &lt;li&gt;ObjCç±»è¶Šå¤šï¼Œå¯åŠ¨è¶Šæ…¢&lt;/li&gt;
  &lt;li&gt;Cçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;constructor&lt;/code&gt;å‡½æ•°è¶Šå¤šï¼Œå¯åŠ¨è¶Šæ…¢&lt;/li&gt;
  &lt;li&gt;C++é™æ€å¯¹è±¡è¶Šå¤šï¼Œå¯åŠ¨è¶Šæ…¢&lt;/li&gt;
  &lt;li&gt;ObjCçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;+load&lt;/code&gt;è¶Šå¤šï¼Œå¯åŠ¨è¶Šæ…¢&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å®éªŒè¯æ˜ï¼Œåœ¨ObjCç±»çš„æ•°ç›®ä¸€æ ·å¤šçš„æƒ…å†µä¸‹ï¼Œéœ€è¦åŠ è½½çš„åŠ¨æ€åº“è¶Šå¤šï¼ŒAppå¯åŠ¨å°±è¶Šæ…¢ã€‚åŒæ ·çš„ï¼Œåœ¨åŠ¨æ€åº“ä¸€æ ·å¤šçš„æƒ…å†µä¸‹ï¼ŒObjCçš„ç±»è¶Šå¤šï¼ŒAppçš„å¯åŠ¨ä¹Ÿè¶Šæ…¢ã€‚éœ€è¦åŠ è½½çš„åŠ¨æ€åº“ä»1ä¸ªä¸Šå‡åˆ°10ä¸ªçš„æ—¶å€™ï¼Œç”¨æˆ·å‡ ä¹æ„ŸçŸ¥ä¸åˆ°ä»»ä½•åˆ†åˆ«ï¼Œä½†ä»10ä¸ªä¸Šå‡åˆ°100ä¸ªçš„æ—¶å€™å°±ä¼šå˜å¾—ååˆ†æ˜æ˜¾ã€‚åŒç†ï¼Œ100ä¸ªç±»å’Œ1000ä¸ªç±»ï¼Œå¯èƒ½ä¹Ÿå¾ˆéš¾æŸ¥å¯Ÿè§‰å¾—å‡ºï¼Œä½†1000ä¸ªç±»å’Œ10000ä¸ªç±»çš„åˆ†åˆ«å°±å¼€å§‹æ˜æ˜¾èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ ·çš„ï¼Œå°½é‡ä¸è¦å†™&lt;code class=&quot;highlighter-rouge&quot;&gt;__attribute__((constructor))&lt;/code&gt;çš„Cå‡½æ•°ï¼Œä¹Ÿå°½é‡ä¸è¦ç”¨åˆ°C++çš„é™æ€å¯¹è±¡ï¼›è‡³äºObjCçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;+load&lt;/code&gt;æ–¹æ³•ï¼Œä¼¼ä¹å¤§å®¶å·²ç»ä¹ æƒ¯ä¸ç”¨å®ƒäº†ã€‚ä»»ä½•æƒ…å†µä¸‹ï¼Œèƒ½ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;dispatch_once()&lt;/code&gt;æ¥å®Œæˆçš„ï¼Œå°±å°½é‡ä¸è¦ç”¨åˆ°ä»¥ä¸Šçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;2ï¼‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°ä¹‹åè€—æ—¶çš„å½±å“å› ç´ &lt;/p&gt;

&lt;p&gt;ä»&lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°å¼€å§‹è‡³&lt;code class=&quot;highlighter-rouge&quot;&gt;applicationWillFinishLaunching&lt;/code&gt;ç»“æŸï¼Œæˆ‘ä»¬ç»Ÿä¸€ç§°ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°ä¹‹åçš„éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;main()&lt;/code&gt;å‡½æ•°çš„è€—æ—¶&lt;/li&gt;
  &lt;li&gt;æ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;applicationWillFinishLaunching&lt;/code&gt;çš„è€—æ—¶&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;rootViewController&lt;/code&gt;åŠå…¶&lt;code class=&quot;highlighter-rouge&quot;&gt;childViewController&lt;/code&gt;çš„åŠ è½½ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;view&lt;/code&gt;åŠå…¶&lt;code class=&quot;highlighter-rouge&quot;&gt;subviews&lt;/code&gt;çš„åŠ è½½&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®è·µ&quot;&gt;å®è·µ&lt;/h2&gt;

&lt;h3 id=&quot;ç§»é™¤ä¸éœ€è¦ç”¨åˆ°çš„ç±»&quot;&gt;ç§»é™¤ä¸éœ€è¦ç”¨åˆ°çš„ç±»&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸ªå†å²é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªå«åš&lt;a href=&quot;https://github.com/dblock/fui&quot;&gt;fuiï¼ˆFind Unused Importsï¼‰&lt;/a&gt;çš„å¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¾ˆå¥½çš„åˆ†æå‡ºä¸å†ä½¿ç”¨çš„ç±»ï¼Œå‡†ç¡®ç‡éå¸¸é«˜ï¼Œå”¯ä¸€çš„é—®é¢˜æ˜¯å®ƒå¤„ç†ä¸äº†åŠ¨æ€åº“å’Œé™æ€åº“é‡Œæä¾›çš„ç±»ï¼Œä¹Ÿå¤„ç†ä¸äº†C++çš„ç±»æ¨¡æ¿ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;Terminal&lt;/code&gt;ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;cd&lt;/code&gt;åˆ°é¡¹ç›®æ‰€åœ¨çš„ç›®å½•ï¼Œç„¶åæ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;fui find&lt;/code&gt;ï¼Œç„¶åç­‰ä¸Šé‚£ä¹ˆå‡ åˆ†é’Ÿï¼ˆæ˜¯çš„ä½ æ²¡æœ‰çœ‹é”™ï¼ŒçœŸçš„éœ€è¦å¥½å‡ åˆ†é’Ÿç”šè‡³éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåˆ—è¡¨äº†ã€‚ç”±äºè¿™ä¸ªå·¥å…·è¿˜ä¸æ˜¯100%é è°±ï¼Œå¯æ ¹æ®è¿™ä¸ªåˆ—è¡¨ï¼Œåœ¨Xcodeä¸­æ‰‹åŠ¨æ£€æŸ¥å¹¶åˆ é™¤ä¸å†ç”¨åˆ°çš„ç±»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åˆå¹¶åŠŸèƒ½ç±»ä¼¼çš„ç±»å’Œæ‰©å±•category&quot;&gt;åˆå¹¶åŠŸèƒ½ç±»ä¼¼çš„ç±»å’Œæ‰©å±•ï¼ˆCategoryï¼‰&lt;/h3&gt;

&lt;h3 id=&quot;ä¼˜åŒ–applicationdidfinishlaunchingwithoptionsæ–¹æ³•&quot;&gt;ä¼˜åŒ–&lt;code class=&quot;highlighter-rouge&quot;&gt;application:didFinishLaunchingWithOptions:&lt;/code&gt;æ–¹æ³•&lt;/h3&gt;

&lt;h3 id=&quot;ä¼˜åŒ–rootviewcontrolleråŠ è½½&quot;&gt;ä¼˜åŒ–&lt;code class=&quot;highlighter-rouge&quot;&gt;rootViewController&lt;/code&gt;åŠ è½½&lt;/h3&gt;

&lt;h2 id=&quot;é—®é¢˜&quot;&gt;é—®é¢˜&lt;/h2&gt;

&lt;p&gt;1ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;NSUserDefaults&lt;/code&gt;æ˜¯å¦æ˜¯ç“¶é¢ˆ&lt;/p&gt;

&lt;p&gt;2ï¼‰è¿˜æœ‰å…¶ä»–å“ªäº›ç‚¹å¯ä»¥åšä¼˜åŒ–&lt;/p&gt;

&lt;p&gt;å‚è€ƒæ–‡æ¡£ï¼š&lt;a href=&quot;http://yulingtianxia.com/blog/2016/10/30/Optimizing-App-Startup-Time/&quot;&gt;ã€Šä¼˜åŒ– App çš„å¯åŠ¨æ—¶é—´ã€‹&lt;/a&gt;&lt;/p&gt;</content><author><name>Chars</name></author><category term="pieces" /><category term="ios" /><category term="æ€§èƒ½" /><category term="ä¼˜åŒ–" /><summary type="html">åº”ç”¨å¯åŠ¨æ—¶é—´ï¼Œç›´æ¥å½±å“ç”¨æˆ·å¯¹ä¸€æ¬¾åº”ç”¨çš„åˆ¤æ–­å’Œä½¿ç”¨ä½“éªŒã€‚ZAKERæ–°é—»æœ¬èº«å°±åŒ…å«éå¸¸å¤šå¹¶ä¸”å¤æ‚åº¦é«˜çš„ä¸šåŠ¡æ¨¡å—ï¼ˆå¦‚æ–°é—»ã€è§†é¢‘ç­‰ï¼‰ï¼Œä¹Ÿæ¥å…¥äº†å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ’ä»¶ï¼Œè¿™åŠ¿å¿…ä¼šæ‹–æ…¢åº”ç”¨çš„å¯åŠ¨æ—¶é—´ï¼Œæœ¬ç€ç²¾ç›Šæ±‚ç²¾çš„æ€åº¦å’Œå¯¹ç”¨æˆ·ä½“éªŒçš„è¿½æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸šåŠ¡æ‰©å¼ çš„åŒæ—¶æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–å¯åŠ¨æ—¶é—´ã€‚</summary></entry><entry><title type="html">é‚£äº›è®¾è®¡iOS APIéœ€è¦çŸ¥é“çš„äº‹</title><link href="http://localhost:4000/blog/ios-design-api-guide/" rel="alternate" type="text/html" title="é‚£äº›è®¾è®¡iOS APIéœ€è¦çŸ¥é“çš„äº‹" /><published>2017-07-10T06:32:33+08:00</published><updated>2017-07-10T06:32:33+08:00</updated><id>http://localhost:4000/blog/ios-design-api-guide</id><content type="html" xml:base="http://localhost:4000/blog/ios-design-api-guide/">&lt;p&gt;ä¸ºäº†èƒ½å¤Ÿå°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„ä»£ç èƒ½å¤Ÿåœ¨åç»­å¼€å‘è€…ä½¿ç”¨ï¼ˆé‡ç”¨ä»£ç ï¼‰ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯å°†ä»£ç æŒ‰ç…§åŠŸèƒ½æ¨¡å—ç¼–å†™æˆAPIã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆæœ‰å¿…è¦äº†è§£Objective-Cè¯­è¨€ä¸­å¸¸è§çš„ç¼–ç¨‹èŒƒå¼ï¼ˆparadigmï¼‰ï¼ŒåŒæ—¶è¿˜éœ€äº†è§£å„ç§å¯èƒ½ç¢°åˆ°çš„é™·é˜±ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;å‘½å&quot;&gt;å‘½å&lt;/h2&gt;

&lt;h3 id=&quot;å‘½åå†²çªçš„é—®é¢˜&quot;&gt;å‘½åå†²çªçš„é—®é¢˜&lt;/h3&gt;

&lt;p&gt;Objective-Cæ²¡æœ‰å…¶ä»–è¯­è¨€çš„é‚£ç§å†…ç½®å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æœºåˆ¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±æƒ³åŠæ³•æ¥è§£å†³å‘½åå†²çªé—®é¢˜ã€‚æœ€å¸¸ç”¨çš„è§£å†³æ–¹å¼å°±æ˜¯ï¼Œä»¿ç…§å…¶ä»–è¯­è¨€ï¼ˆC++ï¼‰å»ºç«‹è‡ªå·±çš„namespaceï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨å‰ç¼€ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€é€‰å‰ç¼€å¯ä»¥æ˜¯ä¸å…¬å¸ã€åº”ç”¨ç¨‹åºæˆ–äºŒè€…çš†æœ‰å…³è”ä¹‹åã€‚ä¾‹å¦‚ï¼ŒZAKER User Interfaceå¯ä»¥ä½¿ç”¨ZUIä½œä¸ºå‰ç¼€ã€‚ä½¿ç”¨Cocoaåˆ›å»ºåº”ç”¨ç¨‹åºæ—¶ä¸€å®šè¦æ³¨æ„ï¼ŒAppleå®£ç§°å…¶ä¿ç•™ä½¿ç”¨æ‰€æœ‰â€œä¸¤å­—æ¯å‰ç¼€â€(two-letter prefix)çš„æƒåˆ©ï¼Œæ‰€ä»¥å¼€å‘è€…é€‰ç”¨çš„å‰ç¼€åº”è¯¥æ˜¯ä¸‰ä¸ªå­—æ¯çš„ã€‚å¦‚æœå¼€å‘è€…ä½¿ç”¨äº†ä¸¤ä¸ªå­—æ¯ä½œå‰ç¼€ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å¼€å‘è€…è‡ªå®šä¹‰çš„APIå’ŒAppleçš„APIå†²çªã€‚&lt;/p&gt;

&lt;p&gt;ä¸ä»…ä»…æ˜¯ç±»åï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰åç§°éƒ½åº”è¯¥åŠ å‰ç¼€ã€‚å¦‚æœè¦ä¸ºæ—¢æœ‰ç±»æ–°å¢â€œåˆ†ç±»â€(category)ï¼Œé‚£ä¹ˆä¸€å®šè¦ç»™â€œåˆ†ç±»â€åŠâ€œåˆ†ç±»â€ä¸­çš„æ–¹æ³•åŠ ä¸Šå‰ç¼€ã€‚å¦å¤–ï¼Œç±»çš„å®ç°æ–‡ä»¶ä¸­æ‰€ç”¨çš„çº¯Cå‡½æ•°åŠå…¨å±€å˜é‡ä¹Ÿåº”è¯¥æ³¨æ„æ·»åŠ å‰ç¼€ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½¿ç”¨äº†ç¬¬ä¸‰æ–¹åº“ç¼–å†™è‡ªå·±çš„ä»£ç ï¼Œå¹¶å‡†å¤‡å°†å…¶å‘å¸ƒä¸ºç¨‹åºåº“ä¾›ä»–äººå¼€å‘åº”ç”¨ç¨‹åºæ‰€ç”¨ï¼Œåˆ™å°¤å…¶è¦æ³¨æ„é‡å¤ç¬¦å·é—®é¢˜ã€‚è¿™ç§æƒ…å†µä¸‹ä¸ºäº†é¿å…ä½¿ç”¨è€…ä½¿ç”¨äº†ä¸ä½ ç›¸åŒçš„ç¬¬ä¸‰æ–¹åº“ï¼Œåº”è¯¥ä¸ºç¬¬ä¸‰æ–¹åº“éƒ½åŠ ä¸Šä½ è‡ªå·±çš„å‰ç¼€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-design-api-guide-1.png?imageView/2/w/400&quot; alt=&quot;ç¬¬ä¸‰æ–¹åº“å¼•å…¥ä½¿ç”¨å‰ç¼€&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å‘½åæ–¹å¼&quot;&gt;å‘½åæ–¹å¼&lt;/h3&gt;

&lt;p&gt;ç±»ã€æ–¹æ³•å’Œå˜é‡çš„å‘½åæ˜¯Objective-Cç¼–ç¨‹çš„é‡è¦ç¯èŠ‚ã€‚å¦‚æœå‘½åæ–¹å¼å¥½ï¼Œå¯ä»¥æé«˜ä»£ç å¯è¯»æ€§ï¼Œå‡å°‘ä¸å¿…è¦çš„æ³¨é‡Šã€‚
åˆå­¦è€…é€šå¸¸ä¼šè§‰å¾—Objective-Cæ˜¯é—¨å¾ˆç¹ççš„è¯­è¨€ï¼Œå› ä¸ºå…¶è¯­æ³•ç»“æ„ä½¿å¾—ä»£ç è¯»èµ·æ¥å’Œå¥å­ä¸€æ ·ã€‚å‘½åä¸­ä¸€èˆ¬éƒ½å¸¦æœ‰â€œinâ€ã€â€œforâ€ã€â€œwithâ€ç­‰ä»‹è¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å‘½åæ—¶è¿˜è¦è®²ç©¶è‹±æ–‡è¯­æ³•ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *text = @&quot;This is a good idea.&quot;;
NSString *newText = [text stringByReplacingOccurrencesOfString:@&quot;idea&quot; withString:@&quot;think&quot;];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç è™½ç„¶ç”¨äº†æ¯”è¾ƒå•°å—¦çš„æ–¹å¼æè¿°ä¸€ä¸ªçœ‹ä¸Šå»å¾ˆç®€å•çš„è¡¨è¾¾å¼ã€‚å¯¹äºæ‰§è¡Œæ›¿æ¢çš„é‚£ä¸ªæ–¹æ³•ï¼Œä»£ç è¯»èµ·æ¥å°±åƒæ—¥å¸¸è¯­è¨€é‡Œçš„é‚£ä¸ªå¥å­ï¼šâ€œTake text and give me a new string by replacing the occurrences of the string â€˜ideaâ€™ with the string â€˜thinkâ€™â€ã€‚
è¿™ä¸ªå¥å­å‡†ç¡®æè¿°äº†å¼€å‘è€…æƒ³åšçš„äº‹ã€‚åœ¨å‘½åä¸åƒObjective-Cè¿™èˆ¬ç¹ççš„è¯­è¨€ä¸­ï¼Œç±»ä¼¼çš„ç¨‹åºå¯èƒ½ä¼šå†™æˆï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;string text = &quot;This is a good idea.&quot;;
string new Text = text.replace(&quot;idea&quot;, &quot;think&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸Šé¢ä»£ç è¿™æ ·å†™ï¼Œçœ‹èµ·æ¥æ–¹æ³•åç®€æ´å¾ˆå¤šï¼Œä½†æ˜¯å¸¦æ¥çš„ä»£ç ä¸å¯è¯»æ€§å´æ˜¯éå¸¸å¤§çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä¸çŸ¥é“ text.replace æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°åˆ°åº•æŒ‰ç…§ä»€ä¹ˆé¡ºåºè§£è¯»ï¼ˆé™¤éæŸ¥çœ‹æ–¹æ³•å£°æ˜ï¼‰ï¼›å†è€…ï¼Œè¿™ä¸¤ä¸ªå‚æ•°è°æ›¿æ¢è°ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œå’Œå¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼ŒObjective-Cä¹Ÿæ˜¯é‡‡ç”¨â€œé©¼å³°å¼å¤§å°å†™å‘½åæ³•â€ï¼ˆcamel casingï¼‰â€”â€”ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå…¶åæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æ–¹æ³•å‘½å&quot;&gt;æ–¹æ³•å‘½å&lt;/h4&gt;

&lt;p&gt;æ¸…æ™°çš„æ–¹æ³•åä»å·¦è‡³å³è¯»èµ·æ¥å¥½ä¼¼ä¸€æ®µæ–‡ç« ã€‚å¹¶ä¸æ˜¯è¯´éå¾—æŒ‰ç…§é‚£äº›å‘½åè§„åˆ™æ¥ç»™æ–¹æ³•èµ·åï¼Œä¸è¿‡è¿™æ ·åšå¯ä»¥ä»¤ä»£ç å˜å¾—æ›´å¥½ç»´æŠ¤ï¼Œä½¿ä»–äººæ›´å®¹æ˜“è¯»æ‡‚ã€‚
è™½ç„¶ç±»ä¼¼C++æˆ–Javaä¸­é‚£ç§å‡½æ•°å‘½åç®€å•ï¼Œä½†æ˜¯ï¼Œè‹¥æƒ³çŸ¥é“æ¯ä¸ªå‚æ•°çš„ç”¨é€”ï¼Œå°±å¾—æŸ¥çœ‹å‡½æ•°åŸå‹ï¼Œè¿™ä¼šä»¤ä»£ç éš¾äºè¯»æ‡‚ã€‚
NSStringè¿™ä¸ªç±»å±•ç¤ºäº†ä¸€å¥—è‰¯å¥½çš„å‘½åä¹ æƒ¯ã€‚ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªæ–¹æ³•åŠå‘½åç¼˜ç”±ï¼š&lt;/p&gt;

&lt;p&gt;1ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;+ (instancetype)string;&lt;/code&gt;
å·¥å‚æ–¹æ³•ï¼ˆfactory methodï¼‰ï¼Œç”¨äºåˆ›å»ºæ–°çš„ç©ºå­—ç¬¦ä¸²ã€‚æ–¹æ³•åæ¸…æ™°åœ°æè¿°äº†è¿”å›å€¼çš„ç±»å‹ã€‚&lt;/p&gt;

&lt;p&gt;2ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;+ (instancetype)stringWithString:(NSString *)string;&lt;/code&gt;
å·¥å‚æ–¹æ³•ï¼Œæ ¹æ®æŸå­—ç¬¦ä¸²åˆ›å»ºå‡ºä¸ä¹‹å†…å®¹ç›¸åŒçš„æ–°å­—ç¬¦ä¸²ã€‚ä¸åˆ›å»ºç©ºå­—ç¬¦ä¸²æ‰€ç”¨çš„é‚£ä¸ªå·¥å‚æ–¹æ³•ä¸€æ ·ï¼Œæ–¹æ³•åçš„ç¬¬ä¸€ä¸ªå•è¯ä¹ŸæŒ‡æ˜äº†è¿”å›ç±»å‹ã€‚&lt;/p&gt;

&lt;p&gt;3ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;+ (instancetype)localizedStringWithFormat:(NSString *)format, ...;&lt;/code&gt;
å·¥å‚æ–¹æ³•ï¼Œæ ¹æ®ç‰¹å®šæ ¼å¼åˆ›å»ºå‡ºæ–°çš„â€œæœ¬åœ°åŒ–å­—ç¬¦ä¸²â€ï¼ˆlocalized stringï¼‰ã€‚è¿”å›å€¼ç±»å‹æ˜¯æ–¹æ³•åçš„ç¬¬äºŒä¸ªå•è¯ï¼ˆstringï¼‰ï¼Œå› ä¸ºå…¶å‰é¢è¿˜æœ‰ä¸ªä¿®é¥°è¯­ï¼ˆlocalizedï¼‰ç”¨æ¥æè¿°å…¶é€»è¾‘å«ä¹‰ã€‚æ­¤æ–¹æ³•çš„è¿”å›å€¼ä¾ç„¶æ˜¯â€œå­—ç¬¦ä¸²â€ï¼ˆstringï¼‰ï¼Œåªä¸è¿‡æ˜¯ä¸€ç§ç»è¿‡æœ¬åœ°åŒ–å¤„ç†çš„ç‰¹æ®Šå­—ç¬¦ä¸²ã€‚&lt;/p&gt;

&lt;p&gt;4ï¼‰&lt;code class=&quot;highlighter-rouge&quot;&gt;- (NSUInteger)lengthOfBytesUsingEncoding:(NSStringEncoding)enc;&lt;/code&gt;
è‹¥å­—ç¬¦ä¸²æ˜¯ä»¥ç»™å®šçš„ç¼–ç æ ¼å¼ï¼ˆASCIIã€UTF8ã€UTF16ï¼‰æ¥ç¼–ç çš„ï¼Œåˆ™è¿”å›å…¶å­—èŠ‚æ•°ç»„é•¿åº¦ã€‚æ­¤æ–¹æ³•ä¸lengthç›¸ä¼¼ï¼Œä½†è¯¥æ–¹æ³•è¿˜éœ€ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç´§è·Ÿç€æ–¹æ³•åä¸­æè¿°å…¶ç±»å‹çš„é‚£ä¸ªåè¯ï¼ˆencodingï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“æˆå‡ æ¡æ–¹æ³•å‘½åè§„åˆ™ï¼š&lt;/p&gt;

&lt;p&gt;1ï¼‰å¦‚æœæ–¹æ³•çš„è¿”å›å€¼æ˜¯æ–°åˆ›å»ºçš„ï¼Œé‚£ä¹ˆæ–¹æ³•åçš„é¦–ä¸ªè¯åº”è¯¥æ˜¯è¿”å›å€¼çš„ç±»å‹ï¼Œé™¤éå‰é¢è¿˜æœ‰ä¿®é¥°è¯­ï¼Œä¾‹å¦‚localizedStringã€‚å±æ€§çš„å­˜å–æ–¹æ³•ä¸éµå¾ªè¿™ç§å‘½åæ–¹å¼ï¼Œå› ä¸ºä¸€èˆ¬è®¤ä¸ºè¿™äº›æ–¹æ³•ä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡ã€‚å³ä¾¿æœ‰æ—¶è¿”å›å†…éƒ¨å¯¹è±¡çš„ä¸€ä»½æ‹·è´ï¼Œæˆ‘ä»¬ä¹Ÿè®¤ä¸ºé‚£ç›¸å½“äºåŸæœ‰å¯¹è±¡ã€‚è¿™äº›å­˜å–æ–¹æ³•åº”è¯¥æŒ‰ç…§å…¶æ‰€å¯¹åº”çš„å±æ€§æ¥å‘½åã€‚&lt;/p&gt;

&lt;p&gt;2ï¼‰åº”è¯¥æŠŠè¡¨ç¤ºå‚æ•°ç±»å‹çš„åè¯æ”¾åœ¨å‚æ•°å‰é¢ã€‚&lt;/p&gt;

&lt;p&gt;3ï¼‰å¦‚æœæ–¹æ³•è¦åœ¨å½“å‰å¯¹è±¡ä¸Šæ‰§è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°±åº”è¯¥åŒ…å«åŠ¨è¯ï¼›è‹¥æ‰§è¡Œæ“ä½œæ—¶è¿˜éœ€è¦å‚æ•°ï¼Œåˆ™åº”è¯¥åœ¨åŠ¨è¯åé¢åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªåè¯ã€‚&lt;/p&gt;

&lt;p&gt;4ï¼‰ä¸è¦ä½¿ç”¨strè¿™ç§ç®€ç§°ï¼Œåº”è¯¥ä½¿ç”¨stringè¿™æ ·çš„å…¨ç§°ã€‚&lt;/p&gt;

&lt;p&gt;5ï¼‰booleanå±æ€§åº”åŠ iså‰ç¼€ã€‚å¦‚æœæŸæ–¹æ³•è¿”å›éå±æ€§çš„booleanå€¼ï¼Œé‚£ä¹ˆåº”è¯¥æ ¹æ®å…¶åŠŸèƒ½ï¼Œé€‰ç”¨hasæˆ–iså½“å‰ç¼€ã€‚&lt;/p&gt;

&lt;p&gt;6ï¼‰å°†getè¿™ä¸ªå‰ç¼€ç•™ç»™é‚£äº›å€Ÿç”±â€œè¾“å‡ºå‚æ•°â€æ¥ä¿å­˜è¿”å›å€¼çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´ï¼ŒæŠŠè¿”å›å€¼å¡«å……åˆ°â€œCè¯­è¨€å¼æ•°ç»„â€ï¼ˆC-style arrayï¼‰é‡Œçš„é‚£ç§æ–¹æ³•å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¯åšå‰ç¼€ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç±»ä¸åè®®å‘½å&quot;&gt;ç±»ä¸åè®®å‘½å&lt;/h4&gt;

&lt;p&gt;ä¸ä»…ä»…æ˜¯æ–¹æ³•ï¼Œç±»å’Œåè®®ä¹Ÿåº”è¯¥åŠ ä¸Šå‰ç¼€ï¼Œé¿å…å‘½åç©ºé—´å†²çªã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UIView&lt;/li&gt;
  &lt;li&gt;UIViewController&lt;/li&gt;
  &lt;li&gt;UITableViewDelegate&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;é”™è¯¯æ¨¡å‹&quot;&gt;é”™è¯¯æ¨¡å‹&lt;/h2&gt;

&lt;p&gt;ç›®å‰æœ‰å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰â€œå¼‚å¸¸â€(exception)æœºåˆ¶ï¼ŒObjective-Cä¹Ÿä¸ä¾‹å¤–ã€‚&lt;/p&gt;

&lt;p&gt;â€œè‡ªåŠ¨å¼•ç”¨è®¡æ•°â€(ARC, Automatic Reference Counting)åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸æ˜¯â€œå¼‚å¸¸å®‰å…¨çš„â€ã€‚è¿™æ„å‘³ç€ï¼šå¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆæœ¬åº”è¯¥åœ¨ä½œç”¨åŸŸæœ«å°¾é‡Šæ”¾çš„å¯¹è±¡ç°åœ¨å´ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾äº†ã€‚å¦‚æœæƒ³ç”Ÿæˆâ€œå¼‚å¸¸å®‰å…¨â€çš„ä»£ç ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¼–è¯‘å™¨çš„æ ‡å¿—æ¥å®ç°ï¼Œä¸è¿‡è¿™å°†å¼•å…¥é¢å¤–ä»£ç ï¼Œåœ¨ä¸æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œä¹Ÿç…§æ ·è¦æ‰§è¡Œè¿™éƒ¨åˆ†ä»£ç ã€‚éœ€è¦æ‰“å¼€çš„ç¼–è¯‘å™¨æ ‡å¿—å«åš&lt;code class=&quot;highlighter-rouge&quot;&gt;-fobjc-arc-exception&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Objective-Cç°åœ¨æ‰€é‡‡ç”¨çš„åŠæ³•æ˜¯ï¼šåªåœ¨æå…¶ç½•è§çš„æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ï¼Œå¼‚å¸¸æŠ›å‡ºä¹‹åï¼Œæ— é¡»è€ƒè™‘æ¢å¤é—®é¢˜ï¼Œè€Œä¸”åº”ç”¨ç¨‹åºæ­¤æ—¶ä¹Ÿåº”è¯¥é€€å‡ºã€‚è¿™å°±æ˜¯è¯´ï¼Œä¸ç”¨å†ç¼–å†™å¤æ‚çš„â€œå¼‚å¸¸å®‰å…¨â€ä»£ç äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¼‚å¸¸åªåº”è¯¥ç”¨äºæå…¶ä¸¥é‡çš„é”™è¯¯ï¼Œæ¯”å¦‚ï¼Œä½ ç¼–å†™äº†æŸä¸ªæŠ½è±¡åŸºç±»ï¼Œå®ƒçš„æ­£ç¡®ç”¨æ³•æ˜¯å…ˆä»ä¸­ç»§æ‰¿ä¸€ä¸ªå­ç±»ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå­ç±»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰äººç›´æ¥ä½¿ç”¨äº†è¿™ä¸ªæŠ½è±¡åŸºç±»ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘æŠ›å‡ºå¼‚å¸¸ã€‚ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒObjective-Cä¸­æ²¡åŠæ³•å°†æŸä¸ªç±»æ ‡è¯†ä¸ºâ€œæŠ½è±¡ç±»â€ã€‚è¦æƒ³è¾¾æˆç±»ä¼¼æ•ˆæœï¼Œæœ€å¥½çš„åŠæ³•æ˜¯åœ¨é‚£äº›å­ç±»å¿…é¡»è¦†å†™çš„è¶…ç±»æ–¹æ³•é‡ŒæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;

&lt;p&gt;å¼‚å¸¸åªç”¨äºå¤„ç†ä¸¥é‡é”™è¯¯(fatal error)ï¼Œå¯¹äºå…¶ä»–é”™è¯¯ï¼ŒObjective-Cè¯­è¨€æ‰€ç”¨çš„ç¼–ç¨‹èŒƒå¼ä¸ºï¼šä»¤æ–¹æ³•è¿”å›nil/0ï¼Œæˆ–ä½¿ç”¨NSErrorï¼Œä»¥è¡¨æ˜æœ‰é”™è¯¯å‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;NSErrorå¯¹è±¡é‡Œå°è£…äº†ä¸‰æ¡ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Error domain (é”™è¯¯èŒƒå›´ï¼Œå…¶ç±»å‹ä¸ºå­—ç¬¦ä¸²)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é”™è¯¯å‘ç”Ÿçš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿé”™è¯¯çš„æ ¹æºï¼Œé€šå¸¸ç”¨ä¸€ä¸ªç‰¹æœ‰çš„å…¨å±€å˜é‡æ¥å®šä¹‰ã€‚ä¾‹å¦‚ï¼ŒURL-handling-subsystemï¼Œåœ¨ä»URLä¸­è§£ææˆ–è·å–æ•°æ®æ—¶å¦‚æœå‡ºé”™äº†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨NSURLErrorDomainæ¥è¡¨ç¤ºé”™è¯¯èŒƒå›´ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Error code (é”™è¯¯ç ï¼Œå…¶ç±»å‹ä¸ºæ•´æ•°)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç‹¬æœ‰çš„é”™è¯¯ç ï¼Œç”¨ä»¥æŒ‡æ˜åœ¨æŸä¸ªèŒƒå›´å†…å…·ä½“å‘ç”Ÿäº†ä½•ç§é”™è¯¯ã€‚æŸä¸ªç‰¹å®šèŒƒå›´å†…å¯èƒ½ä¼šå‘ç”Ÿä¸€ç³»åˆ—ç›¸å…³é”™è¯¯ï¼Œè¿™äº›é”™è¯¯æƒ…å†µé€šå¸¸é‡‡ç”¨enumæ¥å®šä¹‰ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;User info (ç”¨æˆ·ä¿¡æ¯ï¼Œå…¶ç±»å‹ä¸ºå­—å…¸)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ‰å…³æ­¤é”™è¯¯çš„é¢å¤–ä¿¡æ¯ï¼Œå…¶ä¸­æˆ–è®¸åŒ…å«ä¸€æ®µâ€œæœ¬åœ°åŒ–æè¿°â€ï¼Œæˆ–è®¸è¿˜åŒ…å«æœ‰å¯¼è‡´è¯¥é”™è¯¯å‘ç”Ÿçš„å¦å¤–ä¸€ä¸ªé”™è¯¯ï¼Œç»ç”±æ­¤ç§ä¿¡æ¯ï¼Œå¯å°†ç›¸å…³é”™è¯¯ä¸²æˆä¸€æ¡â€œé”™è¯¯é“¾â€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨ä¸å¯å˜å¯¹è±¡&quot;&gt;ä½¿ç”¨ä¸å¯å˜å¯¹è±¡&lt;/h2&gt;

&lt;p&gt;è®¾è®¡ç±»çš„æ—¶å€™ï¼Œåº”å……åˆ†ä½¿ç”¨å±æ€§æ¥å°è£…æ•°æ®ã€‚è€Œåœ¨ä½¿ç”¨å±æ€§æ—¶ï¼Œåˆ™å¯å°†å…¶å£°æ˜ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;readonly&lt;/code&gt;ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå±æ€§æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;readwrite&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºå¦‚æœæŠŠå¯å˜å¯¹è±¡(mutable object)æ”¾å…¥collectionä¹‹ååˆä¿®æ”¹å…¶å†…å®¹ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å°±ä¼šç ´åsetçš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œä½¿å…¶å¤±å»å›ºæœ‰çš„è¯­ä¹‰ã€‚æ•…æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘å¯¹è±¡ä¸­çš„å¯å˜å†…å®¹ã€‚å…·ä½“åˆ°ç¼–ç¨‹å®è·µä¸­ï¼Œåˆ™åº”è¯¥å°½é‡æŠŠå¯¹å¤–å…¬å¸ƒå‡ºæ¥çš„å±æ€§è®¾ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;readonly&lt;/code&gt;ï¼Œè€Œä¸”åªåœ¨æœ‰å¿…è¦æ—¶æ‰å°†å±æ€§å¯¹å¤–å…¬å¸ƒã€‚&lt;/p&gt;

&lt;p&gt;å®šä¹‰ç±»çš„å…¬å…±APIæ—¶ï¼Œéœ€è¦æ³¨æ„ï¼Œå¯¹è±¡é‡Œè¡¨ç¤ºå„ç§collectionçš„é‚£äº›å±æ€§ç©¶ç«Ÿåº”è¯¥è®¾æˆå¯å˜çš„ï¼Œè¿˜æ˜¯ä¸å¯å˜çš„ã€‚å¦‚æœæŸä¸ªå±æ€§å¯ä»¥ä¸ºå¤–ç•Œæ‰€å¢åˆ ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§å°±éœ€è¦ç”¨å¯å˜çš„setæ¥å®ç°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸åº”è¯¥æä¾›ä¸€ä¸ªreadonlyå±æ€§ä¾›å¤–ç•Œä½¿ç”¨ï¼Œè¯¥å±æ€§å°†è¿”å›ä¸å¯å˜çš„setï¼Œè€Œæ­¤setåˆ™æ˜¯å†…éƒ¨é‚£ä¸ªå¯å˜setçš„ä¸€ä»½æ‹·è´ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//  ZKRPointOfInterest.h
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;UIKit/UIKit.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRPointOfInterest&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithIdentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;identifier&lt;/span&gt;
                             &lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;
                          &lt;span class=&quot;nf&quot;&gt;latitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;latitude&lt;/span&gt;
                         &lt;span class=&quot;nf&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZKRPointOfInterest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZKRPointOfInterest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//  ZKRPointOfInterest.m
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &quot;ZKRPointOfInterest.h&quot;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRPointOfInterest&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSMutableSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_internalLocations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initWithIdentifier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identifier&lt;/span&gt;
                             &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;
                          &lt;span class=&quot;n&quot;&gt;latitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;latitude&lt;/span&gt;
                         &lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;longitude&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locations&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_internalLocations&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addLocation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZKRPointOfInterest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_internalLocations&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;removeLocation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZKRPointOfInterest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_internalLocations&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;removeObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;ä¸è¦åœ¨è¿”å›çš„å¯¹è±¡ä¸ŠæŸ¥è¯¢ç±»å‹ä»¥ç¡®å®šå…¶æ˜¯å¦å¯å˜ã€‚(å³ä½¿ä¸ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;isKindOfClass:&lt;/code&gt;æ–¹æ³•æ¥åˆ¤æ–­è¿”å›å€¼ç±»å‹æ˜¯å¦å¯å˜)&lt;/p&gt;

&lt;h2 id=&quot;descriptionæ–¹æ³•&quot;&gt;descriptionæ–¹æ³•&lt;/h2&gt;

&lt;p&gt;åœ¨è°ƒè¯•ç¨‹åºæ—¶ï¼Œç»å¸¸éœ€è¦æ‰“å°å¹¶æŸ¥çœ‹å¯¹è±¡ä¿¡æ¯ã€‚ä¸€ç§åŠæ³•æ˜¯ç¼–å†™ä»£ç æŠŠå¯¹è±¡çš„å…¨éƒ¨å±æ€§éƒ½logåˆ°æ—¥å¿—ä¸­ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog(@&quot;object=%@&quot;, object);&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æ„å»ºéœ€è¦æ‰“å°åˆ°æ—¥å¿—çš„å­—ç¬¦ä¸²æ—¶ï¼Œobjectå¯¹è±¡ä¼šæ”¶åˆ°descriptionæ¶ˆæ¯ï¼Œè¯¥æ–¹æ³•æ‰€è¿”å›çš„æè¿°ä¿¡æ¯å°†å–ä»£â€œæ ¼å¼å­—ç¬¦ä¸²â€(format string)é‡Œçš„â€œ%@â€ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSArray *obj = @[@&quot;A string&quot;, @(123)];
NSLog(@&quot;object=%@&quot;, obj);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;object=(
	&quot;A string&quot;,
	123
)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœåœ¨è‡ªå®šä¹‰ç±»ä¸Šè¿™ä¹ˆåšï¼Œé‚£ä¹ˆåˆ™è¾“å‡ºçš„ä¿¡æ¯å´æ˜¯å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;object=&amp;lt;ZKRSqure: 0x7656d8a90060&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœæƒ³è¦åƒä¸Šé¢NSArrayé‚£æ ·æ‰“å°å‡ºæœ‰ç”¨çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥åœ¨è‡ªå·±çš„ç±»ä¸­è¦†å†™descriptionæ–¹æ³•ï¼Œå¦åˆ™æ‰“å°ä¿¡æ¯æ—¶å°±ä¼šè°ƒç”¨NSObjectç±»æ‰€å®ç°çš„é»˜è®¤æ–¹æ³•ã€‚æ­¤æ–¹æ³•å®šä¹‰åœ¨NSObjectåè®®é‡Œï¼Œä¸è¿‡NSObjectç±»ä¹Ÿå®ç°äº†å®ƒã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (NSString *)description
{
    return [NSString stringWithFormat:@&quot;&amp;lt;%@: %p, \&quot;%f %f\&quot;&amp;gt;&quot;, [self class], self, _width, _height];
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨ç»“æœï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ZKRRectangle *rectangle = [[ZKRRectangle alloc] initWithWidth:5.0 height:7.0];
NSLog(@&quot;%@&quot;, rectangle);

//Output
&amp;lt;ZKRRectangle: 0x60000002fc20, &quot;5.000000 7.000000&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;NSObjectåè®®ä¸­è¿˜æœ‰ä¸ªéœ€è¦æ³¨æ„çš„æ–¹æ³•ï¼Œå°±æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;debugDescription&lt;/code&gt;ï¼Œæ­¤æ–¹æ³•ç”¨æ„ä¸&lt;code class=&quot;highlighter-rouge&quot;&gt;description&lt;/code&gt;ç›¸ä¼¼ã€‚äºŒè€…åŒºåˆ«åœ¨äºï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;debugDescription&lt;/code&gt;æ–¹æ³•æ˜¯å¼€å‘è€…åœ¨è°ƒè¯•å™¨(debugger)ä¸­ä»¥æ§åˆ¶å°å‘½ä»¤æ‰“å°å¯¹è±¡æ—¶æ‰è°ƒç”¨çš„ã€‚åœ¨NSObjectç±»çš„é»˜è®¤å®ç°ä¸­ï¼Œå®ƒåªæ˜¯ç›´æ¥è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;description&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆå§‹åŒ–æ–¹æ³•&quot;&gt;åˆå§‹åŒ–æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;æ‰€æœ‰å¯¹è±¡å‡è¦åˆå§‹åŒ–ï¼Œåœ¨åˆå§‹åŒ–æ—¶ï¼Œæœ‰äº›å¯¹è±¡å¯èƒ½æ— é¡»å¼€å‘è€…å‘å…¶æä¾›é¢å¤–ä¿¡æ¯ï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´è¿˜æ˜¯éœ€è¦æä¾›çš„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹è±¡è‹¥ä¸çŸ¥é“å¿…è¦çš„ä¿¡æ¯ï¼Œåˆ™æ— æ³•å®Œæˆå…¶å·¥ä½œã€‚ä¾‹å¦‚ï¼ŒUITAbleViewCellç±»åˆå§‹åŒ–è¯¥ç±»å¯¹è±¡æ—¶ï¼Œéœ€è¦æŒ‡æ˜å…¶æ ·å¼åŠæ ‡è¯†ç¬¦ï¼Œæ ‡è¯†ç¬¦èƒ½å¤ŸåŒºåˆ†ä¸åŒç±»å‹çš„å•å…ƒæ ¼ã€‚ç”±äºè¿™ç§å¯¹è±¡çš„åˆ›å»ºæˆæœ¬è¾ƒé«˜ï¼Œæ‰€ä»¥ç»˜åˆ¶è¡¨æ ¼æ—¶å¯ä¾ç…§æ ‡è¯†ç¬¦æ¥å¤ç”¨ï¼Œä»¥æå‡ç¨‹åºæ•ˆç‡ã€‚è¿™ç§å¯ä¸ºå¯¹è±¡æä¾›å¿…è¦ä¿¡æ¯ä»¥ä¾¿å…¶èƒ½å®Œæˆå·¥ä½œçš„åˆå§‹åŒ–æ–¹æ³•å«åšâ€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€(designated initializer)ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœåˆ›å»ºç±»å®ä¾‹çš„æ–¹å¼ä¸æ­¢ä¸€ç§ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±ä¼šæœ‰å¤šä¸ªåˆå§‹åŒ–æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦é€‰å®šä¸€ä¸ªä½œä¸ºå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œä»¤å…¶ä»–åˆå§‹åŒ–æ–¹æ³•éƒ½æ¥è°ƒç”¨å®ƒã€‚ä¾‹å¦‚ï¼ŒNSDateç±»&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (instancetype)init NS_DESIGNATED_INITIALIZER;
- (instancetype)initWithTimeIntervalSinceReferenceDate:(NSTimeInterval)ti NS_DESIGNATED_INITIALIZER;
- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder NS_DESIGNATED_INITIALIZER;
- (instancetype)initWithTimeIntervalSinceNow:(NSTimeInterval)secs;
- (instancetype)initWithTimeIntervalSince1970:(NSTimeInterval)secs;
- (instancetype)initWithTimeInterval:(NSTimeInterval)secsToBeAdded sinceDate:(NSDate *)date;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ä¸Šé¢å‡ ä¸ªåˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;initWithTimeIntervalSinceReferenceDate:&lt;/code&gt;æ˜¯å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ã€‚åªæœ‰åœ¨å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œæ‰ä¼šå­˜å‚¨å†…éƒ¨æ•°æ®ã€‚è¿™æ ·çš„è¯ï¼Œå½“åº•å±‚æ•°æ®å­˜å‚¨æœºåˆ¶æ”¹å˜æ—¶ï¼Œåªéœ€ä¿®æ”¹æ­¤æ–¹æ³•çš„ä»£ç å°±å¥½ï¼Œæ— é¡»æ”¹åŠ¨å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//  ZKRRectangle.h
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &amp;lt;UIKit/UIKit.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRRectangle&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCopying&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//  ZKRRectangle.m
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &quot;ZKRRectangle.h&quot;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRRectangle&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithCoder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCoder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;aDecoder&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aDecoder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;width&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;floatValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aDecoder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decodeObjectForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;floatValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@throw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exceptionWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInternalInconsistencyException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;Must use initWithWidth:height: instad.&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initWithWidth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//  ZKRSquare.h
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &quot;ZKRRectangle.h&quot;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRSquare&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRRectangle&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithDimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//  ZKRSquare.m
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#import &quot;ZKRSquare.h&quot;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ZKRSquare&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@throw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exceptionWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInternalInconsistencyException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;Must use initWithDimension: instad.&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithDimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initWithDimension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initWithWidth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@throw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exceptionWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInternalInconsistencyException&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;Must use initWithDimension: instad.&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithDimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dimension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;åœ¨ç±»ä¸­æä¾›ä¸€ä¸ªå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶äºæ–‡æ¡£é‡ŒæŒ‡æ˜ã€‚å…¶ä»–åˆå§‹åŒ–æ–¹æ³•å‡è°ƒç”¨æ­¤æ–¹æ³•ã€‚&lt;/li&gt;
  &lt;li&gt;è‹¥å…¨èƒ½æ–¹æ³•äºè¶…ç±»ä¸åŒï¼Œåˆ™éœ€è¦è¦†å†™è¶…ç±»ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœè¶…ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¸é€‚ç”¨äºå­ç±»ï¼Œé‚£ä¹ˆåº”è¯¥è¦†å†™è¿™ä¸ªè¶…ç±»æ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;nscopyingåè®®&quot;&gt;NSCopyingåè®®&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨å¯¹è±¡æ—¶ç»å¸¸éœ€è¦æ‹·è´å®ƒã€‚åœ¨Objective-Cä¸­ï¼Œæ­¤æ“ä½œé€šè¿‡copyæ–¹æ³•å®Œæˆã€‚å¦‚æœæƒ³ä»¤è‡ªå·±çš„ç±»æ”¯æŒæ‹·è´æ“ä½œï¼Œé‚£å°±è¦å®ç°NSCopyingåè®®ï¼Œè¯¥åè®®åªæœ‰ä¸€ä¸ªæ–¹æ³•:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (id)copyWithZone:(nullable NSZone *)zone;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆä¼šå‡ºç°NSZoneå‘¢ï¼Ÿå› ä¸ºä»¥å‰å¼€å‘ç¨‹åºæ—¶ï¼Œä¼šæ®æ­¤æŠŠå†…å®¹åˆ†æˆä¸åŒçš„â€œåŒºâ€(zone)ï¼Œè€Œå¯¹è±¡ä¼šåˆ›å»ºåœ¨æŸä¸ªåŒºé‡Œé¢ã€‚ç°åœ¨ä¸ç”¨äº†ï¼Œæ¯ä¸ªç¨‹åºåªæœ‰ä¸€ä¸ªåŒºï¼šâ€œé»˜è®¤åŒºâ€(default zone)ã€‚æ‰€ä»¥è¯´ï¼Œå°½ç®¡å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ä½ ä¸å¿…æ‹…å¿ƒå…¶ä¸­çš„zoneå‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;copyæ–¹æ³•ç”±NSObjectå®ç°ï¼Œè¯¥æ–¹æ³•åªæ˜¯ä»¥â€œé»˜è®¤åŒºâ€ä¸ºå‚æ•°æ¥è°ƒç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;copyWithZone:&lt;/code&gt;ã€‚æˆ‘ä»¬æ€»æ˜¯æƒ³è¦†å†™copyæ–¹æ³•ï¼Œå…¶å®çœŸæ­£éœ€è¦å®ç°çš„æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;copyWithZone:&lt;/code&gt;æ–¹æ³•ã€‚è‹¥æƒ³ä½¿æŸä¸ªç±»æ”¯æŒæ‹·è´åŠŸèƒ½ï¼Œåªéœ€å£°æ˜è¯¥ç±»éµä»NSCopyingåè®®ï¼Œå¹¶å®ç°å…¶ä¸­çš„é‚£ä¸ªæ–¹æ³•å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (id)copyWithZone:(NSZone *)zone
{
    ZKRRectangle *copy = [[[self class] allocWithZone:zone] initWithWidth:_width height:_height];
    return copy;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¯´åˆ°copyæ–¹æ³•ï¼Œé™¤äº†NSStringè¿™æ ·çš„ä¸å¯å˜ç±»å‹çš„copyï¼Œä¸ä¹‹ç±»ä¼¼çš„è¿˜æœ‰NSMutableStringç±»çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;mutableCopy&lt;/code&gt;æ–¹æ³•ã€‚ä¸&lt;code class=&quot;highlighter-rouge&quot;&gt;copyWithZone:&lt;/code&gt;æ–¹æ³•ç›¸å¯¹åº”çš„å¯å˜å†…å®¹çš„copyæ–¹æ³•&lt;code class=&quot;highlighter-rouge&quot;&gt;mutableCopyWithZone:&lt;/code&gt;æ–¹æ³•æ¥è‡ªäº&lt;code class=&quot;highlighter-rouge&quot;&gt;NSMutableCopying&lt;/code&gt;åè®®ã€‚å¦‚æœä½ çš„ç±»åˆ†ä¸ºå¯å˜ç‰ˆæœ¬(mutable)ä¸ä¸å¯å˜ç‰ˆæœ¬(immutable)ï¼Œé‚£ä¹ˆå°±åº”è¯¥å®ç°NSMutableCopyingåè®®ã€‚è‹¥é‡‡ç”¨æ­¤æ¨¡å¼ï¼Œåˆ™åœ¨å¯å˜ç±»ä¸­è¦†å†™&lt;code class=&quot;highlighter-rouge&quot;&gt;copyWithZone:&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œä¸è¦è¿”å›å¯å˜çš„æ‹·è´ï¼Œè€Œåº”è¯¥è¿”å›ä¸€ä»½ä¸å¯å˜çš„ç‰ˆæœ¬ã€‚æ— è®ºå½“å‰å®ä¾‹æ˜¯å¦å¯å˜ï¼Œéœ€è¦è·å–å…¶å¯å˜ç‰ˆæœ¬çš„æ‹·è´ï¼Œå‡åº”è°ƒç”¨mutableCopyæ–¹æ³•ï¼›è·å–ä¸å¯å˜ç‰ˆæœ¬çš„æ‹·è´ï¼Œåˆ™æ€»åº”è¯¥é€šè¿‡copyæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-design-api-guide-2.png?imageView/2/w/500&quot; alt=&quot;mutableCopyå’Œcopyç±»&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ·±æ‹·è´å°±æ˜¯åœ¨æ‹·è´å¯¹è±¡è‡ªèº«æ—¶ï¼Œå°†å…¶åº•å±‚æ•°æ®ä¹Ÿä¸€å¹¶å¤åˆ¶è¿‡å»ã€‚
æµ…æ‹·è´å°±æ˜¯åœ¨æ‹·è´å¯¹è±¡æ—¶ï¼Œåªæ‹·è´å®¹å™¨å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸å¤åˆ¶å…¶ä¸­æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://o88e8any8.bkt.clouddn.com/ios-design-api-guide-3.png?imageView/2/w/400&quot; alt=&quot;æ·±æ‹·è´å’Œæµ…æ‹·è´æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;</content><author><name>Chars</name></author><category term="pieces" /><category term="ios" /><category term="objc" /><category term="æ¡†æ¶" /><summary type="html">ä¸ºäº†èƒ½å¤Ÿå°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„ä»£ç èƒ½å¤Ÿåœ¨åç»­å¼€å‘è€…ä½¿ç”¨ï¼ˆé‡ç”¨ä»£ç ï¼‰ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯å°†ä»£ç æŒ‰ç…§åŠŸèƒ½æ¨¡å—ç¼–å†™æˆAPIã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆæœ‰å¿…è¦äº†è§£Objective-Cè¯­è¨€ä¸­å¸¸è§çš„ç¼–ç¨‹èŒƒå¼ï¼ˆparadigmï¼‰ï¼ŒåŒæ—¶è¿˜éœ€äº†è§£å„ç§å¯èƒ½ç¢°åˆ°çš„é™·é˜±ã€‚</summary></entry></feed>